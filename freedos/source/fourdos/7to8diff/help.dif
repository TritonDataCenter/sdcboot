--- 4doshlp1.txt	2006-04-04 01:00:00 +0200
+++ 4dos.txt	2009-02-27 11:56:10 +0200
@@ -2,109 +2,252 @@
 ; Copyright 1988 - 2004, JP Software Inc., All Rights Reserved.
 ; Published by JP Software Inc., P.O. Box 328, Chestertown, MD  21620, USA.
 ;
-;   2004-08-28 CED   rearranged TOC; removed references to contacting
-;                    technical support, branding, DOSKEY, UNC path in
-;                    implicit CDD; inserted ad copy for 4NT and TCmd
-;                    as topics #20 and #21; renamed "Take Command/32"
-;                    to "Take Command" throughout
+;   This is a variant help text for Luchezar Georgiev's updated release
+;   of 4DOS.
 ;
-;   2004-09-02 CED   removed more references to contacting JPS; updated
-;                    4NT and TCmd blurbs; reworded warning about quoting
-;                    filenames containing special characters (true on non-
-;                    LFN volumes as well); correction to DO, topic #615;
-;                    began "Embarrassment of Riches" section, #920-931.
+;   Changes since 2006-04-04:
 ;
-;   2004-09-03 CED   fixed pointers to _DOWF, topic #226
+;   2006-12-15 CED   Changes for build 136:  Startup option /Y reenabled
+;                    (yeah!); changes to RMDIR, SET, SHIFT, @FILESIZE.
+;                    Stripped out the wishlist and change log pages.
 ;
-;   2004-09-25 CED   Embarrassment of Riches more or less finished.
-;                    Restored original TOC format.  Began adding info re.
-;                    .INI directives.
+;   2006-12-22 LIG   Changes for build 140:  Removed warning about @READY.
+;                    Added _CPU information about the Pentium 4 and newer.
 ;
-;   2004-10-02 CED   Minor additions to SETDOS /M, REBOOT, LOG /E
+;   2006-12-24 LIG   Changes for build 141:  Added gigabyte suffix to file
+;                    size ranges and units pages, and for DIR /4.
 ;
-;   2004-10-03 CED   Removed the .INI Directives by Name topics, which
-;                    would be more useful if they could all be stored in
-;                    a single topic.
+;   2006-12-26 LIG   Added help for @SERIAL and compatibility information
+;                    about CADStar PCB.
 ;
-;   2004-10-09 CED   Reclassified a few of the key-mapping directives based
-;                    on the directive used to deassign them.  For instance,
-;                    DirWinOpen is a "command-line editing" directive since
-;                    it is released via NormalEditKey and not NormalPopupKey.
-;                    Added info on dynamically relocating 4DOS, topic #797.
+;   2006-12-30 LIG   Changes for build 144:  Added /V option to TYPE.
+;                    Added SMARTDRV cache flushing and /P option to REBOOT.
 ;
-;   2004-10-10 CED   Rewrote topic #110, "Detecting 4DOS".  Minor additions
-;                    to _DOS _DOSVER and _WIN.
+;   2007-1-6   LIG   Changes for build 145:  Added EJECTMEDIA and CLOSETRAY.
+;                    Added "DVD" to most places where a CD-ROM is mentioned.
+;                    Added a @READY warning about some CD-ROM drivers.
 ;
-;   2004-10-30 CED   DO, topic #615, mentions /A: again.  Descriptions of
-;                    /A: tweaked throughout to make the use of OR attributes
-;                    clearer (hopefully.)  Mentioned /[!%_dname] under
-;                    "Advanced Features" of COPY and MOVE, #606 and #646.
-;                    Added examples to file-selection switches, #56.
+;   2007-1-7   LIG   Changes for build 146:  Added @CWD and @CWDS functions.
 ;
-;   2004-10-31 CED   Added pages for the external commands KSTACK, #703,
-;                    and BATCOMP, #704.  Removed reference to startup
-;                    option /Y which is, alas, still gone.
+;   2007-1-8   LIG   Changes for build 147:  Added @EVAL hex output option.
+;                    Corrected the limits of @CONVERT value.
 ;
-;   2004-11-03 CED   Removed unreferenced topic #591, "Commands".
-;                    (HELP COMMANDS at the prompt now brings up the
-;                    Category list.)  Added CDDWinLeft and PopupWinLeft
-;                    equates #456 and #457 for the benefit of OPTION.EXE.
+;   2007-1-31  LIG   Changes for build 151 (7.51):
+;                    Changed some error strings to reflect changes in 4DOS.
+;                    Updated version number which now equals 7.(build-100).
 ;
-;   2004-11-06 CED   Added CASE, DEFAULT, ENDSWITCH equates #700, #701,
-;                    #702 for SWITCH keywords listed as 'commands' by ?.
-;                    More caveats for EXCEPT.  Notes throughout re. hidden/
-;                    system subdirectories and the /S option.
+;   2007-2-4   LIG   Changes for build 152 (7.52):  Added /L option to LIST.
 ;
-;   2004-11-27 CED   Renumbered many topics to reduce the help file size.
-;                    Added warning re. @file lists and /S in the common
-;                    switches, #56.
+;   2007-2-15  LIG   Changes for build 153 (7.53):
+;                    Maximal description length before wrapping decremented.
+;                    Updated File Not Found & No More Files error messages.
+;                    Second error list column condensed to hide less of it.
 ;
-;   2004-11-30 CED   Minor additions to redirection #51; added a table #55
-;                    of all legal 4DOS output redirection operators.  Added
-;                    stderr/stdin/stdout and Windows NT to the glossary.
+;   2007-4-20  LIG   Changes for build 154 (7.54):
+;                    Added _ALT, _CAPSLOCK, _CTRL, _LSHIFT, _NUMLOCK,
+;                          _RSHIFT, _SCROLLLOCK and _SHIFT variables.
 ;
-;   2004-12-06 CED   Implements most of Roger Byrne's suggestions of
-;                    September 2003 through February 2004.
+;   2007-6-25  LIG   Changes for build 156 (7.56):
+;                    Added _DATETIME and _MONTHF variables.
+;                    Added @AGEDATE and @MONTHF functions.
 ;
-;   2004-12-11 CED   Completed review of /A: and /S options.
+;   2007-7-27  LIG   Changes for build 157 (7.57):  Added @FIELDS function.
 ;
-;   2004-12-18 CED   Adds aliases for KSTACK.COM and BATCOMP.EXE (#705 and
-;                    #706) and the remaining CDDWin and PopupWin directives
-;                    (#880 - #885).
+;   2007-10-27 LIG   Changes for build 159 (7.59):  Added @MD5 function.
 ;
-;   2005-01-03 CED   Redirected numerous references to ANSI drivers from
-;                    #915 to #842; fleshed out TITLEPROMPT #146; added
-;                    info re DR-DOS passwords.  Other minor tweaks.
+;   2008-5-24  LIG   Changes for build 164 (7.64):  Added EQC operator.
 ;
-;   2005-01-16 CED   Split ECHO / ECHOERR and ECHOS / ECHOSERR into
-;                    separate topics.  Additions to all four, especially
-;                    ECHO.
+;   2008-6-11  LIG   Changes for build 165 (7.65):
+;                    Added _LALT, _LCTRL, _RALT, _RCTRL variables.
+;                    Changed and amended text for the _DOS variable.
+;                    Added newer Windows versions to the Windows NT topic
+;                    and changed the URL for 4NT (now named TCC).
 ;
-;   2005-04-17 CED   Adds ye olde 4DOSTECH.TXT and a list of keywords.
-;                    Minor tweaks to @filesize, @if, @ready, alias, iff,
-;                    switch, //logname and //histlogname.
+;   2008-6-29  LIG   Changes for build 167 (7.67):
+;                    Added _EXECSTR variable.
+;                    Deleted the note about REBOOT not working in Windows 9x
+;                    and added a similar note about the /P option.
 ;
-;   2005-06-10 CED   Makes Technical, #798 and Keywords, #799 TTYable.
-;                    Minor tweaks to Relocating, #797.
+;   2008-7-1   LIG   Changes for build 168 (7.68):
+;                    Added a warning for REBOOT under Windows (important!).
+;                    Deleted text saying REBOOT /P does not work in W9x/ME.
+;                    Added text about showing the "brand string" for _CPU.
 ;
-;   2005-06-18 CED   Adds equates for more keywords:  ITERATE #707,
-;                    LEAVE #708, ENDDO #709, ELSE #710, ELSEIFF #711,
-;                    ENDIFF #712, ENDTEXT #713.
+;   2008-7-4   LIG   Changes for build 169 (7.69):
+;                    Added _STDIN, _STDOUT and _STDERR variables.
+;                    Added @SHA1 function.
 ;
-;   2005-07-18 CED   Added links between @COMMA and @FORMAT.  Moved the
-;                    examples of variable functions into a separate topic
-;                    (Functions had too many links, bumping into a limitation
-;                    of 4HELP.EXE.)  Highlighted comments in sample batch
-;                    files.  Added this topic to list recent updates
-;                    (HELP CHANGES).
+;   2008-7-9   LIG   Changes for build 170 (7.70):
+;                    Added /N option and case-sensitive search to LIST.
 ;
-;   2005-10-09 CED   Documented the unofficial SET /A option.  Added a
-;                    reference to Argument Quoting under Using the Command
-;                    Line.  Added a note to RMDIR re. attributes.
+;   2008-7-10  LIG   Changes for build 171 (7.71):
+;                    Added _EDITMODE and _EXPANSION variables.
+;                    Added user-defined function expansion (9) to SETDOS /X.
 ;
-;   2006-03-31 CED   @DEC @DECIMAL @INC TREE @DATE @DAY @DOW @DOWF @DOWI
-;                    @DOY @MAKEAGE @MONTH @YEAR @TIME
-;                    @FILES @FILEREAD
+;   2008-7-15  LIG   Changes for build 172 (7.72):
+;                    Added @LTRIM, @RTRIM and @TRUNCATE functions.
+;                    Added text for @RANDOM to describe the new algorithm.
+;                    Removed text on SETDOS /W failing in MS-/PC DOS/W9x/ME.
+;                    and added a link to SETDOS in the UnixPaths topic.
+;
+;   2008-7-17  LIG   Added a recommendation to set Logo=0 in MSDOS.SYS.
+;
+;   2008-8-4   LIG   Changes for build 173 (7.73):
+;                    Added @SMBSTR.
+;                    Removed text in MEMORY and @EXTENDED topics saying that
+;                    XMS excludes extended memory because it's no longer so.
+;
+;   2008-8-12  LIG   Changes for build 174 (7.74):
+;                    Added @FILEREADB.
+;                    Added text for the mode of @FILEWRITEB when length = -1
+;
+;   2008-8-24  LIG   Changes for build 175 (7.75):
+;                    Added SET /E option.
+;                    Added @AVERAGE and _SYSREQ.
+;                    Added text that labels are not limited to 8 characters.
+;
+;   2008-8-29  LIG   Changes for build 176 (7.76):
+;                    Added MOD operator for @EVAL.
+;                    Added @ISODOWI, @ISOWEEK, _ISODOWI, _ISOWEEK.
+;
+;   2008-8-31  LIG   Changes for build 177 (7.77):
+;                    Added _ISOWDATE.
+;                    Added ISO week date input to Date Formats, DATE, TOUCH
+;                    and ranges.
+;                    Added format 5 (ISO week date) to @AGEDATE, @FILEDATE
+;                    and @MAKEDATE.
+;
+;   2008-9-8   LIG   Changes for build 178 (7.78):
+;                    Removed text for 55 ms DELAY resolution limit, updated
+;                    maximum allowed delay and added default value.
+;                    Added details for TIMER smallest and largest interval,
+;                    documented its already existing OFF option and added /Q
+;                    Added _TSC and _CPUSPEED.
+;
+;   2008-9-11  LIG   Changes for build 179 (7.79):
+;                    Added _BATCHTYPE, _BDEBUGGER, _CMDSPEC, _V86 variables.
+;                    Added @QUOTE and @UNQUOTE functions.
+;                    Marked all 4DOS-unique variables and functions by '!'.
+;
+;   2008-9-14  LIG   Changes for build 180 (7.80):
+;                    Added _ININAME and _TICK variables.
+;                    Added @COUNT, @ISALNUM, @ISALPHA, @ISASCII, @ISCNTRL,
+;                    @ISDIGIT, @ISPRINT, @ISPUNCT, @ISSPACE and @ISXDIGIT.
+;
+;   2008-9-17  LIG   Changes for build 181 (7.81):
+;                    Added _CDROMS, _DRIVES, _ISOWYEAR and _READY variables.
+;                    Added @DATECONV, @HISTORY, @ISOWYEAR, @SUBST and
+;                    @UNQUOTES functions.
+;
+;   2008-9-19  LIG   Changes for build 182 (7.82):
+;                    Added text that SETDOS /C|E|P accept decimal ASCII code
+;                    Added $A and $K special characters to the PROMPT page.
+;                    Added _HDRIVES variable.
+;                    Added @CEILING, @DRIVETYPE and @FLOOR functions.
+;
+;   2008-9-22  LIG   Changes for build 183 (7.83):
+;                    Added @COMPARE, @LCS and @REVERSE functions.
+;
+;   2008-9-24  LIG   Changes for build 184 (7.84):
+;                    Added format 6 (ISO ordinal date)
+;                    to @AGEDATE, @DATECONV, @FILEDATE and @MAKEDATE.
+;                    Added _ISORDATE and _WINTICKS variables.
+;                    Added @DIRSTACK and @SIMILAR functions.
+;                    Reflected the actual order of lines shown by DIRS.
+;
+;   2008-9-26  LIG   Changes for build 185 (7.85):
+;                    Added ISO ordinal date input
+;                    to Date Formats, DATE, TOUCH and ranges.
+;                    Added _STARTPATH variable.
+;                    Noted that _WINTITLE now works also under W9x/ME.
+;                    Updated the "Keywords" page.
+;
+;   2008-10-6   LIG  Changes for build 186 (7.86):
+;                    Added _DST,_MJD,_STZN,_STZO,_TZN,_TZO,_UNIXTIME,
+;                    _UTCDATE,_UTCDATETIME,_UTCHOUR,_UTCISODATE,_UTCMINUTE,
+;                    _UTCSECOND,_UTCTIME.
+;                    Updated the "Keywords" page.
+;
+;   2008-10-10  LIG  Changes for build 187 (7.87):
+;                    Edited the TZ text to stress the universality and
+;                    importance of this environment variable.
+;                    Removed text on old CPU limitations for TIMER,_WINTICKS
+;                    Added text that TITLEPROMPT works under OS/2 too.
+;                    Added TITLE and moved most TITLEPROMPT text there.
+;                    Updated the "Keywords" page.
+;
+;   2008-10-12  LIG  Changes for build 188 (7.88):
+;                    Added hex input format for SETDOS /C|E|P, @CHAR and
+;                    @FILEWRITEB (others accept it too but it's unusual).
+;                    Added =X hex output format with a leading 0x for @EVAL.
+;                    Added TRANSIENT.
+;                    Updated the "Keywords" page.
+;
+;   2008-10-20  LIG  Changes for build 190 (7.90):
+;                    Added IDLE.
+;                    Updated the errors page.
+;                    Updated the "Keywords" page.
+;
+;   2008-10-27  LIG  Changes for build 191 (7.91):
+;                    Added COUNTRY.
+;                    Updated the "Keywords" page.
+;
+;   2008-10-31  LIG  Changes for build 192 (7.92):
+;                    Updated the KSTACK page for the /U(ninstall) option.
+;                    Updated ALIAS, FUNCTION and SET pages for wildcards.
+;                    Added @FSTYPE, _KEYSTACKED and _VCPI.
+;                    Added VCPI in the glossary.
+;                    Updated the "Keywords" page.
+;
+;   2008-11-7   LIG  Changes for build 193 (7.93):
+;                    Added /E option to BATCOMP.
+;                    Added _FONTPAGE.
+;                    Updated the "Keywords" page.
+;
+;   2008-11-18  LIG  Changes for build 194 (7.94):
+;                    Added notes for a possible crash of _CPUSPEED and _TSC.
+;                    Added a V86 mode description in the glossary.
+;                    Added @DDCSTR, _MACHINE, _NETWORK, _NLSFUNC and _SHARE.
+;                    Updated the "Keywords" page.
+;
+;   2008-11-24  LIG  Changes for build 195 (7.95):
+;                    @DDCSTR: Added a warning about switching to a VESA mode
+;                    Added @CLUSTSIZE and @HDDSIZE functions.
+;                    Added APPEND,_ASSIGN,_DISPLAY,_DRIVER,_EGA,_GRAFTABL,
+;                    _GRAPHICS,_MSCDEX,_PRINT,_SMARTDRV,_TASKMAX and
+;                    _TASKSWITCHER variables.
+;                    Updated the "Keywords" page.
+;
+;   2008-12-1   LIG  Changes for build 196 (7.96):
+;                    Added /M and /S options to REBOOT.
+;                    Added @CODEPAGE and _POWER.
+;                    Added a VESA description in the glossary.
+;                    Updated the "Keywords" page.
+;
+;   2008-12-12  LIG  Changes for build 197 (7.97):
+;                    Replaced the JP Software support forum with the
+;                    comp.os.msdos.4dos newsgroup in the "Unsupported" topic.
+;                    Removed the obsolete 4NT and Take Command descriptions.
+;                    Rewrote the Copyright and Contacting JP Software topics.
+;                    Added NO_SEP environment variable.
+;                    Added _VDS variable.
+;                    Added VDS definition in the glossary.
+;                    Updated the "Keywords" page.
+;
+;   2008-12-19  LIG  Changes for build 198 (7.98):
+;                    Added "svga" to the list of returned values for _VIDEO.
+;                    Added @COM function and _SBDSP variable.
+;                    Updated the "Keywords" page.
+;
+;   2008-12-29  LIG  Changes for build 199 (7.99):
+;                    Updated the _CPU, _NPU, _CPUSPEED and Copyright pages
+;                    (renamed the later to Legal).
+;
+;   2009-2-27  LIG   Changes for build 200 (8.00):
+;                    Added SETERROR.
+;                    Added /N option to ATTRIB.
+;                    Added @ISLOWER and @ISUPPER functions.
+;                    Updated the "Keywords" page.
 ;
 ;---------------------------------------------------------------------------
 !WIDTH 80
@@ -116,7 +259,7 @@
 !TOPIC 1 Table of Contents
 !NOINDEX
 
-Welcome to the 731free 4DOS 7.50 help system.  Please select a topic area:
+Welcome to the 731free 4DOS 8.00 help system.  Please select a topic area:
 
 !NOWRAP
 Using 4DOS                    031Using the Command Line
@@ -150,11 +293,11 @@
                               911ASCII and Key Codes
                               920An Embarrassment of Riches
                               971Glossary
-                              011Copyright and Version
+                              011Legal
 
 !WRAP
 ;;version
-                                                    [2006-04-04 CED -- 7.50]
+                                                 [2009-2-27 CED/LIG -- 8.00]
 ;---------------------------------------------------------------------------
 ; Topic equates for index ---------------------------------------------
 !TOPIC 1001 =31  Cmd Line
@@ -199,36 +342,44 @@
 !INDEX 22
 !TOPIC 1024 =971 Glossary
 !INDEX 24
-!TOPIC 1025 =11  Copyright
+!TOPIC 1025 =11  Legal
 !INDEX 25
 ;---------------------------------------------------------------------------
-!TOPIC 11 Copyright and Version
+!TOPIC 11 Legal
 !NOINDEX
-!INDENT 0
-
-                              4DOS 7.50 HELP
-
-Help Text Copyright 1988 - 2004, JP Software Inc., All Rights Reserved.
-
-Modifications to help text Charles Dye, 2004-2005; JP Software is not
-responsible for any inaccuracies introduced in this variant help file.
-
-Software Copyright 1988 - 2004, Rex Conn and JP Software Inc., All Rights
-Reserved.
+ 旼컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴커
+  Help Text Copyright 1988-2004,  JP Software Inc., Worton, MD, USA      
+  Changes Charles Dye 2004-2006 풧P Software is not responsible for any 
+  & Luchezar Georgiev 2006-2009.  inaccuracies introduced in this text. 
+ 읕컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컨컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴켸
+The help system is based on an extensively modified version of the TPHELP
+unit from TurboPower Software's Turbo Professional 5.2 Turbo Pascal toolkit.
+Portions Copyright 1985-1986, Sunny Hill Software.
+!LINE
+Portions Copyright 1987-1992 TurboPower Software  Aristocrat Leisure Ltd.
+Portions Copyright 1987-1992 Borland Software Corporation.
 
-4DOS and 0204NT are 732JP Software Inc.'s trademarks for its family
-of character-mode command processors.  4DOS and 21Take Command are
-registered trademarks of JP Software Inc. JP Software, jpsoft.com,
-and all JP Software designs and logos are also trademarks of
-JP Software Inc. Other product and company names are trademarks of
-their respective owners.
+Software Copyright 1988-2004 Rex Conn and JP Software Inc.
+!LINE
+Portions Copyright 1983-2002 Watcom International Corporation  Sybase Inc.
+!LINE
+Portions Copyright 1985-1992 Microsoft Corporation.
+!LINE
+Portions Copyright 1991-1992 RSA Data Security Inc.
+!LINE
+Portions Copyright 1995-2004 The Internet Society.
+!LINE
+Portions Copyright 1996-2000 Vladimir Zakharychev.
+!LINE
+Portions Copyright 1991-1995 Mix Software Inc.
+           Updates 2006-2009 Luchezar Georgiev and Jaelani Utomo
 
-Portions Copyright 1987, 1988, TurboPower Software; portions Copyright 1987,
-1989, Borland International.  The help system is based on an extensively
-modified version of the TPHELP unit from TurboPower Software's Turbo
-Professional 5.0 Turbo Pascal toolkit.
-;;version
-                                                    [2006-04-04 CED -- 7.50]
+4DOS and 0204NT are trademarks of 732JP Software Inc. for its family
+of character- mode command processors.  4DOS and 20Take Command are
+registered trademarks of JP Software Inc.  JP Software, jpsoft.com, and all
+JP Software's designs and logos are also trademarks of JP Software Inc.  All
+other trademarked product and company names are the property of their
+respective trademark holders.
 ;---------------------------------------------------------------------------
 !TOPIC 12 The 4DOS Help System
 !NOINDEX
@@ -602,8 +753,8 @@
 
      set doshelp=c:\dos\help.exe
 
-Similarly, you must set the DOSHELP variable to point to HELP.BAT or
-DOSBOOK.EXE for external help under DR DOS 6.0 and later.
+Similarly, you must set the DOSHELP variable to point to DOSBOOK.EXE for
+external help under DR DOS 6.0 and later.
 
 You can not put parameters after the file name; the DOSHELP variable
 must be set to the path and file name only.
@@ -781,196 +932,29 @@
 immediately, even if they have taken effect.  For example, some color
 changes will only appear after a 604CLS command.
 ;---------------------------------------------------------------------------
-!TOPIC 20 4NT
-!NOINDEX
-
-If you've ever been frustrated by the limitations of the standard Windows
-command prompt, then 4NT is the one command line tool you truly need.  By
-adding a wide array of features that Microsoft omitted, 4NT makes the
-command line easy to use, giving you more power and flexibility than you
-ever imagined.  4NT is a powerful alternative to the Windows command
-processor, CMD.EXE -- the brains behind your "C:\>" prompt.  4NT enhances
-most standard Windows commands, and adds a wide variety of new ones designed
-to aid everyone from the new user to the serious batch programmer.
-
-4NT adds features such as shorthand "aliases" for commonly used commands,
-a pop-up directory history window, and the ability to copy, move, delete, or
-list multiple files with a single command.  Simple command-line editing,
-history, and recall eliminate extra keystrokes, and the FFIND command can
-quickly locate files or text within a file anywhere on your system.
-
-Batch file users will be amazed at the power and speed 4NT adds to Windows
-batch files, with an array of sophisticated new batch commands and a powerful
-debugger.
-
-!INDENT 3 0 0 0
-Command Line Features
-
-  Modify and re-execute previous commands with a powerful command line
-editor.
-
-  Copy, delete, and rename groups of files and directories, not just
-individual ones.
-
-  Change the drive and directory in a single command.  Extended Directory
-Searches allow you to change to a directory anywhere on your system by
-entering only part of its name.
-
-  Quickly locate files or text within files anywhere on your system.
-
-  Built-in file viewer includes scrolling, search, and print capabilities.
-
-  Select or exclude files by date, time, size, and/or extended wildcards
-for extraordinary flexibility in file management.
-
-  Redefine commands, create new commands and functions for your regular
-tasks, even assign frequently used commands to a single keystroke.
-
-  Direct access to FTP and HTTP (including SSL) directories and files.
-
-  Offers complete configuration adjustment, either through interactive
-dialogs or on the command line.
-
-  File descriptions up to 511 characters long provide information that
-can't fit in a filename.
-
-Batch File Features
-
-  Batch debugger with singlestepping, breakpoints, syntax coloring,
-bookmarks, popup variable windows, and editing.
-
-  Improved batch language includes subroutines, IF/THEN/ELSE logic, SWITCH,
-exception handling, and more than 120 internal commands.
-
-  High-speed batch files run faster than under CMD.EXE.
-
-  Full-loop control, error handling, and single-step operation for
-debugging.
-
-  Box and line drawing capabilities and colorized text displays simplify
-creation of menus and screens.
-
-  More than 90 built-in variables include system configuration, device
-status, network drive detection, and free memory and disk space.
-
-  More than 150 variable functions assist with manipulation and display of
-strings, characters, numbers, date and time, file names, etc.
-
-!INDENT 0
-Visit http://jpsoft.com/4ntdes.htm for up-to-date features, system
-requirements, and pricing and ordering information.
-
-;---------------------------------------------------------------------------
-!TOPIC 21 Take Command
+!TOPIC 20 4NT and Take Command
 !NOINDEX
 
-Take Command offers a new approach to working in Windows, an approach that
-brings users the "best of both worlds."  It is a powerful command line
-utility -- fully integrated into the Windows graphical environment.
-
-Most Windows graphical applications offer limited command-line capability
-at best, and most command-line utilities aren't designed for a graphical
-environment such as Windows.  Those limitations force users to move back and
-forth between graphical utilities and the character-mode command line.  By
-combining our advanced command-line technology with the look and feel of
-Windows, Take Command makes Windows easier and more productive than ever
-before.
-
-Take Command supports all the same commands and features available in
-0204NT -- command line editing, aliases for frequently used commands, new
-commands and options, batch file enhancements, and more -- all in a fully
-graphical application with a standard Windows GUI interface.
-
-But that's not all.  We've also added dozens of features feasible only in a
-graphical environment like pull-down menus, dialogs, application control,
-and cut and paste support.  If you're tired of having to choose between the
-power of the command line and the graphical interface, Take Command is the
-perfect solution.
-
-!INDENT 3 0 0 0
-Command Line Features
-
-  Modify and re-execute previous commands with a powerful command line
-editor.
-
-  Copy, delete, and rename groups of files and directories, not just
-individual ones.
-
-  Change the drive and directory in a single command.  Extended Directory
-Searches allow you to change to a directory anywhere on your system by
-entering only part of its name.
-
-  Quickly locate files or text within files anywhere on your system.
-
-  Built-in file viewer includes scrolling, search, and print capabilities.
-
-  Select or exclude files by date, time, size, and/or extended wildcards
-for extraordinary flexibility in file management.
-
-  Redefine commands, create new commands and functions for your regular
-tasks, even assign frequently used commands to a single keystroke.
-
-  Direct access to FTP and HTTP (including SSL) directories and files.
-
-  Offers complete configuration adjustment, either through interactive
-dialogs or on the command line.
-
-  File descriptions up to 511 characters long provide information that
-can't fit in a filename.
-
-Batch File Features
-
-  Batch debugger with singlestepping, breakpoints, syntax coloring,
-bookmarks, popup variable windows, and editing.
-
-  Improved batch language includes subroutines, IF/THEN/ELSE logic, SWITCH,
-exception handling, and more than 120 internal commands.
-
-  Batch files run faster than under CMD.EXE.
-
-  Full-loop control and error handling.
-
-  Box and line drawing capabilities and colorized text displays simplify
-creation of menus and screens.
-
-  More than 90 built-in variables include system configuration, device
-status, network drive detection, and free memory and disk space.
-
-  More than 150 variable functions assist with manipulation and display of
-strings, characters, numbers, date and time, file names, etc.
-
-Windows Features
-
-  Start graphical and character-mode applications with ease -- even run
-simple console utilities right in the Take Command window.
-
-  Built-in scrollback buffer lets you review output from past commands at
-any time.
-
-  Customizable toolbar gives you quick access to frequently used commands
-and applications.
-
-  Find File dialog lets you search quickly for files or text, anywhere on
-your system -- or search from the command line with the new FFIND command.
-
-  Dialogs, accessible from the Options and Utilities menus, for editing
-environment variables, aliases, file descriptions, and startup parameters.
+4NT is the old name (before version 9) of the Take Command Console (TCC),
+a powerful alternative to the 25Windows NT line command processor
+(CMD.EXE) that enhances most of its standard commands and adds a wide
+variety of new ones.
 
-  New commands such as ACTIVATE, MSGBOX, and QUERYBOX that allow you to
-use GUI features and control GUI applications from your batch files.
-
-!INDENT 0
-Visit http://jpsoft.com/tcmddes.htm for up-to-date features, system
-requirements, and pricing and ordering information.
+Take Command offers a new approach to working in Windows that brings users
+the "best of both worlds."  It is a powerful command line utility, fully
+integrated into the Windows graphical environment.
 
+Visit http://jpsoft.com for up-to-date features, system requirements and
+pricing and ordering information.
 ;---------------------------------------------------------------------------
 !TOPIC 25 The Windows NT Line
 !NOINDEX
 
-Microsoft's Windows NT line includes Windows NT, Windows 2000, Windows XP,
-and Server 2003.  Unlike Windows 98, Windows Me, and earlier versions of
-Windows, these operating systems do not contain an underlying MS-DOS layer;
-they instead include a DOS emulation system which is loaded as needed.
+Microsoft's Windows NT line includes Windows NT, 2000, XP, Server 2003,
+Vista, Server 2008 and 7.  Unlike Windows ME, 98, 95 and earlier Windows
+versions, these operating systems do not contain or require an underlying
+MS-DOS layer; they instead include a DOS emulation system which is loaded as
+needed.
 
 4DOS is a DOS-based program; it was not designed for Windows NT.  It can be
 run under the NT line, but with some limitations.  Files and directories with
@@ -981,7 +965,7 @@
 files, Windows file associations, graphical controls, or true pipes.  4DOS
 is also unable to access the clipboard under Windows NT.
 
-0204NT and 021Take Command are the preferred command shells for Windows
+0204NT and Take Command are the preferred command shells for Windows
 NT.  They were designed for these systems, and do not suffer from the
 DOS-imposed limitations of 4DOS.
 ;---------------------------------------------------------------------------
@@ -1668,9 +1652,9 @@
 If you don't like using the default command separator, you can pick another
 character using the 664SETDOS /C command or the 418CommandSep
 directive in 4DOS.INI.  If you plan to share aliases or batch files between
-4DOS and 0204NT or 021Take Command, see
-054Special Character Compatibility for details about choosing compatible
-command separators for two or more products.
+4DOS and 0204NT or Take Command, see 054Special Character Compatibility
+for details about choosing compatible command separators for two or more
+products.
 ;---------------------------------------------------------------------------
 !TOPIC 42 Expanding and Disabling Aliases
 !NOINDEX
@@ -2376,7 +2360,7 @@
 
      4DOS                       ^                        &
 
-     4NT, Take Command          &            ^            $
+     4OS2, 4NT, Take Command    &            ^            $
 
 (The up-arrow [] represents the ASCII Ctrl-X character, numeric value 24.)
 
@@ -2969,8 +2953,9 @@
 
 Either or both values in a size range can end with "k" to indicate
 thousands of bytes, "K" to indicate kilobytes (1,024 bytes), "m" to
-indicate millions of bytes, or "M" to indicate megabytes
-(1,048,576 bytes).  For example, the range above could be rewritten as
+indicate millions of bytes, "M" to indicate megabytes (1,048,576 bytes),
+"g" to indicate billions of bytes or "G" to indicate gigabytes
+(1,073,741,824 bytes).  For example, the range above could be rewritten as
 /[s10k,20k].
 
 The second argument of a size range is optional.  If you use a single
@@ -3005,8 +2990,13 @@
 to /[d12-31-1999,1-1-2000], and selects files modified on
 December 31, 1999 or January 1, 2000.
 
-If an argument begins with a four digit year greater than 1900, it's
-assumed to be a date in the ISO 8601 international format (yyyy-mm-dd).
+If an argument begins with a four digit year greater than 1900, it's assumed
+to be a date in the ISO 8601 international format (yyyy-mm-dd).  If the
+date contains the letter "W", it is assumed to be in the ISO 8601 week date
+format yyyy-Www-d, where yyyy = year, ww = week, d = week day.  If the
+date is entered as two numbers in the format yyyy-ddd, it is assumed to be
+in the ISO 8601 ordinal date format, where yyyy = year, ddd = day of the
+year.
 
 The time for the starting date defaults to 00:00:00 and the time for the
 ending date defaults to 23:59:59.  You can alter these defaults, if you
@@ -3844,10 +3834,11 @@
 (see the 633IF and 634IFF commands).
 
 For compatibility with CMD.EXE, you may also use %* to refer to the entire
-command tail; %* is equivalent to %&.  You cannot, however, specify a
-number between the percent sign and the asterisk.  %4* represents the
-fourth word in the command tail (%4) followed by a literal asterisk (*),
-but %4& represents the fourth and all following arguments.
+command tail; %* is mostly equivalent to %&.  You cannot, however,
+specify a number between the percent sign and the asterisk.  %4* represents
+the fourth word in the command tail (%4) followed by a literal asterisk
+(*), but %4& represents the fourth and all following arguments.  Unlike
+%&, the %* parameter is not affected by the 666SHIFT command.
 
 Batch files can also use 131environment variables, 161internal
 variables, and 241variable functions.
@@ -4069,7 +4060,7 @@
      if 01 == 1.0 echo Running in 4DOS, 4NT or Take Command!
 
 This syntax is legal in COMMAND.COM and all compatible shells, including
-4DOS, 0204NT, 021Take Command, and CMD.EXE.  In JP Software shells,
+4DOS, 0204NT, Take Command, and CMD.EXE.  In JP Software shells,
 this is a numeric comparison and true; in COMMAND.COM and CMD.EXE, it is
 a string comparison and false.
 
@@ -4472,7 +4463,7 @@
 
 The syntax for the batch compression program is
 
-     BATCOMP [/K /O /Q] InputFile [OutputFile]
+     BATCOMP [/Ekkkk /K /O /Q] InputFile [OutputFile]
 
 For example, to compress MYBATCH.BAT and save the result as MYBATCH.BTM:
 
@@ -4512,8 +4503,8 @@
 the compressed file).
 
 BATCOMP and its 32-bit cousin, BATCOM32 (distributed with some versions of
-0204NT and 021Take Command), are character-mode applications designed
-to run in the environments where our command processors run.  A batch file
+0204NT and Take Command), are character-mode applications designed to
+run in the environments where our command processors run.  A batch file
 compressed with any copy of BATCOMP or BATCOM32 can be used with any
 current JP Software command processor (subject to 4DOS's 64K .BTM file
 size limit).
@@ -4733,18 +4724,19 @@
         145DOSHELP           Path to external DOS help system
         137FILECOMPLETION    Filename completion customization
         147LOGINNAME         User login name
+        823NO_SEP            Removes the thousands separators from numbers
         138PATH              Executable file search path
         143PATHEXT           Extensions to search for in the PATH
         139PROMPT            Command prompt
         140TEMP              Directory for temporary files
         141TEMP4DOS          Directory for temporary files
-        146TITLEPROMPT       Title bar prompt (Windows 95/98/ME only)
+        146TITLEPROMPT       Title bar prompt (Windows 95/98/ME and OS/2 only)
         142TMP               Directory for temporary files
+        759TZ                Time zone information
 ;        TMPDIR
 ;        TEMPDIR
 ;        OPTKEYS
 ;        OPTHELP
-;        NO_SEP
 
 4DOS also supports two special types of variables, which are documented
 separately:
@@ -4947,6 +4939,28 @@
 selected commands.  See 037Customizing Filename Completion for a complete
 description of the format of this variable.
 ;---------------------------------------------------------------------------
+!TOPIC 823 NO_SEP
+!NOINDEX
+!TTY
+
+NO_SEP removes the thousands separators from numbers shown or returned by
+the 4DOS commands and functions.  The exact value to which NO_SEP is set
+does not matter (e.g. "SET NO_SEP=1").  Type "SET NO_SEP=" or "UNSET NO_SEP"
+to turn thousands separators back on.
+
+NO_SEP affects also the following external commands of PC DOS 6.3 or newer
+versions (see your 65535PC DOS documentation for more information on them):
+
+     CHKDSK
+     FORMAT
+     MEM
+
+NO_SEP also affects the FDISK utility of DR-DOS 8.0, which however uses
+its value as the thousands separator.  For example, to set the thousands
+separator to a dot (.) there, type
+
+     c:\> set no_sep=.
+;---------------------------------------------------------------------------
 !TOPIC 138 PATH
 !NOINDEX
 
@@ -5023,15 +5037,9 @@
 !NOINDEX
 !TTY
 
-TITLEPROMPT specifies a string which PROMPT will use to build a prompt
-in the title bar, if 4DOS is running in Windows 95/98/ME.  Note that 4DOS is
-limited to a maximum of 79 characters in the title bar.
-
-Most of the features available in PROMPT may also be used in TITLEPROMPT,
-including the $ sequences, 131environment variables, 161internal
-variables, and 241variable functions; see 652PROMPT for
-details.  (ANSI sequences and other console-control functions will not do
-anything useful in the title bar, however.)
+TITLEPROMPT specifies a string which 652PROMPT will use to build a prompt
+in the title bar, if 4DOS is running in Windows 95/98/ME or under OS/2.  It
+can be set ot changed using the 768TITLE command.
 ;---------------------------------------------------------------------------
 !TOPIC 147 LOGINNAME
 !NOINDEX
@@ -5043,6 +5051,129 @@
 and DR-DOS 7.02 and above, and is convenient to use in conjunction with
 network software, in particular Novell NetWare.
 ;---------------------------------------------------------------------------
+!TOPIC 759 TZ
+!NOINDEX
+!TTY
+
+TZ is used to establish the local time zone.  The value of this variable
+affects the following internal variables: 738_DST, 739_MJD, 740_STZN,
+741_STZO, 742_TZN, 743_TZO, 744_UNIXTIME, 745_UTCDATE,
+746_UTCDATETIME, 747_UTCHOUR, 748_UTCISODATE, 749_UTCMINUTE,
+750_UTCSECOND and 760_UTCTIME whose values are relative to the
+Coordinated Universal Time (UTC), formerly known as Greenwich Mean Time
+(GMT).  Note that it will also affect all other programs that rely on it, so
+it is important to set it to a proper value for your local time zone.
+
+The time on the computer should be set to the local time.  Use the 672TIME
+command and the 608DATE command if the time is not automatically maintained
+by the computer hardware.
+
+The TZ environment variable can be set by using the 663SET command.  The
+existing value of the variable can be edited by using the 622ESET command.
+
+The value of the TZ environment variable is defined by ISO/IEC 9945 (a.k.a.
+POSIX or IEEE Std 1003.1).  It should be set as follows (spaces are for
+clarity only):
+
+std offset dst offset , rule
+
+The expanded format is as follows:
+
+stdoffset[dst[offset][,start[/time],end[/time]]]
+
+std, dst
+    three or more letters that are the designation for the standard (std) or
+    summer (dst) time zone.  Only std is required.  If dst is omitted, then
+    summer time does not apply in this locale.  Upper- and lowercase letters
+    are allowed.  Any characters except for a leading colon (:), digits,
+    comma (,), minus (-), plus (+), and ASCII NUL (\0) are allowed.
+
+offset
+    indicates the value one must add to the local time to arrive at
+    Coordinated Universal Time (UTC).  The offset has the form:
+
+    hh[:mm[:ss]]
+
+    The minutes (mm) and seconds (ss) are optional.  The hour (hh) is
+    required and may be a single digit.  The offset following std is
+    required.  If no offset follows dst, summer time is assumed to be one
+    hour ahead of standard time.  One or more digits may be used; the value
+    is always interpreted as a decimal number.  The hour may be between 0
+    and 24, and the minutes (and seconds) - if present - between 0 and 59.
+    If preceded by a "-", the time zone will be east of the Prime Meridian;
+    otherwise it will be west (which may be indicated by an optional
+    preceding "+").
+
+rule
+    indicates when to change to and back from summer time.  The rule has the
+    form:
+
+    date/time,date/time
+
+    where the first date describes when the change from standard to summer
+    time occurs and the second date describes when the change back happens.
+    Each time field describes when, in current local time, the change to
+    the other time is made.
+
+    The format of date may be one of the following:
+
+    Jn
+        The Julian day n (1 <= n <= 365).  Leap days are not counted.  That
+        is, in all years - including leap years - February 28 is day 59 and
+        March 1 is day 60.  It is impossible to explicitly refer to the
+        occasional February 29.
+
+    n
+        The zero-based Julian day (0 <= n <= 365).  Leap years are counted,
+        and it is possible to refer to February 29.
+
+    Mm.n.d
+        The d'th day (0 <= d <= 6) of week n of month m of the year (1 <= n
+        <= 5, 1 <= m <= 12, where week 5 means "the last d day in month m"
+        which may occur in the fourth or fifth week).  Week 1 is the first
+        week in which the d'th day occurs.  Day zero is Sunday.
+
+    The time has the same format as offset except that no leading sign ("+"
+    or "-") is allowed.  The default, if time is omitted, is 02:00:00.
+
+Some examples are:
+
+TZ=EST5EDT
+    Eastern Standard Time is 5 hours earlier than Coordinated Universal Time
+    (UTC).  Standard time and daylight saving time both apply to this
+    locale.  By default, Eastern Daylight Time (EDT) is one hour ahead of
+    standard time (i.e., EDT4).  Since it is not specified, daylight saving
+    time starts on the first Sunday of April at 2:00 A.M.  and ends on the
+    last Sunday of October at 2:00 A.M.  This is the default when the TZ
+    variable is not set.
+
+TZ=EST5EDT4,M4.1.0/02:00:00,M10.5.0/02:00:00
+    This is the full specification for the default when the TZ variable is
+    not set.  Eastern Standard Time is 5 hours earlier than Coordinated
+    Universal Time (UTC).  Standard time and daylight saving time both apply
+    to this locale.  Eastern Daylight Time (EDT) is one hour ahead of
+    standard time.  Daylight saving time starts on the first (1) Sunday (0)
+    of April (4) at 2:00 A.M.  and ends on the last (5) Sunday (0) of
+    October (10) at 2:00 A.M.
+
+TZ=PST8PDT
+    Pacific Standard Time is 8 hours earlier than Coordinated Universal Time
+    (UTC).  Standard time and daylight saving time both apply to this
+    locale.  By default, Pacific Daylight Time is one hour ahead of standard
+    time (i.e., PDT7).  Since it is not specified, daylight saving time
+    starts on the first Sunday of April at 2:00 A.M.  and ends on the last
+    Sunday of October at 2:00 A.M.
+
+TZ=NST3:30NDT1:30
+    Newfoundland Standard Time is 3 and 1/2 hours earlier than Coordinated
+    Universal Time (UTC).  Standard time and daylight saving time both apply
+    to this locale.  Newfoundland Daylight Time is 1 and 1/2 hours earlier
+    than Coordinated Universal Time (UTC).
+
+TZ=Central Europe Time-2:00
+    Central European Time is 2 hours later than Coordinated Universal Time
+    (UTC).  Daylight saving time does not apply in this locale.
+;---------------------------------------------------------------------------
 !TOPIC 161 Internal Variables
 !NOINDEX
 
@@ -5069,53 +5200,108 @@
 more comprehensive set of examples see the EXAMPLES.BTM file which came
 with 4DOS.
 
+Note: The variables marked with an exclamation mark [!] are 4DOS-specific;
+they are either not present in 0204NT, or their equivalents there have
+different names.  Take this into account when writing portable batch files.
+
 The variables are grouped by category (or see 239Internal
 Variables by Name):
 
 Hardware status
 
-        170_APMAC        * APM AC line status (on, off, or unknown)
-        171_APMBATT      * APM battery status
-        172_APMLIFE      * APM battery life (0 - 100% or unknown)
-        184_CPU          * CPU type (86, 186, 200, 286, 386, 486, 586, 686)
+        231_ALT            Alt key depressed (0 or 1)
+        170_APMAC       !* APM AC line status (on, off, or unknown)
+        171_APMBATT     !* APM battery status
+        172_APMLIFE     !* APM battery life (0 - 100% or unknown)
+        232_CAPSLOCK       CapsLock on (0 or 1)
+        184_CPU          * CPU brand and model
+        479_CPUSPEED     ! CPU speed in MHz (586 or newer)
+        233_CTRL           Ctrl key depressed (0 or 1)
         204_KBHIT          Keystroke waiting in buffer (0 or 1)
-        209_MONITOR        Monitor type (mono or color)
-        212_NDP          * Coprocessor type (0, 87, 287, 387)
-        221_VIDEO          Video board type (mono, cga, ega, or vga)
+        361_LALT           Left Alt key depressed (0 or 1)
+        362_LCTRL          Left Ctrl key depressed (0 or 1)
+        234_LSHIFT         Left Shift key depressed (0 or 1)
+        209_MONITOR      ! Monitor type (mono or color)
+        212_NDP          ! Coprocessor brand and model
+        235_NUMLOCK        NumLock on (0 or 1)
+        363_RALT           Right Alt key depressed (0 or 1)
+        364_RCTRL          Right Ctrl key depressed (0 or 1)
+        236_RSHIFT         Right Shift key depressed (0 or 1)
+        825_SBDSP       !* Sound Blaster DSP version number
+        237_SCROLLLOCK     ScrollLock on (0 or 1)
+        238_SHIFT          Shift key depressed (0 or 1)
+        453_SYSREQ       ! SysReq key depressed (0 or 1)
+        480_TSC         !* Time Stamp Counter (586 or newer)
+        505_V86          ! CPU is in V86 mode (386 or newer, 0 or 1)
+        221_VIDEO        ! Video board type (mono, cga, ega, vga or svga)
 
 Operating system and software status
 
         169_ANSI         * ANSI driver flag (0 or 1)
+        787_APPEND       ! APPEND loaded flag (0 or 1)
+        788_ASSIGN       ! ASSIGN loaded flag (0, 1 or -1)
         177_BOOT           Boot drive letter, without a colon
         180_CODEPAGE       Current code page number
         183_COUNTRY        Current country code
-        193_DOS          * Operating system (DOS, OS2, etc.)
+        807_DISPLAY      ! DISPLAY.SYS loaded flag (0 or 1)
+        193_DOS          * Operating system (DOS, OS/2, etc.)
         194_DOSVER       * Operating system version (5.00, 6.00, 7.00, etc.)
-        198_DPMI           DPMI version number
-        199_DV             DESQview loaded flag (0 or 1)
-        211_MOUSE          Mouse driver loaded flag (0 or 1)
-        222_WIN          * Microsoft Windows mode
+        198_DPMI         ! DPMI version number
+        789_DRIVER       ! DRIVER.SYS present flag (0, 1 or -1)
+        199_DV           ! DESQview loaded flag (0 or 1)
+        790_EGA          ! EGA.SYS loaded flag (0, 1 or -1)
+        780_FONTPAGE     ! Current font page number (Arabic/Hebrew only)
+        800_GRAFTABL     ! GRAFTABL loaded flag (0, 1 or -1)
+        806_GRAPHICS     ! GRAPHICS loaded flag (0 or 1)
+        782_MACHINE      ! Machine name in network
+        211_MOUSE        ! Mouse driver loaded flag (0 or 1)
+        801_MSCDEX       ! MSCDEX/SHSUCDX loaded flag (0, 1 or -1)
+        783_NETWORK     !* Installed network components flag byte
+        784_NLSFUNC      ! NLSFUNC loaded flag (0, 1 or -1)
+        820_POWER        ! POWER.EXE loaded flag (0 or 1)
+        802_PRINT        ! PRINT loaded flag (0, 1 or -1)
+        785_SHARE        ! SHARE loaded flag (0, 1 or -1)
+        803_SMARTDRV     ! SMARTDRV loaded flag (0 or 1)
+        804_TASKMAX      ! TASKMAX/TASKMGR loaded flag (0 or 1)
+        805_TASKSWITCHER ! DOSSHELL Task Switcher loaded flag (0 or 1)
+        778_VCPI         ! VCPI version number
+        824_VDS          ! VDS version number
+        222_WIN         !* Microsoft Windows mode
 
 4DOS status
 
         167_4VER           4DOS version (7.50, 7.51, etc.)
-        168_ALIAS          Free alias space in bytes
+        168_ALIAS        ! Free alias space in bytes
         173_BATCH          Batch nesting level
         174_BATCHLINE      Current line number in current batch file
         175_BATCHNAME      Name of current batch file
+        500_BATCHTYPE      Type of current batch file
+        501_BDEBUGGER      Batch debugger active (0 or 1)
         227_BUILD          4DOS build number
         228_CMDLINE        Contents of the command line
         225_CMDPROC        Command processor name
+        502_CMDSPEC        Full pathname of command processor
         192_DNAME          Name of file used to store file descriptions
         229_ECHO           Echo state (0 or 1)
-        200_ENV            Free environment space in bytes
+        404_EDITMODE       Current line editing mode (0 or 1)
+        200_ENV          ! Free environment space in bytes
+        405_EXPANSION      Current expansion mode (SETDOS /X)
         202_HLOGFILE       Current history log file name
-        205_KSTACK         KSTACK.COM load status (0 or 1)
+        506_ININAME        Full pathname of the current INI file
+        779_KEYSTACKED   ! Number of keystrokes in the KSTACK.COM buffer
+        205_KSTACK       ! KSTACK.COM load status (0 or 1)
         207_LOGFILE        Current log file name
         216_SHELL          Shell level (0, 1, 2, ...)
-        217_SWAPPING     * Swapping state (XMS, EMS, Disk, None, or off)
+        737_STARTPATH      Startup directory of current shell
+        366_STDERR         Standard error not redirected flag (0 or 1)
+        367_STDIN          Standard input not redirected flag (0 or 1)
+        368_STDOUT         Standard output not redirected flag (0 or 1)
+        217_SWAPPING    !* Swapping state (XMS, EMS, Disk, None, or off)
         220_TRANSIENT    * Transient shell flag (0 or 1)
-        223_WINTITLE     * OS/2 DOS session window title
+        831_VERMAJOR       4DOS major version
+        832_VERMINOR       4DOS minor version
+        833_VERSION        4DOS version in major.minor format
+        223_WINTITLE     * OS/2 or Windows 95/98/ME DOS session window title
 
 Screen, color, and cursor
 
@@ -5130,34 +5316,63 @@
 
 Drives and directories
 
+        589_CDROMS         List of CD and DVD drives
         185_CWD            Current drive and directory (d:\path)
         186_CWDS           Current drive and directory with \ (d:\path\)
         187_CWP            Current directory (\path)
         188_CWPS           Current directory with \ (\path\)
         191_DISK           Current drive (C, D, etc.)
+        590_DRIVES         List of all available drives
+        724_HDRIVES        List of all hard (fixed) drives
+        830_LASTDIR        Previous directory (from directory history)
         206_LASTDISK       Last possible drive (E, F, etc.)
+        716_READY          List of ready (accessible) drives
 
 Dates and times
 
         189_DATE         * Current date (mm-dd-yy)
+        370_DATETIME     * Current date and time (yyyyMMddhhmmss)
         190_DAY            Day of the month (1 - 31)
         195_DOW            Day of the week (Mon, Tue, Wed, etc.)
         226_DOWF           Day of the week (Monday, Tuesday, etc.)
         196_DOWI           Numeric day of the week (Sun = 1, etc.)
         197_DOY            Day of the year (1 - 366)
+        738_DST            Daylight saving time (0 or 1)
         203_HOUR           Hour (0 - 23)
         230_ISODATE        Current date (yyyy-mm-dd)
+        454_ISODOWI      ! Numeric day of the week (Mon = 1, etc.)
+        736_ISORDATE     ! Current ISO 8601 ordinal date (yyyy-ddd)
+        460_ISOWDATE     ! Current ISO 8601 week date (yyyy-Www-d)
+        455_ISOWEEK      ! Week of the year pursuant to ISO 8601
+        591_ISOWYEAR     ! Current ISO 8601 week date year
         208_MINUTE         Minute (0 - 59)
+        739_MJD          ! Modified Julian Day
         210_MONTH          Month of the year (1 - 12)
+        240_MONTHF         Month of the year (January, February, etc.)
         215_SECOND         Second (0 - 59)
+        740_STZN           Name of time zone for standard time
+        741_STZO           Offset in minutes from UTC for standard time
+        588_TICK         ! BIOS clock tick since midnight
         219_TIME         * Current time (hh:mm:ss)
+        742_TZN            Name of current time zone
+        743_TZO            Offset in minutes from UTC for current time zone
+        744_UNIXTIME     ! Curent Unix time
+        745_UTCDATE        Current UTC date
+        746_UTCDATETIME    Current UTC date and time
+        747_UTCHOUR        Current UTC hour
+        748_UTCISODATE     Current UTC date in ISO format
+        749_UTCMINUTE      Current UTC minute
+        750_UTCSECOND      Current UTC second
+        760_UTCTIME        Current UTC time
+        735_WINTICKS       Milliseconds since midnight or since Windows started
         224_YEAR           Year (1980 - 2099)
 
 Error codes
 
         162?             * Exit code, last external program
-        163??            * Reason for external program termination
+        163??           !* Reason for external program termination
         164_?            * Exit code, last internal command
+        365_EXECSTR      * Last @EXECSTR return code
         218_SYSERR       * Last DOS error
 
 Compatibility
@@ -5303,17 +5518,16 @@
 !NOINDEX
 !TTY
 
-_4VER is the current 4DOS version (for example, "7.50").
+_4VER is the current 4DOS version (for example, "7.51").
 The current decimal character is used to separate the major and minor
 verison numbers (see 421DecimalChar for details).
 
-Note that other JP Software shells, including 0204NT and
-021Take Command, also use _4VER to report their own version
-information.  Version numbers of different shells may be returned
-in a different format, and will not correspond to 4DOS version
-numbers.  For example, at this writing the latest release of 4NT
-returns a version number of "6.01U".  To determine which shell you
-are running use 225_CMDPROC.
+Note that other JP Software shells, including 0204NT and Take Command,
+also use _4VER to report their own version information.  Version numbers of
+different shells may be returned in a different format, and will not
+correspond to 4DOS version numbers.  For example, at this writing the latest
+release of 4NT returns a version number of "6.01U".  To determine which
+shell you are running use 225_CMDPROC.
 ;---------------------------------------------------------------------------
 !TOPIC 168 _ALIAS
 !NOINDEX
@@ -5321,6 +5535,12 @@
 
 _ALIAS contains the free space in the alias list, in bytes.
 ;---------------------------------------------------------------------------
+!TOPIC 231 _ALT
+!NOINDEX
+!TTY
+
+_ALT is "1" if either Alt key is depressed, otherwise it is "0".
+;---------------------------------------------------------------------------
 !TOPIC 169 _ANSI
 !NOINDEX
 !TTY
@@ -5368,6 +5588,19 @@
 (0 - 100 or "unknown").  An empty string is returned if APM is not
 installed.
 ;---------------------------------------------------------------------------
+!TOPIC 787 _APPEND
+!NOINDEX
+!TTY
+
+_APPEND is "1" if APPEND is installed, and "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 788 _ASSIGN
+!NOINDEX
+!TTY
+
+_ASSIGN is "1" if ASSIGN is installed, "0" if not installed and OK to
+install, and "-1" if not installed and not OK to install.
+;---------------------------------------------------------------------------
 !TOPIC 173 _BATCH
 !NOINDEX
 !TTY
@@ -5389,6 +5622,27 @@
 _BATCHNAME is the full path and file name of the current batch file.  It
 is an empty string if no batch file is currently being processed.
 ;---------------------------------------------------------------------------
+!TOPIC 500 _BATCHTYPE
+!NOINDEX
+!TTY
+
+_BATCHTYPE is the file type of the current batch file, as follows:
+
+!NOWRAP
+     Value   Meaning
+     -1      not in a batch file
+      0      normal
+      1      compressed
+      2      encrypted
+!WRAP
+;---------------------------------------------------------------------------
+!TOPIC 501 _BDEBUGGER
+!NOINDEX
+!TTY
+
+_BDEBUGGER is "1" if the batch debugger is actively debugging a file, or
+"0" if it is not.
+;---------------------------------------------------------------------------
 !TOPIC 176 _BG
 !NOINDEX
 !TTY
@@ -5408,6 +5662,19 @@
 
 _BUILD is the current 4DOS build number (for example, "93").
 ;---------------------------------------------------------------------------
+!TOPIC 589 _CDROMS
+!NOINDEX
+!TTY
+
+_CDROMS returns a space-delimited list of the CD and DVD drives on the
+system (for example, "D: E:").
+;---------------------------------------------------------------------------
+!TOPIC 232 _CAPSLOCK
+!NOINDEX
+!TTY
+
+_CAPSLOCK is "1" if the CapsLock key is toggled ON, and "0" otherwise.
+;---------------------------------------------------------------------------
 !TOPIC 178 _CI
 !NOINDEX
 !TTY
@@ -5434,6 +5701,7 @@
      Product                         Returns
 
      4DOS                            "4DOS"
+     4OS2                            "4OS2"
      4NT                             "4NT"
      Take Command                    "TCMD32"
 !WRAP
@@ -5443,6 +5711,12 @@
 command processor.  If you also need to determine the operating system, see
 193_DOS.
 ;---------------------------------------------------------------------------
+!TOPIC 502 _CMDSPEC
+!NOINDEX
+!TTY
+
+_CMDSPEC is the full pathname of the command processor.
+;---------------------------------------------------------------------------
 !TOPIC 179 _CO
 !NOINDEX
 !TTY
@@ -5473,23 +5747,34 @@
 !NOINDEX
 !TTY
 
-_COUNTRY is the current country code.
+_COUNTRY is the current country code (see 776COUNTRY).
 ;---------------------------------------------------------------------------
 !TOPIC 184 _CPU
 !NOINDEX
 !TTY
 
-_CPU is the CPU type:
+_CPU is the CPU brand and model, or its brand string if it supports this
+feature (later Pentium IIIs and compatible or newer CPUs), for example
+
+!NOWRAP
+Mobile Intel(R) Celeron(TM) CPU          800MHz
+Intel(R) Celeron(TM) CPU                1200MHz
+Intel(R) Pentium(R) III CPU family      1400MHz
+Genuine Intel(R) CPU           T2300  @ 1.66GHz
+AMD Sempron(tm) 2200+
+!WRAP
+;---------------------------------------------------------------------------
+!TOPIC 479 _CPUSPEED
+!NOINDEX
+!TTY
+
+_CPUSPEED is the current CPU speed in MHz (may be inaccurate under OS/2).
+;---------------------------------------------------------------------------
+!TOPIC 233 _CTRL
+!NOINDEX
+!TTY
 
-     86    8086 and 8088           386   i386
-     186   80186 and 80188         486   i486
-     200   NEC V20 and V30         586   Pentium
-     286   80286                   686   Pentium Pro, II, or III
-
-Compatible AMD, Cyrix, IBM, IDT, National Semiconductor, NexGen, Rise,
-Transmeta, UMC, or other processors will generally return the value
-corresponding to the Intel processor they most closely replicate, for
-example an AMD K6-2 or K6-III would return 586.
+_CTRL is "1" if either Ctrl key is depressed, and "0" otherwise.
 ;---------------------------------------------------------------------------
 !TOPIC 185 _CWD
 !NOINDEX
@@ -5522,7 +5807,16 @@
 !TTY
 
 _DATE contains the current system date, in the format mm-dd-yy (U.S.),
-dd-mm-yy (Europe), or yy-mm-dd (Japan).
+dd-mm-yy (Europe), or yy-mm-dd (Japan).  The separator character may vary
+depending upon your country information.
+;---------------------------------------------------------------------------
+!TOPIC 370 _DATETIME
+!NOINDEX
+!TTY
+
+_DATETIME contains the current system date and time as 14-characters in
+the format yyyyMMddhhmmss.  The date part is the same as 230_ISODATE
+without separators.
 ;---------------------------------------------------------------------------
 !TOPIC 190 _DAY
 !NOINDEX
@@ -5536,6 +5830,12 @@
 
 _DISK is the current disk drive, without a colon (for example, "C").
 ;---------------------------------------------------------------------------
+!TOPIC 807 _DISPLAY
+!NOINDEX
+!TTY
+
+_DISPLAY is "1" if DISPLAY.SYS is installed, and "0" otherwise.
+;---------------------------------------------------------------------------
 !TOPIC 192 _DNAME
 !NOINDEX
 !TTY
@@ -5553,24 +5853,34 @@
 system, as follows:
 
 !NOWRAP
-                     旼컴컴컴컴쩡컴컴컴컴쩡컴컴컴컴
-                                        Take    
-                      4DOS     4NT      Command 
-     旼컴컴컴컴컴컴컴탠컴컴컴컴탠컴컴컴컴탠컴컴컴컴
-      DOS            DOS                       
-     쳐컴컴컴컴컴컴컴탠컴컴컴컴탠컴컴컴컴탠컴컴컴컴
-      Windows 95     DOS      WIN95C   WIN95   
-     쳐컴컴컴컴컴컴컴탠컴컴컴컴탠컴컴컴컴탠컴컴컴컴
-      Windows 98     DOS      WIN98C   WIN98   
-     쳐컴컴컴컴컴컴컴탠컴컴컴컴탠컴컴컴컴탠컴컴컴컴
-      Windows ME     DOS      WINMEC   WINME   
-     쳐컴컴컴컴컴컴컴탠컴컴컴컴탠컴컴컴컴탠컴컴컴컴
-      Windows NT              NT       WIN32   
-     쳐컴컴컴컴컴컴컴탠컴컴컴컴탠컴컴컴컴탠컴컴컴컴
-      Windows 2000            WIN2K    WIN32   
-     쳐컴컴컴컴컴컴컴탠컴컴컴컴탠컴컴컴컴탠컴컴컴컴
-      Windows XP              WINXP    WIN32   
-     읕컴컴컴컴컴컴컴좔컴컴컴컴좔컴컴컴컴좔컴컴컴컴
+                     旼컴컴컴컴컴컫컴컴컴컴컴쩡컴컴컴컴커
+                                            Take     
+                      4DOS        4NT       Command  
+     旼컴컴컴컴컴컴컴탠컴컴컴컴컴컵컴컴컴컴컴탠컴컴컴컴캑
+      DOS            <DOS name>                     
+     쳐컴컴컴컴컴컴컴탠컴컴컴컴컴컵컴컴컴컴컴탠컴컴컴컴캑
+      OS/2           OS/2                           
+     쳐컴컴컴컴컴컴컴탠컴컴컴컴컴컵컴컴컴컴컴탠컴컴컴컴캑
+      OS/2 Warp      OS/2 Warp                      
+     쳐컴컴컴컴컴컴컴탠컴컴컴컴컴컵컴컴컴컴컴탠컴컴컴컴캑
+      Windows 95    (Win95) DOS  WIN95C    WIN95    
+     쳐컴컴컴컴컴컴컴탠컴컴컴컴컴컵컴컴컴컴컴탠컴컴컴컴캑
+      Windows 98    (Win98) DOS  WIN98C    WIN98    
+     쳐컴컴컴컴컴컴컴탠컴컴컴컴컴컵컴컴컴컴컴탠컴컴컴컴캑
+      Windows ME    (WinME) DOS  WINMEC    WINME    
+     쳐컴컴컴컴컴컴컴탠컴컴컴컴컴컵컴컴컴컴컴탠컴컴컴컴캑
+      Windows NT                 NT        WIN32    
+     쳐컴컴컴컴컴컴컴탠컴컴컴컴컴컵컴컴컴컴컴탠컴컴컴컴캑
+      Windows 2000               WIN2K     WIN2K    
+     쳐컴컴컴컴컴컴컴탠컴컴컴컴컴컵컴컴컴컴컴탠컴컴컴컴캑
+      Windows XP                 WINXP     WINXP    
+     쳐컴컴컴컴컴컴컴탠컴컴컴컴컴컵컴컴컴컴컴탠컴컴컴컴캑
+      Windows 2003               WIN2003   WIN2003  
+     쳐컴컴컴컴컴컴컴탠컴컴컴컴컴컵컴컴컴컴컴탠컴컴컴컴캑
+      Windows Vista              WINVISTA  WINVISTA 
+     쳐컴컴컴컴컴컴컴탠컴컴컴컴컴컵컴컴컴컴컴탠컴컴컴컴캑
+      Windows 2008               WIN2008   WIN2008  
+     읕컴컴컴컴컴컴컴좔컴컴컴컴컴컨컴컴컴컴컴좔컴컴컴컴켸
 
 !WRAP
 
@@ -5579,9 +5889,12 @@
 operating environment or command processor.  If you want the current command
 processor name, use 225_CMDPROC.
 
-Note that 4DOS is intended for use only under DOS and the DOS-based versions
-of Windows.  The _DOS variable will always return the string "DOS" in 4DOS,
-even in non-DOS-based environments like OS/2 or the 025Windows NT line.
+If the DOS variant can be detected by 4DOS, the _DOS variable will be set to
+its brand name. Otherwise, it will be set to "DOS".
+
+Note that 4DOS is intended for use under DOS and the DOS-based versions of
+Windows only.  In 4DOS, the _DOS variable will return the string "MS-DOS" in
+the non-DOS-based environment of the 025Windows NT line.
 ;---------------------------------------------------------------------------
 !TOPIC 194 _DOSVER
 !NOINDEX
@@ -5607,7 +5920,7 @@
 DOS vendors today, _DOSVER alone may not be sufficient to distinguish
 between all of them in multi-platform batch files.  (For example, although
 these systems all report a value of 7.00 or 7.10, there are some major
-differences between MS-DOS 7.0 and above (as found in the Windows 95/98
+differences between MS-DOS 7.00 and above (as found in the Windows 95/98
 bundle), PC DOS 7.0 and above, and DR-DOS 7.04 and above.)
 
 The current decimal character is used to separate the major and minor
@@ -5647,6 +5960,27 @@
 _DPMI returns the DPMI version level (e.g. 0.90 or 1.00), or "0" if
 DPMI isn't present.
 ;---------------------------------------------------------------------------
+!TOPIC 789 _DRIVER
+!NOINDEX
+!TTY
+
+_DRIVER is "1" if DRIVER.SYS is present, "0" if not present and OK to
+install, and "-1" if not present and not OK to install.
+;---------------------------------------------------------------------------
+!TOPIC 590 _DRIVES
+!NOINDEX
+!TTY
+
+_DRIVES returns a space-delimited list of the existing drives on the system
+(for example, "A: C: D: E:").
+;---------------------------------------------------------------------------
+!TOPIC 738 _DST
+!NOINDEX
+!TTY
+
+_DST is "1" if daylight saving time (a.k.a. "summer time") is in effect,
+or "0" otherwise.  See 759TZ for more information.
+;---------------------------------------------------------------------------
 !TOPIC 199 _DV
 !NOINDEX
 !TTY
@@ -5660,12 +5994,40 @@
 _ECHO is the current echo state.  There are two echo states, one for
 the command line and one for batch files.
 ;---------------------------------------------------------------------------
+!TOPIC 404 _EDITMODE
+!NOINDEX
+!TTY
+
+_EDITMODE is "0" if the line editor is in overstrike mode, or "1" if it is
+in insert mode.
+;---------------------------------------------------------------------------
+!TOPIC 790 _EGA
+!NOINDEX
+!TTY
+
+_EGA is "1" if EGA.SYS is installed, "0" if not installed and OK to install,
+and "-1" if not installed and not OK to install.
+;---------------------------------------------------------------------------
 !TOPIC 200 _ENV
 !NOINDEX
 !TTY
 
 _ENV is the free space in the environment, in bytes.
 ;---------------------------------------------------------------------------
+!TOPIC 365 _EXECSTR
+!NOINDEX
+!TTY
+
+_EXECSTR is the integer return code of the last 265@EXECSTR function.
+;---------------------------------------------------------------------------
+!TOPIC 405 _EXPANSION
+!NOINDEX
+!TTY
+
+_EXPANSION is the current expansion mode (i.e. 664SETDOS /X). It is "0"
+if everything is enabled, or a string of up to 9 digits for the disabled
+modes, e.g. "46" if nested variable expansion and redirection are disabled.
+;---------------------------------------------------------------------------
 !TOPIC 201 _FG
 !NOINDEX
 !TTY
@@ -5673,6 +6035,33 @@
 _FG is a string containing the first three letters of the screen
 foreground color at the current cursor position (for example, "Whi").
 ;---------------------------------------------------------------------------
+!TOPIC 780 _FONTPAGE
+!NOINDEX
+!TTY
+
+_FONTPAGE is the current font page number.  Nonzero is returned only if
+Arabic or Hebrew DOS support is loaded.
+;---------------------------------------------------------------------------
+!TOPIC 800 _GRAFTABL
+!NOINDEX
+!TTY
+
+_GRAFTABL is "1" if GRAFTABL is installed, "0" if not installed and OK to
+install, and "-1" if not installed and not OK to install.
+;---------------------------------------------------------------------------
+!TOPIC 806 _GRAPHICS
+!NOINDEX
+!TTY
+
+_GRAPHICS is "1" if GRAPHICS is installed, and "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 724 _HDRIVES
+!NOINDEX
+!TTY
+
+_HDRIVES returns a space-delimited list of the hard (fixed) drives on the
+system (for example, "C: D:").
+;---------------------------------------------------------------------------
 !TOPIC 202 _HLOGFILE
 !NOINDEX
 !TTY
@@ -5686,6 +6075,13 @@
 
 _HOUR is the current hour (0 - 23).
 ;---------------------------------------------------------------------------
+!TOPIC 506 _ININAME
+!NOINDEX
+!TTY
+
+_ININAME returns the full pathname of the INI file used by the current
+shell.
+;---------------------------------------------------------------------------
 !TOPIC 230 _ISODATE
 !NOINDEX
 !TTY
@@ -5693,92 +6089,341 @@
 _ISODATE returns the current date in ISO 8601 international format
 (yyyy-mm-dd).
 ;---------------------------------------------------------------------------
-!TOPIC 204 _KBHIT
+!TOPIC 454 _ISODOWI
 !NOINDEX
 !TTY
 
-_KBHIT returns "1" if one or more keystrokes are waiting in the keyboard
-buffer, or "0" if the keyboard buffer is empty.
+_ISODOWI is the current day of the week as an integer (1 = Monday,
+2 = Tuesday, ... , 6 = Saturday, 7 = Sunday), pursuant to ISO 8601.
 ;---------------------------------------------------------------------------
-!TOPIC 205 _KSTACK
+!TOPIC 736 _ISORDATE
 !NOINDEX
 !TTY
 
-_KSTACK returns "1" if KSTACK.COM is loaded or "0" otherwise.
+_ISORDATE returns the current ordinal date in ISO 8601 international format
+(yyyy-ddd where ddd is the day of the year, 1 to 366).
 ;---------------------------------------------------------------------------
-!TOPIC 206 _LASTDISK
+!TOPIC 460 _ISOWDATE
 !NOINDEX
 !TTY
 
-_LASTDISK is the last valid drive letter, without a colon.
+_ISOWDATE returns the current week date in ISO 8601 international format
+(yyyy-Www-d where ww is the week and d is the week day).  It is possible
+that the year is one less or more than the current year because some partial
+weeks at the beginning or the end of the year may belong to the last or next
+year, according to ISO 8601.
 ;---------------------------------------------------------------------------
-!TOPIC 207 _LOGFILE
+!TOPIC 455 _ISOWEEK
 !NOINDEX
 !TTY
 
-_LOGFILE returns the name of the current log file (or an empty string
-if 643LOG is OFF).
+_ISOWEEK is the week of the year (1 to 53), pursuant to ISO 8601.  Week 1
+is the one that includes the first Thursday of the year, or equivalently,
+the week which includes 4th of January.  It is possible that a January week
+is 52 or 53, or a December week is 1.  This means that, according to
+ISO 8601, it belongs to the last or the next calendar year, respectively.
 ;---------------------------------------------------------------------------
-!TOPIC 208 _MINUTE
+!TOPIC 591 _ISOWYEAR
 !NOINDEX
 !TTY
 
-_MINUTE is the current minute (0 - 59).
+_ISOWYEAR is the ISO 8601 week date year.  It may not be the calendar
+year but the last or next year.  This means that, according to ISO 8601, the
+week belongs to the last or the next calendar year, respectively.
 ;---------------------------------------------------------------------------
-!TOPIC 209 _MONITOR
+!TOPIC 204 _KBHIT
 !NOINDEX
 !TTY
 
-_MONITOR is the monitor type ("mono" or "color").
+_KBHIT returns "1" if one or more keystrokes are waiting in the keyboard
+buffer, or "0" if the keyboard buffer is empty.
 ;---------------------------------------------------------------------------
-!TOPIC 210 _MONTH
+!TOPIC 779 _KEYSTACKED
 !NOINDEX
 !TTY
 
-_MONTH is the current month of the year (1 to 12).
+_KEYSTACKED returns the number of the keystrokes left in the KSTACK.COM
+buffer.  If KSTACK.COM is not loaded, it returns "0".
 ;---------------------------------------------------------------------------
-!TOPIC 211 _MOUSE
+!TOPIC 205 _KSTACK
 !NOINDEX
 !TTY
 
-_MOUSE is "1" if a mouse driver is loaded, and "0" otherwise.
+_KSTACK returns "1" if KSTACK.COM is loaded or "0" otherwise.
 ;---------------------------------------------------------------------------
-!TOPIC 212 _NDP
+!TOPIC 361 _LALT
 !NOINDEX
 !TTY
 
-_NDP is the coprocessor type:
-
-     0       no coprocessor is installed
-     87      8087
-     287     80287
-     387     80387, 80486DX, 80487, Pentium, Pentium Pro, II, III, etc.
+_LALT is "1" if the Left Alt key is depressed, and "0" otherwise.
 ;---------------------------------------------------------------------------
-!TOPIC 213 _ROW
+!TOPIC 830 _LASTDIR
 !NOINDEX
+!TTY
 
-_ROW is the current cursor row (for example, "0" for the top of the
-screen).
+_LASTDIR is the previous directory (from the directory history).
 ;---------------------------------------------------------------------------
-!TOPIC 214 _ROWS
+!TOPIC 206 _LASTDISK
 !NOINDEX
 !TTY
 
-_ROWS is the current number of screen rows (for example, "25").
+_LASTDISK is the last valid drive letter, without a colon.
 ;---------------------------------------------------------------------------
-!TOPIC 215 _SECOND
+!TOPIC 362 _LCTRL
 !NOINDEX
 !TTY
 
-_SECOND is the current second (0 - 59).
+_LCTRL is "1" if the Left Ctrl key is depressed, and "0" otherwise.
 ;---------------------------------------------------------------------------
-!TOPIC 216 _SHELL
+!TOPIC 207 _LOGFILE
 !NOINDEX
 !TTY
 
-_SHELL is the current shell nesting level.  The primary shell is level
+_LOGFILE returns the name of the current log file (or an empty string
+if 643LOG is OFF).
+;---------------------------------------------------------------------------
+!TOPIC 234 _LSHIFT
+!NOINDEX
+!TTY
+
+_LSHIFT is "1" if the Left Shift key is depressed, and "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 782 _MACHINE
+!NOINDEX
+!TTY
+
+_MACHINE is the machine name in network (up to 16 bytes in length).
+;---------------------------------------------------------------------------
+!TOPIC 208 _MINUTE
+!NOINDEX
+!TTY
+
+_MINUTE is the current minute (0 - 59).
+;---------------------------------------------------------------------------
+!TOPIC 739 _MJD
+!NOINDEX
+!TTY
+
+_MJD is the Modified Julian Day or the fractional number of days elapsed
+since 17 November 1858, 00:00 UTC.  See 759TZ for more information.
+;---------------------------------------------------------------------------
+!TOPIC 209 _MONITOR
+!NOINDEX
+!TTY
+
+_MONITOR is the monitor type ("mono" or "color").
+;---------------------------------------------------------------------------
+!TOPIC 210 _MONTH
+!NOINDEX
+!TTY
+
+_MONTH is the current month of the year (1 to 12).
+;---------------------------------------------------------------------------
+!TOPIC 240 _MONTHF
+!NOINDEX
+!TTY
+
+_MONTHF is the full name of the current month ("January", "February",
+etc.).
+;---------------------------------------------------------------------------
+!TOPIC 211 _MOUSE
+!NOINDEX
+!TTY
+
+_MOUSE is "1" if a mouse driver is loaded, and "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 801 _MSCDEX
+!NOINDEX
+!TTY
+
+_MSCDEX is "1" if MSCDEX or SHSUCDX is installed, "0" if not installed and
+OK to install, and "-1" if not installed and not OK to install.
+;---------------------------------------------------------------------------
+!TOPIC 212 _NDP
+!NOINDEX
+!TTY
+
+_NDP is the numeric coprocessor brand and model ("None" if not installed,
+or "Internal" if it's contained in the CPU).
+;---------------------------------------------------------------------------
+!TOPIC 783 _NETWORK
+!NOINDEX
+!TTY
+
+_NETWORK is a byte of flags reflecting the installed network
+components.  The order of decreasing network functionality in which the
+bits must be tested is:
+
+     bit 6    (64)   Server
+     bit 2     (4)   Messenger
+     bit 7   (128)   Receiver
+     bit 3     (8)   Redirector
+     bit 1     (2)   LANPUP (LANtastic 4.0)
+
+For example, if a network server is installed, "64" (2^6) is returned, and
+if a network redirector is installed, "8" (2^3) is returned.  Combinations
+of these bits are possible.  If "0" is returned, no network components are
+installed.
+;---------------------------------------------------------------------------
+!TOPIC 784 _NLSFUNC
+!NOINDEX
+!TTY
+
+_NLSFUNC is "1" if NLSFUNC is installed, "0" if not installed and OK to
+install, and "-1" if not installed and not OK to install.
+;---------------------------------------------------------------------------
+!TOPIC 235 _NUMLOCK
+!NOINDEX
+!TTY
+
+_NUMLOCK is "1" if the NumLock key is toggled ON, and "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 820 _POWER
+!NOINDEX
+!TTY
+
+_POWER is "1" if POWER.EXE or a compatible power manager is installed, and
+"0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 802 _PRINT
+!NOINDEX
+!TTY
+
+_PRINT is "1" if PRINT is installed, "0" if not installed and OK to
+install, and "-1" if not installed and not OK to install.
+;---------------------------------------------------------------------------
+!TOPIC 363 _RALT
+!NOINDEX
+!TTY
+
+_RALT is "1" if the Right Alt key is depressed, and "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 364 _RCTRL
+!NOINDEX
+!TTY
+
+_RCTRL is "1" if the Right Ctrl key is depressed, and "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 716 _READY
+!NOINDEX
+!TTY
+
+_READY returns a space-delimited list of the the currently ready
+(accessible) drives on the system (for example, "C: D: E:").
+;---------------------------------------------------------------------------
+!TOPIC 213 _ROW
+!NOINDEX
+
+_ROW is the current cursor row (for example, "0" for the top of the
+screen).
+;---------------------------------------------------------------------------
+!TOPIC 214 _ROWS
+!NOINDEX
+!TTY
+
+_ROWS is the current number of screen rows (for example, "25").
+;---------------------------------------------------------------------------
+!TOPIC 236 _RSHIFT
+!NOINDEX
+!TTY
+
+_RSHIFT is "1" if the Right Shift key is depressed, and "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 825 _SBDSP
+!NOINDEX
+!TTY
+
+_SBDSP returns the Sound Blaster DSP (Digital Signal Processor) version
+level (e.g. 4.00), or "0" if no Sound Blaster or compatible sound card is
+present.  The correspondence of the DSP version number to the Sound Blaster
+card model is as follows:
+
+     1.xx to 2.00       Sound Blaster Version 1.5 or earlier
+     2.01+              Sound Blaster Version 2.0
+     3.xx               Sound Blaster Pro
+     4.xx               Sound Blaster 16 [with Advanced Signal Processing]
+;---------------------------------------------------------------------------
+!TOPIC 237 _SCROLLLOCK
+!NOINDEX
+!TTY
+
+_SCROLLLOCK is "1" if the ScrollLock key is toggled ON, and "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 215 _SECOND
+!NOINDEX
+!TTY
+
+_SECOND is the current second (0 - 59).
+;---------------------------------------------------------------------------
+!TOPIC 785 _SHARE
+!NOINDEX
+!TTY
+
+_SHARE is "1" if SHARE is installed, "0" if not installed and OK to
+install, and "-1" if not installed and not OK to install.
+;---------------------------------------------------------------------------
+!TOPIC 216 _SHELL
+!NOINDEX
+!TTY
+
+_SHELL is the current shell nesting level.  The primary shell is level
 "0", and each subsequent secondary shell increments the level by 1.
 ;---------------------------------------------------------------------------
+!TOPIC 238 _SHIFT
+!NOINDEX
+!TTY
+
+_SHIFT is "1" if the either Shift key is depressed, and "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 803 _SMARTDRV
+!NOINDEX
+!TTY
+
+_SMARTDRV is "1" if SMARTDRV or a compatible disk cache is installed, and
+"0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 737 _STARTPATH
+!NOINDEX
+!TTY
+
+_STARTPATH is the startup directory for the current shell (not necessarily
+the same as the location of the executable!).
+;---------------------------------------------------------------------------
+!TOPIC 366 _STDERR
+!NOINDEX
+!TTY
+
+_STDERR is "1" if the standard error points to the console, and "0" if it
+has been redirected.
+;---------------------------------------------------------------------------
+!TOPIC 367 _STDIN
+!NOINDEX
+!TTY
+
+_STDIN is "1" if the standard input points to the console, and "0" if it
+has been redirected.
+;---------------------------------------------------------------------------
+!TOPIC 368 _STDOUT
+!NOINDEX
+!TTY
+
+_STDOUT is "1" if the standard output points to the console, and "0" if it
+has been redirected.
+;---------------------------------------------------------------------------
+!TOPIC 740 _STZN
+!NOINDEX
+!TTY
+
+_STZN is the name of standard time in the current time zone.  See 759TZ
+for more information.
+;---------------------------------------------------------------------------
+!TOPIC 741 _STZO
+!NOINDEX
+!TTY
+
+_STZO is the offset in minutes of UTC from standard time in the current
+time zone.  See 759TZ for more information.
+;---------------------------------------------------------------------------
 !TOPIC 217 _SWAPPING
 !NOINDEX
 !TTY
@@ -5803,45 +6448,45 @@
 system versions; the list below is based on DOS 6.xx and 7.xx.
 
 !NOWRAP
-Code Meaning                             Code Meaning
----- ----------------------------------  ---- ------------------------------
-  1  Bad function                         40  Not ready
-  2  File not found                       41  File allocation table bad
+Code Meaning                            Code Meaning
+---- ---------------------------------- ---- ------------------------------
+  1  Bad function                        40  Device not ready
+  2  File not found                      41  File allocation table bad
   3  Invalid path
-  4  Too many open files                  50  Invalid net request
-  5  Access denied                        51  Remote computer not listening
-  6  Invalid handle                       52  Duplicate name on net
-  7  Memory destroyed                     53  Net name not found
-  8  Out of memory                        54  Net busy
-  9  Bad memory block                     55  Net device no longer exists
- 10  Bad environment                      56  NetBIOS command limit exceeded
- 11  Bad format                           57  Net adapter hardware error
- 12  Invalid access code                  58  Bad response from net
- 13  Invalid data                         59  Unexpected net error
- 14  Internal DOS error / Fixup overflow  60  Incompatible remote adapter
- 15  Invalid drive                        61  Print queue full
- 16  Can't remove current directory       62  Queue not full
- 17  Not same device                      63  No room for print file
- 18  File not found                       64  Net name was deleted
-                                          65  Access denied
- 19  Disk is write protected              66  Net device type incorrect
- 20  Bad disk unit                        67  Net name not found
- 21  Drive not ready--close door          68  Net name limit exceeded
- 22  Bad disk command                     69  NetBIOS session limit exceeded
- 23  Data error (CRC)                     70  Temporarily paused
- 24  Bad call format                      71  Net request not accepted
- 25  Seek error                           72  Redirection is paused
- 26  Non-DOS disk                         73  Software/version not installed
- 27  Sector not found                     74  Adapter close/account expired
- 28  Out of paper                         75  Password expired
- 29  Write error                          76  Login currently not allowed
- 30  Read error                           77  Disk limit exceeded on node
- 31  General failure                      78  Not logged in to a net node
+  4  Too many open files                 50  Invalid net request
+  5  Access denied                       51  Remote computer not listening
+  6  Invalid handle                      52  Duplicate name on net
+  7  Memory destroyed                    53  Net name not found
+  8  Out of memory                       54  Net busy
+  9  Bad memory block                    55  Net device no longer exists
+ 10  Bad environment                     56  NetBIOS command limit exceeded
+ 11  Bad format                          57  Net adapter hardware error
+ 12  Invalid access code                 58  Bad response from net
+ 13  Invalid data                        59  Unexpected net error
+ 14  Internal DOS error / Fixup overflow 60  Incompatible remote adapter
+ 15  Invalid drive                       61  Print queue full
+ 16  Can't remove current directory      62  No room for print file
+ 17  Not same device                     63  Print file was cancelled
+ 18  No more files                       64  Net name was deleted
+                                         65  Access denied
+ 19  Write protect error                 66  Net device type incorrect
+ 20  Invalid unit                        67  Network name not found
+ 21  Not ready                           68  Net name limit exceeded
+ 22  Invalid device request              69  NetBIOS session limit exceeded
+ 23  Data error                          70  Sharing temporarily paused
+ 24  Invalid device request parameters   71  Net request not accepted
+ 25  Seek error                          72  Print or disk redirection paused
+ 26  Invalid media type                  73  Invalid network version
+ 27  Sector not found                    74  Adapter close / Account expired
+ 28  Printer out of paper error          75  Password expired
+ 29  Write fault error                   76  Login currently not allowed
+ 30  Read fault error                    77  Disk limit exceeded on node
+ 31  General failure                     78  Not logged in to a net node
  32  Sharing violation
- 33  Lock violation                       80  File exists
- 34  Invalid disk change                  81  Duplicated FCB
- 35  FCB unavailable                      82  Can't make directory entry
- 36  Sharing buffer overflow              83  Fail on INT 24
+ 33  Lock violation                      80  File exists
+ 34  Invalid disk change                 81  Duplicated FCB
+ 35  FCB unavailable                     82  Can't make directory entry
+ 36  Sharing buffer overflow             83  Fail on INT 24
  37  Code page mismatch
  38  Out of input before end
  39  Out of disk space
@@ -5866,15 +6511,15 @@
 
  95  Interrupted / Invalid system call
 
-100  Open net semaphore limit exceeded /          Unknown CDEX error
-101  Exclusive net semaphore is already owned /   CDEX not ready
-102  Semaphore was set when close attempted /     EMS memory not valid
-103  Too many exclusive semaphore requests /      No High Sierra or ISO 9660
-104  Operation invalid from interrupt handler /   Door open
+100  Open net semaphore limit exceeded / CD-ROM unknown error
+101  Exclusive net semaphore is already owned / CD-ROM not ready
+102  Semaphore was set when close attempted / CD-ROM EMS memory bad
+103  Too many exclusive semaphore requests / CD not High Sierra or ISO-9660
+104  Operation invalid from interrupt handler / CD-ROM door open
 
 105  Semaphore owner died
 106  Semaphore limit exceeded
-107  Insert drive B: disk into A: / disk changed
+107  Insert drive B: disk into A: / Disk changed
 108  Drive locked by another process
 109  Broken pipe
 110  Pipe open/create failed
@@ -5882,7 +6527,7 @@
 112  Disk full
 113  No more search handles
 114  Invalid target handle for dup2
-115  Bad user virtual address / protection violation
+115  Bad user virtual address / Protection violation
 116  VIOKBD request / Error on console I/O
 117  Unknown category code for IOCTL
 118  Invalid value for verify flag
@@ -5987,6 +6632,34 @@
 255  Invalid drive
 !WRAP
 ;---------------------------------------------------------------------------
+!TOPIC 453 _SYSREQ
+!NOINDEX
+!TTY
+
+_SYSREQ is "1" if the SysReq (SysRq) key is depressed, and "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 804 _TASKMAX
+!NOINDEX
+!TTY
+
+_TASKMAX is "1" if the DR DOS TASKMAX or TASKMGR is installed, and "0"
+otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 805 _TASKSWITCHER
+!NOINDEX
+!TTY
+
+_TASKSWITCHER is "1" if the MS-DOS or PC DOS DOSSHELL Task Switcher is
+installed, and "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 588 _TICK
+!NOINDEX
+!TTY
+
+_TICK contains the current BIOS clock tick since midnight.  There are
+approximately 18.2 ticks per second.  The possible values are from 0 to
+1,573,039.
+;---------------------------------------------------------------------------
 !TOPIC 219 _TIME
 !NOINDEX
 !TTY
@@ -6004,11 +6677,134 @@
 See also 109Automatic Batch Files and 817OS/2 Temporary VDMs for
 further uses of the _TRANSIENT internal variable.
 ;---------------------------------------------------------------------------
+!TOPIC 480 _TSC
+!NOINDEX
+!TTY
+
+_TSC is the current value of the Time Stamp Counter (TSC) in the CPU.  For
+486 and older CPUs, a question mark (?) is returned.
+
+Some 586 CPUs crash _TSC in V86 mode, if the RDTSC instruction is not
+emulated by the memory manager like some EMM386 variants; then use one that
+does.
+;---------------------------------------------------------------------------
+!TOPIC 742 _TZN
+!NOINDEX
+!TTY
+
+_TZN is the name of the current time zone.  See 759TZ for more
+information.
+;---------------------------------------------------------------------------
+!TOPIC 743 _TZO
+!NOINDEX
+!TTY
+
+_TZO is the offset in minutes of UTC from the current time zone.  See
+759TZ for more information.
+;---------------------------------------------------------------------------
+!TOPIC 744 _UNIXTIME
+!NOINDEX
+!TTY
+
+_UNIXTIME is the number of seconds elapsed since 1 January 1970, 00:00 UTC
+(the Epoch) as defined by ISO/IEC 9945 (a.k.a. POSIX or IEEE Std 1003.1).
+See 759TZ for more information.
+;---------------------------------------------------------------------------
+!TOPIC 745 _UTCDATE
+!NOINDEX
+!TTY
+
+_UTCDATE is the current UTC date in format mm-dd-yy (U.S.), dd-mm-yy
+(Europe), or yy-mm-dd (Japan).  The separator character may vary depending
+upon your country information.  See 759TZ for more information.
+;---------------------------------------------------------------------------
+!TOPIC 746 _UTCDATETIME
+!NOINDEX
+!TTY
+
+_UTCDATETIME is the current UTC date and time as 14-characters in the
+format yyyyMMddhhmmss.  The date part is the same as 748_UTCISODATE
+without separators.  See 759TZ for more information.
+;---------------------------------------------------------------------------
+!TOPIC 747 _UTCHOUR
+!NOINDEX
+!TTY
+
+_UTCHOUR is the current UTC hour.  See 759TZ for more information.
+;---------------------------------------------------------------------------
+!TOPIC 748 _UTCISODATE
+!NOINDEX
+!TTY
+
+_UTCISODATE is the current UTC date in ISO 8601 international format
+(yyyy-mm-dd).  See 759TZ for more information.
+;---------------------------------------------------------------------------
+!TOPIC 749 _UTCMINUTE
+!NOINDEX
+!TTY
+
+_UTCMINUTE is the current UTC minute.  See 759TZ for more information.
+;---------------------------------------------------------------------------
+!TOPIC 750 _UTCSECOND
+!NOINDEX
+!TTY
+
+_UTCSECOND is the current UTC second.  See 759TZ for more information.
+;---------------------------------------------------------------------------
+!TOPIC 760 _UTCTIME
+!NOINDEX
+!TTY
+
+_UTCTIME is the current UTC time in the format hh:mm:ss.  The separator
+character may vary depending upon your country information.  See 759TZ
+for more information.
+;---------------------------------------------------------------------------
+!TOPIC 505 _V86
+!NOINDEX
+!TTY
+
+_V86 is "1" if the CPU is a 386 or later and is in V86 mode, or "0"
+otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 778 _VCPI
+!NOINDEX
+!TTY
+
+_VCPI returns the VCPI version level (e.g. 1.00), or "0" if VCPI isn't
+present.
+;---------------------------------------------------------------------------
+!TOPIC 824 _VDS
+!NOINDEX
+!TTY
+
+_VDS returns the VDS version level (e.g. 1.00), or "0" if VDS isn't
+present.
+;---------------------------------------------------------------------------
+!TOPIC 831 _VERMAJOR
+!NOINDEX
+!TTY
+
+_VERMAJOR is the current 4DOS major version (for example, "8").
+;---------------------------------------------------------------------------
+!TOPIC 832 _VERMINOR
+!NOINDEX
+!TTY
+
+_VERMINOR is the current 4DOS minor version (for example, "0").
+;---------------------------------------------------------------------------
+!TOPIC 833 _VERSION
+!NOINDEX
+!TTY
+
+_VERSION is the current 4DOS version in major.minor format (for example,
+"8.00").  Unlike _4VER, the dot character (.) and not the current decimal
+character is used to separate the major and minor verison numbers.
+;---------------------------------------------------------------------------
 !TOPIC 221 _VIDEO
 !NOINDEX
 !TTY
 
-_VIDEO is the video card type ("mono", "cga", "ega", or "vga").
+_VIDEO is the video card type ("mono", "cga", "ega", "vga" or "svga").
 ;---------------------------------------------------------------------------
 !TOPIC 222 _WIN
 !NOINDEX
@@ -6030,18 +6826,25 @@
 some reason you must check for the Windows NT line in 4DOS, test the
 194_DOSVER variable for an emulated DOS version of 5.50.
 ;---------------------------------------------------------------------------
-!TOPIC 223 _WINTITLE
+!TOPIC 735 _WINTICKS
 !NOINDEX
 !TTY
 
-_WINTITLE returns the title of the current window.  This variable is
-only valid when 4DOS is running in a DOS session under OS/2.  If you are
-using 4DOS under DOS or DOS plus Windows, the return value is an empty
-string.
+_WINTICKS contains the number of milliseconds since midnight (in DOS), or
+since Windows was started (in Windows).  Note: _WINTICKS is 0 under OS/2.
+;---------------------------------------------------------------------------
+!TOPIC 223 _WINTITLE
+!NOINDEX
+!TTY
 
-_WINTITLE only returns the title when it has been changed from the default
-(starting) value.  If the title has not been changed, _WINTITLE will return
-an empty string.  This is a limitation of OS/2, not a bug in 4DOS.
+_WINTITLE returns the title of the current window.  This variable is only
+valid when 4DOS is running in a DOS session under OS/2 or Windows 95/98/ME.
+If you are using 4DOS under DOS, the return value is an empty string.
+
+Under OS/2, _WINTITLE only returns the title when it has been changed from
+the default (starting) value.  If the title has not been changed, _WINTITLE
+will return an empty string.  This is a limitation of OS/2, not a bug in
+4DOS.
 
 Also see the 551ChangeTitle 4DOS.INI directive.
 ;---------------------------------------------------------------------------
@@ -6055,66 +6858,87 @@
 !NOINDEX
 
     333@ABS[n]                          Absolute value of a number
+    401@AGEDATE[n[,format]]             Converts an age into date and time
     242@ALIAS[name]                     Value of an alias
     334@ALTNAME[filename]               FAT filename
     243@ASCII[c]                        Numeric ASCII value(s) for string
     244@ATTRIB[filename,[nrhsad]]       File attribute test (0 or 1)
+    452@AVERAGE[a,b,...]                Average of a list of integers
 
     345@CAPS["sep",c]                   Capitalize first letter of words
-    245@CDROM[d:]                       CD-ROM drive detection (0 or 1)
+    245@CDROM[d:]                       CD or DVD drive detection (0 or 1)
+    725@CEILING[n]                      Smallest integer not less than n
     246@CHAR[n]                         Character(s) for numeric ASCII
     247@CLIP[n]                         Line from the clipboard
     335@CLIPW[n]                        Write line to clipboard
+    809@CLUSTSIZE[d:]                 ! Cluster size
+    810@CODEPAGE[name]                ! Selected code page for a device
+    826@COM[n]                        ! Serial port ready status (0 or 1)
     248@COMMA[n]                        Inserts commas in a number
+    728@COMPARE[filename1,filename2]    Compare two files
     249@CONVERT[in,out,value]           Base conversion
+    507@COUNT[c,string]                 Occurrences of a character in a string
     346@CRC32[filename]                 CRC32 of a file
+    359@CWD[d:]                         Current directory of specified drive
+    360@CWDS[d:]                        Current directory with trailing \
 
     250@DATE[date]                      Convert date to number of days
+    717@DATECONV[date[,format]]       ! Convert date from one format to another
     251@DAY[date]                       Day of the month
+    786@DDCSTR[type]                  ! Display Data Channel (DDC) string
     252@DEC[expression]                 Decrements an expression
     336@DECIMAL[n]                      Decimal portion of a number
     253@DESCRIPT[filename]              File description
     254@DEVICE[name]                    Character device detection
     337@DIGITS[string]                  Test if a string is only digits
-    255@DISKFREE[d:,b|k|m]              Free disk space
-    256@DISKTOTAL[d:,b|k|m]             Total disk space
-    257@DISKUSED[d:,b|k|m]              Used disk space
-    258@DOSMEM[b|k|m]                   Free DOS memory
+    734@DIRSTACK[n]                     Display directory stack entry
+    255@DISKFREE[d:,b|k|m|g]            Free disk space
+    256@DISKTOTAL[d:,b|k|m|g]           Total disk space
+    257@DISKUSED[d:,b|k|m|g]            Used disk space
+    258@DOSMEM[b|k|m]                 ! Free DOS memory
     259@DOW[date]                       Day of the week
     338@DOWF[date]                      Day of the week (full name)
-    260@DOWI[date]                      Numeric day of the week
+    260@DOWI[date]                      Numeric day of the week (Sun = 1, etc.)
     261@DOY[date]                       Numeric day of the year
+    727@DRIVETYPE[d:]                   Type of drive (hard drive, CD/DVD etc.)
 
-    262@EMS[b|k|m]                      Free EMS memory
+    262@EMS[b|k|m]                    ! Free EMS memory
     339@ERRTEXT[n]                      DOS error text for specified code
     263@EVAL[expression]                Arithmetic calculations
     264@EXEC[command]                   Execute a command
     265@EXECSTR[command]                Execute, return string
     266@EXPAND[filename,[nrhsad]]       Wildcard expansion
     267@EXT[filename]                   File extension
-    268@EXTENDED[b|k|m]                 Free extended memory
+    268@EXTENDED[b|k|m]               ! Free extended memory
 
     347@FIELD[["sep",]n,string]         Returns a field from a string
+    449@FIELDS[["sep",]string]          Counts number of fields in a string
     269@FILEAGE[filename[,acw]]         File age (date and time)
     270@FILECLOSE[n]                    Close a file
     271@FILEDATE[filename[,[acw][,n]]]  File date
     272@FILENAME[filename]              File name and extension
     273@FILEOPEN[filename,mode]         Open a file
     274@FILEREAD[n[,length]]            Read line or bytes from a file
+    478@FILEREADB[n,length]             Read bytes from a file
     275@FILES[filename[,-nrhsad]]       Count files matching a wildcard
     276@FILESEEK[n,offset,start]        Move file pointer to an offset
     277@FILESEEKL[n,line]               Move file pointer to a line number
-    278@FILESIZE[filename,b|k|m]        Size of files matching a wildcard
+    278@FILESIZE[filename,b|k|m|g]      Size of files matching a wildcard
     279@FILETIME[filename[,[acw][,s]]]  File time
     280@FILEWRITE[n,text]               Write next line to a file
     281@FILEWRITEB[n,length,string]     Write bytes to a file
     282@FINDCLOSE[filename]             Close search handle
     283@FINDFIRST[filename[,-nrhsad]]   Find first matching file
     284@FINDNEXT[filename[,-nrhsad]]    Find next matching file
+    726@FLOOR[n]                        Largest integer not larger than n
     285@FORMAT[[-][x][.y],string]       Formats (justifies) a string
+    777@FSTYPE[d:]                      File system type (FAT, FAT32, etc.)
     286@FULL[filename]                  Full file name with path
     348@FUNCTION[name]                  Value of a user-defined function
 
+    808@HDDSIZE[d:,b|k|m|g]           ! Physical hard disk drive size
+    718@HISTORY[x[,y]]                  A line or word from the command history
+
     287@IF[condition,true,false]        Evaluates a test condition
     288@INC[expression]                 Increments an expression
     289@INDEX[string1,string2[,n]]      Position of one string in another
@@ -6123,29 +6947,49 @@
     290@INSERT[n,string1,string2]       Insert one string into another
     291@INSTR[start,length,string]      Extract a substring
     292@INT[n]                          Integer part of a number
+    508@ISALNUM[string]                 Test for alphanumeric characters
+    509@ISALPHA[string]                 Test for alphabetic characters
+    510@ISASCII[string]                 Test for ASCII characters
+    528@ISCNTRL[string]                 Test for control characters
+    529@ISDIGIT[string]                 Test for decimal digits
+    828@ISLOWER[string]                 Test for lower-case letters
+    458@ISODOWI[date]                 ! Numeric day of the week (Mon = 1, etc.)
+    459@ISOWEEK[date]                 ! Week of the year pursuant to ISO 8601
+    721@ISOWYEAR[date]                ! ISO 8601 week date year
+    530@ISPRINT[string]                 Test for printable characters
+    558@ISPUNCT[string]                 Test for punctuation characters
+    559@ISSPACE[string]                 Test for white space characters
+    829@ISUPPER[string]                 Test for upper-case letters
+    560@ISXDIGIT[string]                Test for hexadecimal digits
 
     293@LABEL[d:]                       Volume label
+    730@LCS[str1,str2]                  Longest Common Subsequence in strings
     294@LEFT[n,string]                  Leftmost characters of a string
     295@LEN[string]                     Length of a string
     296@LFN[filename]                   Long path and filename
     297@LINE[filename,n]                Read the specified line from a file
     298@LINES[filename]                 Count lines in a file
     299@LOWER[string]                   Convert string to lower case
-    300@LPT[n]                          Printer port ready status (0 or 1)
+    300@LPT[n]                        ! Printer port ready status (0 or 1)
+    406@LTRIM[chars,string]             Trims specified leading characters
 
     301@MAKEAGE[date[,time]]            Convert date/time to file date/time
-    302@MAKEDATE[n]                     Convert number of days to date
+    302@MAKEDATE[n[,format]]            Convert number of days to date
     303@MAKETIME[n]                     Convert number of seconds to time
     304@MASTER[varname]                 Value from master environment
     342@MAX[a,b,...]                    Largest integer in list
+    402@MD5[filename]                   MD5 hash of a file
     343@MIN[a,b,...]                    Smallest integer in list
     305@MONTH[date]                     Month of the year
+    369@MONTHF[date]                  ! Month of the year (full name)
 
     306@NAME[filename]                  File name without path or extension
     307@NUMERIC[string]                 Test if a string is numeric
 
     308@PATH[filename]                  File path without name
 
+    503@QUOTE[filename]                 Double quote a filename
+
     309@RANDOM[min,max]                 Generate a random integer
     310@READSCR[row,col,len]            Character from the screen
     311@READY[d:]                       Drive ready status (0 or 1)
@@ -6153,29 +6997,39 @@
     313@REMOVABLE[d:]                   Removable drive detection (0 or 1)
     314@REPEAT[c,n]                     Repeat a character
     315@REPLACE[str1,str2,str3]         Replace within a string
+    729@REVERSE[string]                 Reverse a string
     316@RIGHT[n,string]                 Rightmost characters of a string
+    407@RTRIM[chars,string]             Trims specified trailing characters
 
     317@SEARCH[filename]                Path search
     318@SELECT[file,t,l,b,r,title]      Menu selection
+    358@SERIAL[d:]                      Volume serial number
     319@SFN[filename]                   Short path and filename
+    403@SHA1[filename]                  SHA1 hash of a file
+    733@SIMILAR[str1,str2]              Similarity (0 - 100%) between 2 strings
+    409@SMBSTR[type,n]                ! SMBIOS string n of a given type
     320@STRIP[chars,string]             Strip characters from a string
+    722@SUBST[n,str1,str2]              Substitute a string in another string
     321@SUBSTR[string,start,length]     Extract a substring
 
     322@TIME[time]                      Convert time to number of seconds
     323@TIMER[n]                        Elapsed time of specified timer
     324@TRIM[string]                    Remove blanks from a string
     325@TRUENAME[filename]              True name of a file
+    408@TRUNCATE[n]                     Truncate file at current position
 
     326@UNIQUE[d:\path]                 Create file with unique name
+    504@UNQUOTE[filename]               Remove double quotes from a filename
+    723@UNQUOTES[string]                Remove leading & trailing double quotes
     327@UPPER[string]                   Convert string to upper case
 
     328@WILD[str1,str2]                 Wildcard comparison
     329@WORD[["sep",]n,string]          Extract a word from a string
     330@WORDS[["sep",]string]           Counts number of words in a string
 
-    331@XMS[b|k|m]                      Free XMS memory
+    331@XMS[b|k|m]                    ! Free XMS memory
 
-    332@YEAR[date]                      Year number (2 digits)
+    332@YEAR[date]                      Year number
 ;---------------------------------------------------------------------------
 !TOPIC 350 Examples of Variable Functions
 !NOINDEX
@@ -6230,89 +7084,172 @@
         166+             * Substitutes command separator
         165=             * Substitutes escape character
         162?             * Exit code, last external program
-        163??            * Reason for external program termination
+        163??           !* Reason for external program termination
 
         167_4VER           4DOS version (7.50, 7.51, etc.)
         164_?            * Exit code, last internal command
 
-        168_ALIAS          Free alias space in bytes
+        168_ALIAS        ! Free alias space in bytes
+        231_ALT            Alt key depressed (0 or 1)
         169_ANSI         * ANSI driver flag (0 or 1)
-        170_APMAC        * APM AC line status (on, off, or unknown)
-        171_APMBATT      * APM battery status
-        172_APMLIFE      * APM battery life (0 - 100% or unknown)
+        170_APMAC       !* APM AC line status (on, off, or unknown)
+        171_APMBATT     !* APM battery status
+        172_APMLIFE     !* APM battery life (0 - 100% or unknown)
+        787_APPEND       ! APPEND loaded flag (0 or 1)
+        788_ASSIGN       ! ASSIGN loaded flag (0, 1 or -1)
 
         173_BATCH          Batch nesting level
         174_BATCHLINE      Current line number in current batch file
         175_BATCHNAME      Name of current batch file
+        500_BATCHTYPE      Type of current batch file
+        501_BDEBUGGER      Batch debugger active (0 or 1)
         176_BG             Background color at cursor position
         177_BOOT           Boot drive letter, without a colon
         227_BUILD          4DOS build number
 
+        232_CAPSLOCK       CapsLock on (0 or 1)
+        589_CDROMS         List of CD and DVD drives
         178_CI             Current cursor shape in insert mode
         228_CMDLINE        Contents of the command line
         225_CMDPROC        Command processor name
+        502_CMDSPEC        Full pathname of command processor
         179_CO             Current cursor shape in overstrike mode
         180_CODEPAGE       Current code page number
         181_COLUMN         Current cursor column
         182_COLUMNS        Screen width
         183_COUNTRY        Current country code
-        184_CPU          * CPU type (86, 186, 200, 286, 386, 486, 586, 686)
+        184_CPU          * CPU brand and model
+        479_CPUSPEED     ! CPU speed in MHz (586 or newer)
+        233_CTRL           Ctrl key depressed (0 or 1)
         185_CWD            Current drive and directory (d:\path)
         186_CWDS           Current drive and directory with \ (d:\path\)
         187_CWP            Current directory (\path)
         188_CWPS           Current directory with \ (\path\)
 
         189_DATE         * Current date (mm-dd-yy)
+        370_DATETIME     * Current date and time (yyyyMMddhhmmss)
         190_DAY            Day of the month (1 - 31)
+        807_DISPLAY      ! DISPLAY.SYS loaded flag (0 or 1)
         191_DISK           Current drive (C, D, etc.)
         192_DNAME          Name of file used to store file descriptions
-        193_DOS          * Operating system (DOS, OS2, etc.)
+        193_DOS          * Operating system (DOS, OS/2, etc.)
         194_DOSVER       * Operating system version (5.00, 6.00, 7.00, etc.)
         195_DOW            Day of the week (Mon, Tue, Wed, etc.)
         226_DOWF           Day of the week (Monday, Tuesday, etc.)
         196_DOWI           Numeric day of the week (Sun = 1, etc.)
         197_DOY            Day of the year (1 - 366)
-        198_DPMI           DPMI version number
-        199_DV             DESQview loaded flag (0 or 1)
+        198_DPMI         ! DPMI version number
+        789_DRIVER       ! DRIVER.SYS present flag (0, 1 or -1)
+        590_DRIVES         List of all available drives
+        738_DST            Daylight saving time (0 or 1)
+        199_DV           ! DESQview loaded flag (0 or 1)
 
         229_ECHO           Echo state (0 or 1)
-        200_ENV            Free environment space in bytes
+        404_EDITMODE       Current line editing mode (0 or 1)
+        790_EGA          ! EGA.SYS loaded flag (0, 1 or -1)
+        200_ENV          ! Free environment space in bytes
+        365_EXECSTR        Last @EXECSTR return code
+        405_EXPANSION      Current expansion mode (SETDOS /X)
 
         201_FG             Foreground color at cursor position
+        780_FONTPAGE     ! Current font page number (Arabic/Hebrew only)
 
+        800_GRAFTABL     ! GRAFTABL loaded flag (0, 1 or -1)
+        806_GRAPHICS     ! GRAPHICS loaded flag (0 or 1)
+
+        724_HDRIVES        List of all hard (fixed) drives
         202_HLOGFILE       Current history log file name
         203_HOUR           Hour (0 - 23)
 
+        506_ININAME        Full pathname of the current INI file
         230_ISODATE        Current date (yyyy-mm-dd)
+        454_ISODOWI      ! Numeric day of the week (Mon = 1, etc.)
+        736_ISORDATE     ! Current ISO 8601 ordinal date (yyyy-ddd)
+        460_ISOWDATE     ! Current ISO 8601 week date (yyyy-Www-d)
+        455_ISOWEEK      ! Week of the year pursuant to ISO 8601
+        591_ISOWYEAR       Current ISO 8601 week date year
 
         204_KBHIT          Keystroke waiting in buffer (0 or 1)
-        205_KSTACK         KSTACK.COM load status (0 or 1)
+        779_KEYSTACKED   ! Number of keystrokes in the KSTACK.COM buffer
+        205_KSTACK       ! KSTACK.COM load status (0 or 1)
 
+        361_LALT           Left Alt key depressed (0 or 1)
+        830_LASTDIR        Previous directory (from directory history)
         206_LASTDISK       Last possible drive (E, F, etc.)
+        362_LCTRL          Left Ctrl key depressed (0 or 1)
         207_LOGFILE        Current log file name
+        234_LSHIFT         Left Shift key depressed (0 or 1)
 
+        782_MACHINE      ! Machine name in network
         208_MINUTE         Minute (0 - 59)
-        209_MONITOR        Monitor type (mono or color)
+        739_MJD          ! Modified Julian Day
+        209_MONITOR      ! Monitor type (mono or color)
         210_MONTH          Month of the year (1 - 12)
-        211_MOUSE          Mouse driver loaded flag (0 or 1)
-
-        212_NDP          * Coprocessor type (0, 87, 287, 387)
-
+        240_MONTHF         Month of the year (January, February, etc.)
+        211_MOUSE        ! Mouse driver loaded flag (0 or 1)
+        801_MSCDEX       ! MSCDEX/SHSUCDX loaded flag (0, 1 or -1)
+
+        212_NDP          ! Coprocessor brand and model
+        783_NETWORK     !* Installed network components flag byte
+        784_NLSFUNC      ! NLSFUNC loaded flag (0, 1 or -1)
+        235_NUMLOCK        NumLock on (0 or 1)
+
+        820_POWER        ! POWER.EXE loaded flag (0 or 1)
+        802_PRINT        ! PRINT loaded flag (0, 1 or -1)
+
+        363_RALT           Right Alt key depressed (0 or 1)
+        364_RCTRL          Right Ctrl key depressed (0 or 1)
+        716_READY          List of ready (accessible) drives
         213_ROW            Current cursor row
         214_ROWS           Screen height
+        236_RSHIFT         Right Shift key depressed (0 or 1)
 
+        825_SBDSP       !* Sound Blaster DSP version number
+        237_SCROLLLOCK     ScrollLock on (0 or 1)
         215_SECOND         Second (0 - 59)
+        785_SHARE        ! SHARE loaded flag (0, 1 or -1)
         216_SHELL          Shell level (0, 1, 2, ...)
-        217_SWAPPING     * Swapping state (XMS, EMS, Disk, None, or off)
+        238_SHIFT          Shift key depressed (0 or 1)
+        803_SMARTDRV     ! SMARTDRV loaded flag (0 or 1)
+        737_STARTPATH      Startup directory of current shell
+        366_STDERR         Standard error not redirected flag (0 or 1)
+        367_STDIN          Standard input not redirected flag (0 or 1)
+        368_STDOUT         Standard output not redirected flag (0 or 1)
+        740_STZN           Name of time zone for standard time
+        741_STZO           Offset in minutes from UTC for standard time
+        217_SWAPPING    !* Swapping state (XMS, EMS, Disk, None, or off)
         218_SYSERR       * Last DOS error
+        453_SYSREQ       ! SysReq key depressed (0 or 1)
 
+        804_TASKMAX      ! TASKMAX/TASKMGR loaded flag (0 or 1)
+        805_TASKSWITCHER ! DOSSHELL Task Switcher loaded flag (0 or 1)
+        588_TICK         ! BIOS clock tick since midnight
         219_TIME         * Current time (hh:mm:ss)
         220_TRANSIENT    * Transient shell flag (0 or 1)
-
-        221_VIDEO          Video board type (mono, cga, ega, or vga)
-
-        222_WIN          * Microsoft Windows mode
-        223_WINTITLE     * OS/2 DOS session window title
+        480_TSC         !* Time Stamp Counter (586 or newer)
+        742_TZN            Name of current time zone
+        743_TZO            Offset in minutes from UTC for current time zone
+
+        744_UNIXTIME     ! Curent Unix time
+        745_UTCDATE        Current UTC date
+        746_UTCDATETIME    Current UTC date and time
+        747_UTCHOUR        Current UTC hour
+        748_UTCISODATE     Current UTC date in ISO format
+        749_UTCMINUTE      Current UTC minute
+        750_UTCSECOND      Current UTC second
+        760_UTCTIME        Current UTC time
+
+        505_V86          ! CPU is in V86 mode (386 or newer, 0 or 1)
+        778_VCPI         ! VCPI version number
+        824_VDS          ! VDS version number
+        831_VERMAJOR       4DOS major version
+        832_VERMINOR       4DOS minor version
+        833_VERSION        4DOS version in major.minor format
+        221_VIDEO        ! Video board type (mono, cga, ega, vga or svga)
+
+        222_WIN         !* Microsoft Windows mode
+        735_WINTICKS       Milliseconds since midnight or since Windows started
+        223_WINTITLE     * OS/2 or Windows 95/98/ME DOS session window title
 
         224_YEAR           Year (1980 - 2099)
 ;---------------------------------------------------------------------------
@@ -6342,34 +7279,50 @@
 For information on how to set up user-defined variable functions, refer
 to the description of the 696FUNCTION and 699UNFUNCTION commands.
 
+Note: The functions marked with an exclamation mark [!] are 4DOS-specific;
+they are not present in 0204NT.  Take this into account when writing
+portable batch files.
+
 The pre-defined variable functions are grouped by category (or
 see 349Variable Functions by Name):
 
 System status
 
-    258@DOSMEM[b|k|m]                   Free DOS memory
-    262@EMS[b|k|m]                      Free EMS memory
-    268@EXTENDED[b|k|m]                 Free extended memory
+    786@DDCSTR[type]                  ! Display Data Channel (DDC) string
+    258@DOSMEM[b|k|m]                 ! Free DOS memory
+    262@EMS[b|k|m]                    ! Free EMS memory
+    268@EXTENDED[b|k|m]               ! Free extended memory
     304@MASTER[varname]                 Value from master environment
     310@READSCR[row,col,len]            Character from the screen
-    331@XMS[b|k|m]                      Free XMS memory
+    409@SMBSTR[type,n]                ! SMBIOS string n of a given type
+    331@XMS[b|k|m]                    ! Free XMS memory
 
 Drives and devices
 
-    245@CDROM[d:]                       CD-ROM drive detection (0 or 1)
+    245@CDROM[d:]                       CD or DVD drive detection (0 or 1)
+    809@CLUSTSIZE[d:]                 ! Cluster size
+    810@CODEPAGE[name]                ! Selected code page for a device
+    826@COM[n]                        ! Serial port ready status (0 or 1)
+    359@CWD[d:]                         Current directory of specified drive
+    360@CWDS[d:]                        Current directory with trailing \
     254@DEVICE[name]                    Character device detection
-    255@DISKFREE[d:,b|k|m]              Free disk space
-    256@DISKTOTAL[d:,b|k|m]             Total disk space
-    257@DISKUSED[d:,b|k|m]              Used disk space
+    255@DISKFREE[d:,b|k|m|g]            Free disk space
+    256@DISKTOTAL[d:,b|k|m|g]           Total disk space
+    257@DISKUSED[d:,b|k|m|g]            Used disk space
+    727@DRIVETYPE[d:]                   Type of drive (hard drive, CD/DVD etc.)
+    777@FSTYPE[d:]                      File system type (FAT, FAT32, etc.)
+    808@HDDSIZE[d:,b|k|m|g]           ! Physical hard disk drive size
     293@LABEL[d:]                       Volume label
-    300@LPT[n]                          Printer port ready status (0 or 1)
+    300@LPT[n]                        ! Printer port ready status (0 or 1)
     311@READY[d:]                       Drive ready status (0 or 1)
     312@REMOTE[d:]                      Remote drive detection (0 or 1)
     313@REMOVABLE[d:]                   Removable drive detection (0 or 1)
+    358@SERIAL[d:]                      Volume serial number
 
 Files
 
     244@ATTRIB[filename,[nrhsad]]       File attribute test (0 or 1)
+    728@COMPARE[filename1,filename2]    Compare two files
     346@CRC32[filename]                 CRC32 of a file
     253@DESCRIPT[filename]              File description
     269@FILEAGE[filename[,acw]]         File age (date and time)
@@ -6377,10 +7330,11 @@
     271@FILEDATE[filename[,[acw][,n]]]  File date
     273@FILEOPEN[filename,mode]         Open a file
     274@FILEREAD[n[,length]]            Read line or bytes from a file
+    478@FILEREADB[n,length]             Read bytes from a file
     275@FILES[filename[,-nrhsad]]       Count files matching a wildcard
     276@FILESEEK[n,offset,start]        Move file pointer to an offset
     277@FILESEEKL[n,line]               Move file pointer to a line number
-    278@FILESIZE[filename,b|k|m]        Size of files matching a wildcard
+    278@FILESIZE[filename,b|k|m|g]      Size of files matching a wildcard
     279@FILETIME[filename[,[acw][,s]]]  File time
     280@FILEWRITE[n,text]               Write next line to a file
     281@FILEWRITEB[n,length,string]     Write bytes to a file
@@ -6389,8 +7343,11 @@
     284@FINDNEXT[filename[,-nrhsad]]    Find next matching file
     297@LINE[filename,n]                Read the specified line from a file
     298@LINES[filename]                 Count lines in a file
+    402@MD5[filename]                   MD5 hash of a file
     317@SEARCH[filename]                Path search
+    403@SHA1[filename]                  SHA1 hash of a file
     325@TRUENAME[filename]              True name of a file
+    408@TRUNCATE[n]                     Truncate file at current position
     326@UNIQUE[d:\path]                 Create file with unique name
 
 File names
@@ -6403,25 +7360,47 @@
     296@LFN[filename]                   Long path and filename
     306@NAME[filename]                  File name without path or extension
     308@PATH[filename]                  File path without name
+    503@QUOTE[filename]                 Double quote a filename
     319@SFN[filename]                   Short path and filename
+    504@UNQUOTE[filename]               Remove double quotes from a filename
+    723@UNQUOTES[string]                Remove leading & trailing double quotes
 
 Strings and characters
 
     243@ASCII[c]                        Numeric ASCII value(s) for string
     345@CAPS["sep",c]                   Capitalize first letter of words
     246@CHAR[n]                         Character(s) for numeric ASCII
+    507@COUNT[c,string]                 Occurrences of a character in a string
     347@FIELD[["sep",]n,string]         Returns a field from a string
+    449@FIELDS[["sep",]string]          Counts number of fields in a string
     285@FORMAT[[-][x][.y],string]       Formats (justifies) a string
     289@INDEX[string1,string2[,n]]      Position of one string in another
     290@INSERT[n,string1,string2]       Insert one string into another
     291@INSTR[start,length,string]      Extract a substring
-    295@LEN[string]                     Length of a string
+    508@ISALNUM[string]                 Test for alphanumeric characters
+    509@ISALPHA[string]                 Test for alphabetic characters
+    510@ISASCII[string]                 Test for ASCII characters
+    528@ISCNTRL[string]                 Test for control characters
+    529@ISDIGIT[string]                 Test for decimal digits
+    828@ISLOWER[string]                 Test for lower-case letters
+    530@ISPRINT[string]                 Test for printable characters
+    558@ISPUNCT[string]                 Test for punctuation characters
+    559@ISSPACE[string]                 Test for white space characters
+    829@ISUPPER[string]                 Test for upper-case letters
+    560@ISXDIGIT[string]                Test for hexadecimal digits
+    730@LCS[str1,str2]                  Longest Common Subsequence in strings
     294@LEFT[n,string]                  Leftmost characters of a string
+    295@LEN[string]                     Length of a string
     299@LOWER[string]                   Convert string to lower case
+    406@LTRIM[chars,string]             Trims specified leading characters
     314@REPEAT[c,n]                     Repeat a character
     315@REPLACE[str1,str2,str3]         Replace within a string
+    729@REVERSE[string]                 Reverse a string
     316@RIGHT[n,string]                 Rightmost characters of a string
+    407@RTRIM[chars,string]             Trims specified trailing characters
+    733@SIMILAR[str1,str2]              Similarity (0 - 100%) between 2 strings
     320@STRIP[chars,string]             Strip characters from a string
+    722@SUBST[n,str1,str2]              Substitute a string in another string
     321@SUBSTR[string,start,length]     Extract a substring
     324@TRIM[string]                    Remove blanks from a string
     327@UPPER[string]                   Convert string to upper case
@@ -6432,12 +7411,15 @@
 Numbers and arithmetic
 
     333@ABS[n]                          Absolute value of a number
+    452@AVERAGE[a,b,...]                Average of a list of integers
+    725@CEILING[n]                      Smallest integer not less than n
     248@COMMA[n]                        Inserts commas in a number
     249@CONVERT[in,out,value]           Base conversion
     252@DEC[expression]                 Decrements an expression
     336@DECIMAL[n]                      Decimal portion of a number
     337@DIGITS[string]                  Test if a string is only digits
     263@EVAL[expression]                Arithmetic calculations
+    726@FLOOR[n]                        Largest integer not larger than n
     288@INC[expression]                 Increments an expression
     292@INT[n]                          Integer part of a number
     342@MAX[a,b,...]                    Largest integer in list
@@ -6447,28 +7429,36 @@
 
 Dates and times
 
+    401@AGEDATE[n[,format]]             Converts an age into date and time
     250@DATE[date]                      Convert date to number of days
+    717@DATECONV[date[,format]]         Convert date from one format to another
     251@DAY[date]                       Day of the month
     259@DOW[date]                       Day of the week
     338@DOWF[date]                      Day of the week (full name)
-    260@DOWI[date]                      Numeric day of the week
+    260@DOWI[date]                      Numeric day of the week (Sun = 1, etc.)
     261@DOY[date]                       Numeric day of the year
+    458@ISODOWI[date]                 ! Numeric day of the week (Mon = 1, etc.)
+    459@ISOWEEK[date]                 ! Week of the year pursuant to ISO 8601
+    721@ISOWYEAR[date]                ! ISO 8601 week date year
     301@MAKEAGE[date[,time]]            Convert date/time to file date/time
-    302@MAKEDATE[n]                     Convert number of days to date
+    302@MAKEDATE[n[,format]]            Convert number of days to date
     303@MAKETIME[n]                     Convert number of seconds to time
     305@MONTH[date]                     Month of the year
+    369@MONTHF[date]                  ! Month of the year (full name)
     322@TIME[time]                      Convert time to number of seconds
-    332@YEAR[date]                      Year number (2 digits)
+    332@YEAR[date]                      Year number
 
 Utility
 
     242@ALIAS[name]                     Value of an alias
     247@CLIP[n]                         Line from the clipboard
     335@CLIPW[n]                        Write line to clipboard
+    734@DIRSTACK[n]                     Display directory stack entry
     339@ERRTEXT[n]                      DOS error text for specified code
     264@EXEC[command]                   Execute a command
     265@EXECSTR[command]                Execute, return string
     348@FUNCTION[name]                  Value of a user-defined function
+    718@HISTORY[x[,y]]                  A line or word from the command history
     287@IF[condition,true,false]        Evaluates a test condition
     340@INIREAD[file,sect,key]          Read from .INI file
     341@INIWRITE[file,sect,key,val]     Write to .INI file
@@ -6487,21 +7477,23 @@
 
 Specific Functions and Arguments
 
-Some variable functions, like 255@DISKFREE, are shown with "b|k|m" as
+Some variable functions, like 255@DISKFREE, are shown with "b|k|m|g" as
 one of their arguments.  Those functions return a number of bytes, kilobytes,
-or megabytes based on the "b|k|m" argument:
+megabytes or gigabytes based on the "b|k|m|g" argument:
 
      b   return the number of bytes
      K   return the number of kilobytes (bytes / 1,024)
      k   return the number of thousands of bytes (bytes / 1,000)
      M   return the number of megabytes (bytes / 1,048,576)
      m   return the number of millions of bytes (bytes / 1,000,000)
+     G   return the number of gigabytes (bytes / 1,073,741,824)
+     g   return the number of billions of bytes (bytes / 1,000,000,000)
 
 You can include commas (or the "thousands separator" character for your
-system) in the results from a "b|k|m" function by appending a "c" to the
-argument.  For example, to add commas to a "b" or number of bytes result,
-enter "bc" as the argument.  To set the thousands separator, see the
-445ThousandsChar directive.
+system) in the results from a "b|k|m|g" function by appending a "c" to
+the argument.  For example, to add commas to a "b" or number of bytes
+result, enter "bc" as the argument.  To set the thousands separator, see
+the 445ThousandsChar directive.
 
 Several functions return filenames or parts of filenames.  It is possible,
 and on LFN drives very likely, that the strings returned by these functions
@@ -6528,12 +7520,13 @@
 colon.  The function will not work properly if you use the drive letter
 without the colon.
 
-The 274@FILEREAD, 280@FILEWRITE, 281@FILEWRITEB, 276@FILESEEK,
-277@FILESEEKL, and 270@FILECLOSE functions allow you to access files
-based on their file handle.  These functions should only be used with file
-handles returned by 273@FILEOPEN!  If you use them with any other file
-handle you may damage other files opened by 4DOS (or, in a secondary shell,
-the program which started 4DOS), or hang your system.
+The 274@FILEREAD, 478@FILEREADB, 280@FILEWRITE, 281@FILEWRITEB,
+276@FILESEEK, 277@FILESEEKL, 408@TRUNCATE and 270@FILECLOSE
+functions allow you to access files based on their file handle.  These
+functions should only be used with file handles returned by 273@FILEOPEN!
+If you use them with any other file handle you may damage other files opened
+by 4DOS (or, in a secondary shell, the program which started 4DOS), or hang
+your system.
 
 Many functions return values based on information provided by your operating
 system.  Such functions will only return correct information if the operating
@@ -6552,7 +7545,12 @@
 value.  Two-digit years between 80 and 99 are interpreted as 1980 -
 1999; values between 00 and 79 are interpreted as 2000 - 2079.
 If the date begins with a four digit year greater than 1900, it is
-assumed to be in the ISO 8601 international format yyyy-mm-dd.
+assumed to be in the ISO 8601 international format yyyy-mm-dd.  If the
+date contains the letter "W", it is assumed to be in the ISO 8601 week date
+format yyyy-Www-d, where yyyy = year, ww = week, d = week day.  If the
+date is entered as two numbers in the format yyyy-ddd, it is assumed to be
+in the ISO 8601 ordinal date format, where yyyy = year, ddd = day of the
+year.
 ;---------------------------------------------------------------------------
 !TOPIC 242 @ALIAS
 !NOINDEX
@@ -6571,6 +7569,28 @@
 
 @ABS[n]:  Returns the absolute value of the number.
 ;---------------------------------------------------------------------------
+!TOPIC 401 @AGEDATE
+!NOINDEX
+!TTY
+
+@AGEDATE[n[,format]]:  Converts n (an age) into a date and time pair
+(formatted according to the current country settings).  Time is separated
+from date by a comma, and is always in 24-hour format.  n is the file date
+and time (age), as returned by 269@FILEAGE and 301@MAKEAGE.  @AGEDATE
+takes an optional second argument for the date format:
+
+    0 - system default format
+    1 - U.S. format (mm-dd-yy)
+    2 - European format (dd-mm-yy)
+    3 - Japanese format (yy-mm-dd)
+    4 - ISO 8601 international format (yyyy-mm-dd)
+    5 - ISO 8601 international format (yyyy-Www-d) week date
+    6 - ISO 8601 international format (yyyy-ddd) ordinal date
+
+The separator used in the return string depends on the current country
+settings of the system, except for in the ISO 8601 international format,
+where it will always by a hyphen ('-') as per spec.
+;---------------------------------------------------------------------------
 !TOPIC 334 @ALTNAME
 !NOINDEX
 !TTY
@@ -6622,6 +7642,12 @@
 example, if SECURE.DAT has the read-only, hidden, and archive attributes
 set, %@ATTRIB[SECURE.DAT] would return "RH_A_" (without the quotes).
 ;---------------------------------------------------------------------------
+!TOPIC 452 @AVERAGE
+!NOINDEX
+!TTY
+
+@AVERAGE[a,b,c,...]:  Returns the average of a list of integer numbers.
+;---------------------------------------------------------------------------
 !TOPIC 345 @CAPS
 !NOINDEX
 !TTY
@@ -6634,7 +7660,15 @@
 !NOINDEX
 !TTY
 
-@CDROM[d:]:  Returns "1" if the drive is a CD-ROM or "0" otherwise.
+@CDROM[d:]:  Returns "1" if the drive is a CD or DVD drive, or "0"
+otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 725 @CEILING
+!NOINDEX
+!TTY
+
+@CEILING[n]:  Returns the value of the smallest integer that is not less
+than n.
 ;---------------------------------------------------------------------------
 !TOPIC 246 @CHAR
 !NOINDEX
@@ -6642,6 +7676,16 @@
 
 @CHAR[n]:  Returns the character(s) corresponding to an ASCII numeric
 value.  For example %@CHAR[65] returns A.  %@CHAR[65 66 67] returns ABC.
+
+The ASCII code of each byte may be entered in either decimal (1 to 3 decimal
+digits 0-9), or hexadecimal format ("0x" followed by 1 or 2 hex digits 0-F).
+;---------------------------------------------------------------------------
+!TOPIC 507 @COUNT
+!NOINDEX
+!TTY
+
+@COUNT[c,string]:  Returns the number of times the character c appears in
+string.
 ;---------------------------------------------------------------------------
 !TOPIC 247 @CLIP
 !NOINDEX
@@ -6661,6 +7705,34 @@
 work in a DOS session in Windows; it will not work in a DOS session
 under OS/2 or the 025Windows NT line.
 ;---------------------------------------------------------------------------
+!TOPIC 809 @CLUSTSIZE
+!NOINDEX
+!TTY
+
+@CLUSTSIZE[d:]:  Returns the size in bytes of a cluster of the specified
+drive.
+;---------------------------------------------------------------------------
+!TOPIC 810 @CODEPAGE
+!NOINDEX
+!TTY
+
+@CODEPAGE[name]:  Returns the selected codepage for the specified device,
+or "0" if no codepage has been selected. name can be CON, PRN, LPT1, LPT2
+or LPT3.  Codepages can be selected with MODE.  See your 65535DOS or OS/2
+documentation for more information on MODE.
+;---------------------------------------------------------------------------
+!TOPIC 826 @COM
+!NOINDEX
+!TTY
+
+@COM[n]:  Returns a "1" if the specified serial port is ready; otherwise,
+returns "0".  n=1 checks COM1, n=2 checks COM2, n=3 checks COM3, and
+n=4 checks COM4.
+
+The value returned from @COM reflects the status of the Data Set Ready (DSR)
+line, which depends also on the cable and the device connected to its other
+end.  You may need to check both for troubleshooting eventual problems.
+;---------------------------------------------------------------------------
 !TOPIC 248 @COMMA
 !NOINDEX
 !TTY
@@ -6671,6 +7743,16 @@
 
 See also the 285@FORMAT function, which can be useful for aligning or
 zero-padding numbers.
+
+NOTE: If the 823NO_SEP environment variable is set, @COMMA has no
+effect.
+;---------------------------------------------------------------------------
+!TOPIC 728 @COMPARE
+!NOINDEX
+!TTY
+
+@COMPARE[filename1,filename2]:  Returns 1 if the two files are identical,
+or 0 if they differ.
 ;---------------------------------------------------------------------------
 !TOPIC 249 @CONVERT
 !NOINDEX
@@ -6679,8 +7761,8 @@
 @CONVERT[input, output, value]:  Converts a numeric string (value) from
 one number base (input) to another (output).  Valid bases range from 2
 to 36.  The value must be a positive number between 0 and 2**32-1
-(2,147,483,647).  No error is returned if value is outside that range.  For
-example, to convert "1010101" from binary to decimal, use this syntax:
+(4,294,967,295).  No error is returned if value is outside that range.
+For example, to convert "1010101" from binary to decimal, use this syntax:
 
     %@convert[2,10,1010101]
 ;---------------------------------------------------------------------------
@@ -6688,9 +7770,23 @@
 !NOINDEX
 !TTY
 
-@CRC32[name]:  Returns the CRC32 for the specified file, or "-1" if the
+@CRC32[filename]:  Returns the CRC32 for the specified file, or "-1" if the
 file doesn't exist.
 ;---------------------------------------------------------------------------
+!TOPIC 359 @CWD
+!NOINDEX
+!TTY
+
+@CWD[d:]:  Returns the Current Working Directory of the specified drive,
+in the format "d:\pathname".
+;---------------------------------------------------------------------------
+!TOPIC 360 @CWDS
+!NOINDEX
+!TTY
+
+@CWDS[d:]:  Returns the Current Working Directory of the specified drive,
+in the format "d:\pathname\".
+;---------------------------------------------------------------------------
 !TOPIC 250 @DATE
 !NOINDEX
 !TTY
@@ -6700,6 +7796,28 @@
 in ISO format with a four-digit year; see 344date formats for more
 information.
 ;---------------------------------------------------------------------------
+!TOPIC 717 @DATECONV
+!NOINDEX
+!TTY
+
+@DATECONV[date[,format]]:  Converts a date from one format to another.  The
+input date may be in either the local date format, or in ISO format with a
+four-digit year; see 344date formats for more information.  By default, the
+output date is formatted according to the current country settings, but
+@DATECONV takes an optional second argument for the output date format:
+
+    0 - system default format
+    1 - U.S. format (mm-dd-yy)
+    2 - European format (dd-mm-yy)
+    3 - Japanese format (yy-mm-dd)
+    4 - ISO 8601 international format (yyyy-mm-dd)
+    5 - ISO 8601 international format (yyyy-Www-d) week date
+    6 - ISO 8601 international format (yyyy-ddd) ordinal date
+
+The separator used in the return string depends on the current country
+settings of the system, except for in the ISO 8601 international format,
+where it will always by a hyphen ('-') as per spec.
+;---------------------------------------------------------------------------
 !TOPIC 251 @DAY
 !NOINDEX
 !TTY
@@ -6708,6 +7826,25 @@
 date.  The date may be in either the local date format, or in ISO format
 with a four-digit year; see 344date formats for more information.
 ;---------------------------------------------------------------------------
+!TOPIC 786 @DDCSTR
+!NOINDEX
+!TTY
+
+@DDCSTR[type]:  Returns a string of a given type from the Display Data
+Channel (DDC) Enhanced Display Identification Data (EDID).  If a VESA BIOS
+is not present or the monitor does not support DDC, an empty string is
+returned.  Type must be from 1 to 3, inclusively.  Here are its meanings:
+
+     Type  Meaning of the string
+     컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
+      1    3-letter manufacturer name
+      2    model name
+      3    serial number
+
+NOTE: If the current video mode is not supported by the VESA BIOS, it may
+      switch the display to a supported mode (usually a text mode) before it
+      executes this function.
+;---------------------------------------------------------------------------
 !TOPIC 252 @DEC
 !NOINDEX
 !TTY
@@ -6749,11 +7886,20 @@
 @DIGITS[n]:  Returns 1 if the string is digits only (no decimal
 point, sign character, or thousands separator).
 ;---------------------------------------------------------------------------
+!TOPIC 734 @DIRSTACK
+!NOINDEX
+!TTY
+
+@DIRSTACK[n]:  Returns the name of the nth entry in the directory stack.
+The oldest is number 0.  If no n parameter is specified, returns the total
+number of entries in the stack.  The directory stack is set by calls to
+653PUSHD / 651POPD.
+;---------------------------------------------------------------------------
 !TOPIC 255 @DISKFREE
 !NOINDEX
 !TTY
 
-@DISKFREE[d:,b|k|m]: Returns the amount of free disk space on the
+@DISKFREE[d:,b|k|m|g]: Returns the amount of free disk space on the
 specified drive.  DOS networks with large server disk drives (over 2 GB) may
 report disk space values that are too small when @DISKFREE is used.  If this
 occurs, it is because the network software does not report the proper values
@@ -6763,7 +7909,7 @@
 !NOINDEX
 !TTY
 
-@DISKTOTAL[d:,b|k|m]:  Returns the total disk space on the specified
+@DISKTOTAL[d:,b|k|m|g]:  Returns the total disk space on the specified
 drive.  DOS networks with large server disk drives (over 2 GB) may
 report disk space values that are too small when @DISKTOTAL is used.  If this
 occurs, it is because the network software does not report the proper values
@@ -6773,7 +7919,7 @@
 !NOINDEX
 !TTY
 
-@DISKUSED[d:,b|k|m]:  Returns the amount of disk space in use by files
+@DISKUSED[d:,b|k|m|g]:  Returns the amount of disk space in use by files
 and directories on the specified drive.  DOS networks with large server disk
 drives (over 2 GB) may report disk space values that are too small when
 @DISKUSED is used.  If this occurs, it is because the network software does
@@ -6803,7 +7949,6 @@
 format, or in ISO format with a four-digit year; see 344date formats for
 more information.
 ;---------------------------------------------------------------------------
-
 !TOPIC 260 @DOWI
 !NOINDEX
 !TTY
@@ -6821,6 +7966,20 @@
 (1-366).  The date may be in either the local date format, or in ISO format
 with a four-digit year; see 344date formats for more information.
 ;---------------------------------------------------------------------------
+!TOPIC 727 @DRIVETYPE
+!NOINDEX
+!TTY
+
+@DRIVETYPE[d:]:  Returns the type for the specified drive:
+
+    0 - The drive type cannot be determined
+    1 - The drive does not exist
+    2 - Removable disk
+    3 - Fixed disk
+    4 - Remote (network) drive
+    5 - CD or DVD drive
+    6 - RAM disk
+;---------------------------------------------------------------------------
 !TOPIC 262 @EMS
 !NOINDEX
 !TTY
@@ -6851,10 +8010,11 @@
      *    multiplication
      /    division
      \    integer division (the integer part of the quotient)
-     %%   modulo (the remainder when the first value is divided
+     MOD  modulo (the remainder when the first value is divided
           by the second)
-     **   exponentiation (the exponent must be an integer)
-
+     %%   same as MOD
+     **   exponentiation (the exponent must be a non-negative
+          decimal integer)
      AND  bitwise and (returns a 1 for each bit where the
           corresponding bits in both values are 1)
      &    same as AND
@@ -6873,7 +8033,7 @@
      Parentheses
      Unary + and -
      **
-     *, /, \, %
+     *, /, \, MOD
      +, -
      AND, OR, XOR
 
@@ -6887,9 +8047,7 @@
      %@eval[(20 %% 3) + 4]
 
 You can enter hexadecimal numbers up to 8 digits long by preceding
-the number with 0x.  The result will always be returned in
-decimal; to convert it to hexadecimal use 249@CONVERT.  For
-example:
+the number with 0x.  For example:
 
     c:\> echo %@eval[0x10 + 0x10]
     32
@@ -6897,6 +8055,19 @@
     c:\> echo %@convert[10, 16, %@eval[0x10 + 0x10]]
     20
 
+You can specify hexadecimal output with the special syntax
+
+    @eval[...=H], in which case a leading 0x is not included in the output,
+ or @eval[...=X], in which case a leading 0x is included in the output.
+
+For example:
+
+    c:\> echo %@eval[3*6=H]
+    12
+
+The default is decimal output.  To convert between decimal and hexadecimal
+formats, see the 249@CONVERT function.
+
 The maximum precision is 20 digits to the left of the decimal point and
 10 digits to the right of the decimal point.  You can alter the default
 precision on the Options 2 page of the 648OPTION dialogs, or with the
@@ -7005,8 +8176,8 @@
 
 @EXTENDED[b|k|m]:  Returns the amount of extended memory.   Most memory
 managers convert extended memory to XMS and / or EMS memory, and make it
-unavailable as extended memory.  Therefore, when a memory manager is loaded
-this function will usually return 0.
+unavailable as extended memory.  Even if so, this function will return the
+correct amount of extended memory for informational purposes.
 ;---------------------------------------------------------------------------
 !TOPIC 347 @FIELD
 !NOINDEX
@@ -7023,6 +8194,21 @@
 086escape character.  If the string argument is enclosed in quotation
 marks, you must enter a list of separators.
 ;---------------------------------------------------------------------------
+!TOPIC 449 @FIELDS
+!NOINDEX
+!TTY
+
+@FIELDS[["xxx",]string]:  Returns the number of fields in the string.
+Like 330@WORDS, except it will not scan past multiple delimiters (it
+counts each occurrence of a separator individually to allow processing empty
+fields in a string).  The first argument is a list of field separators you
+want to use; if you don't specify it, only spaces, tabs, and commas are
+considered to be field separators.  See also 330@WORDS.
+
+If you want to use a double quote as a separator, prefix it with an
+086escape character.  If the string argument is enclosed in quotation
+marks, you must enter a list of separators.
+;---------------------------------------------------------------------------
 !TOPIC 269 @FILEAGE
 !NOINDEX
 !TTY
@@ -7063,6 +8249,8 @@
     2 - European format (dd-mm-yy)
     3 - Japanese format (yy-mm-dd)
     4 - ISO 8601 international format (yyyy-mm-dd)
+    5 - ISO 8601 international format (yyyy-Www-d) week date
+    6 - ISO 8601 international format (yyyy-ddd) ordinal date
 
 The separator used in the returned string depends on the current country
 settings of the system, except for in the ISO 8601 international format,
@@ -7087,8 +8275,8 @@
 mode (b) or text mode (t).  Text mode (the default) should be used to
 read text using 274@FILEREAD without a length parameter, and to
 write text using 280@FILEWRITE.  Binary mode should be used to read
-binary data with @FILEREAD with a length parameter, and to write binary
-data with 281@FILEWRITEB.
+binary data with 478@FILEREADB or @FILEREAD with a length parameter,
+and to write binary data with 281@FILEWRITEB.
 
 To open a file for both reading and writing, open it in append mode,
 then use 276@FILESEEK to seek to the start of the file (or any
@@ -7112,7 +8300,24 @@
 length, you should open the file in binary mode.  See
 273@FILEOPEN for details on opening the file in the proper mode.
 
-Be sure to read the cautionary note about file functions under
+Be sure to read the cautionary note about file functions under
+241Variable Functions.
+;---------------------------------------------------------------------------
+!TOPIC 478 @FILEREADB
+!NOINDEX
+!TTY
+
+@FILEREADB[n,length]:  Reads length bytes from the file whose handle is
+n.  Returns "**EOF**" if you attempt to read past the end of the file.
+The data will be returned as a string of space-separated numeric digits
+representing the ASCII value of each character.
+
+If you plan to read binary data with @FILEREADB you should open the file
+in binary mode (see 273@FILEOPEN).  If you want to read text a line at a
+time you may want to use the 274@FILEREAD function instead, and open the
+file in text mode.
+
+Be sure to read the cautionary note about file functions under
 241Variable Functions.
 ;---------------------------------------------------------------------------
 !TOPIC 275 @FILES
@@ -7172,8 +8377,8 @@
 !NOINDEX
 !TTY
 
-@FILESIZE[filename,b|k|m[,a]]:  Returns the size of a file, or "-1" if the
-file does not exist.  If the filename includes wildcards or an include
+@FILESIZE[filename,b|k|m|g[,a]]:  Returns the size of a file, or "-1" if
+the file does not exist.  If the filename includes wildcards or an include
 list, returns the combined size of all matching files.
 
 The optional third argument a (allocated), if used, instructs @FILESIZE
@@ -7181,18 +8386,6 @@
 than the amount of data in the file.  Network drives and compressed drives
 may not always report allocated sizes accurately, depending on the way the
 network or disk compression software is implemented.
-
-Warning:  @FILESIZE is a 32-bit integer; it has a maximum value of
-4,294,967,295.  This is adequate to hold the size any one file, or any
-set of files on a FAT12 or FAT16 disk.  However, it is possible for a set
-of files to exceed this value on a FAT32 volume, or on a network drive or
-other non-DOS filesystem.  In this case, @FILESIZE will "roll over" at 4GB
-and return an incorrect value.  If the set of files might exceed 4
-gigabytes, do not pass wildcards to @FILESIZE.  Instead, use a 615DO or
-626FOR loop and sum the sizes with 263@EVAL :
-
-     set size=0
-     for %i in ( *.gho *.ghs ) set size=%@eval[%size + %@filesize[%i]]
 ;---------------------------------------------------------------------------
 !TOPIC 279 @FILETIME
 !NOINDEX
@@ -7233,6 +8426,14 @@
 the string to the file whose handle is n.  Returns the number of bytes
 written, or "-1" if an error occurred.
 
+If the length argument is -1, @FILEWRITEB will read the string argument as
+a series of ASCII values to write to the file.  For example:
+
+    echo %@filewriteb[%file,-1,224 242 169]
+
+The ASCII code of each byte may be entered in either decimal (1 to 3 decimal
+digits 0-9), or hexadecimal format ("0x" followed by 1 or 2 hex digits 0-F).
+
 If you plan to write binary data with @FILEWRITEB you should open the file
 in binary mode (see 273@FILEOPEN).  If you want to write text a line at a
 time you may want to use the 280@FILEWRITE function instead, and open the
@@ -7310,6 +8511,13 @@
 See the notes under 241Variable Functions about quoting returned
 long filenames.
 ;---------------------------------------------------------------------------
+!TOPIC 726 @FLOOR
+!NOINDEX
+!TTY
+
+@FLOOR[n]:  Returns the value of the smallest integer that is not less than
+n.
+;---------------------------------------------------------------------------
 !TOPIC 285 @FORMAT
 !NOINDEX
 !TTY
@@ -7335,6 +8543,15 @@
 See also the 248@COMMA function, which can make numeric values easier
 to read by inserting thousands separators.
 ;---------------------------------------------------------------------------
+!TOPIC 777 @FSTYPE
+!NOINDEX
+!TTY
+
+@FSTYPE[d:]:  Returns the file system type for the specified disk drive --
+"FAT" for FAT12, FAT16 and VFAT drives, or "FAT32", "NTFS", "EXT2", "CDFS"
+or other value depending on the file system and the installed driver for it.
+An empty string means that DOS has no long file name support for that drive.
+;---------------------------------------------------------------------------
 !TOPIC 286 @FULL
 !NOINDEX
 !TTY
@@ -7355,6 +8572,29 @@
 characters, and other similar "punctuation" in the function may be interpreted
 as part of the current command, rather than part of a simple text string.
 ;---------------------------------------------------------------------------
+!TOPIC 808 @HDDSIZE
+!NOINDEX
+!TTY
+
+@HDDSIZE[d:,b|k|m|g]:  Returns the size of the entire physical hard disk
+drive to which the specified logical drive belongs, or zero if the specified
+logical drive does not belong to a hard disk drive supported by BIOS Int 13h
+or if the BIOS does not support the Microsoft/IBM/Phoenix Int 13h BIOS
+Extensions for Logical Block Addressing (LBA).
+;---------------------------------------------------------------------------
+!TOPIC 718 @HISTORY
+!NOINDEX
+!TTY
+
+@HISTORY[x[,y]]:  Returns a line or word from the command history. (This
+function will prove most useful in keystroke aliases).  x is the line to
+retrieve (current line = 0), and y is the specific word (first word = 0)
+desired within that line.  If y is omitted, @HISTORY returns the entire
+line.
+
+See 033Command History and Recall for more information about the command
+history.
+;---------------------------------------------------------------------------
 !TOPIC 287 @IF
 !NOINDEX
 !TTY
@@ -7399,7 +8639,7 @@
 second match:
 
     %@index[abcdeabcde,cd,2]
-	
+
 An offset of 0 will return the total number of matches.  A negative offset
 will search from right to left.
 ;---------------------------------------------------------------------------
@@ -7444,23 +8684,134 @@
 !NOINDEX
 !TTY
 
-@INSTR[start,length,string]:  Returns a substring, starting at the
-position start and continuing for length characters.  If the length
-is omitted, it will default to the remainder of the string.  If the
-length is negative, the start is relative to the right side of the
-string.  The first character in the string is numbered 0; if the
-length is negative, the last character is numbered 0.
-
-For example, %@INSTR[0,2,%_TIME] gets the current time and extracts the
-hour; %@INSTR[1,-2,%_TIME] extracts the seconds.
-
-321@SUBSTR is an older version of the same function.
+@INSTR[start,length,string]:  Returns a substring, starting at the
+position start and continuing for length characters.  If the length
+is omitted, it will default to the remainder of the string.  If the
+length is negative, the start is relative to the right side of the
+string.  The first character in the string is numbered 0; if the
+length is negative, the last character is numbered 0.
+
+For example, %@INSTR[0,2,%_TIME] gets the current time and extracts the
+hour; %@INSTR[1,-2,%_TIME] extracts the seconds.
+
+321@SUBSTR is an older version of the same function.
+;---------------------------------------------------------------------------
+!TOPIC 292 @INT
+!NOINDEX
+!TTY
+
+@INT[n]:  Returns the integer part of the number n.
+;---------------------------------------------------------------------------
+!TOPIC 508 @ISALNUM
+!NOINDEX
+!TTY
+
+@ISALNUM[string]:  Returns "1" if string is entirely composed of alphabetic
+(a-z, A-Z) and/or numeric (0-9) characters; "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 509 @ISALPHA
+!NOINDEX
+!TTY
+
+@ISALPHA[string]:  Returns "1" if string is entirely composed of alphabetic
+(a-z, A-Z) characters; "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 510 @ISASCII
+!NOINDEX
+!TTY
+
+@ISASCII[string]:  Returns "1" if string is entirely composed of 7-bit ASCII
+characters (0-7Fh); "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 528 @ISCNTRL
+!NOINDEX
+!TTY
+
+@ISCNTRL[string]:  Returns "1" if string is entirely composed of ASCII
+control characters (0-1Fh or 7Fh); "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 529 @ISDIGIT
+!NOINDEX
+!TTY
+
+@ISDIGIT[string]:  Returns "1" if string is entirely composed of decimal
+digits (0-9); "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 828 @ISLOWER
+!NOINDEX
+!TTY
+
+@ISLOWER[string]:  Returns "1" if string is entirely composed of
+lower-case letters (a-z); "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 458 @ISODOWI
+!NOINDEX
+!TTY
+
+@ISODOWI[date]:  Returns the day of the week for the specified date as an
+integer (1 = Monday, 2 = Tuesday, ... , 6 = Saturday, 7 = Sunday), pursuant
+to ISO 8601.  The date may be in either the local date format, or in ISO
+format with a four-digit year; see 344date formats for more information.
+;---------------------------------------------------------------------------
+!TOPIC 459 @ISOWEEK
+!NOINDEX
+!TTY
+
+@ISOWEEK[date] is the week of the year (1 to 53), pursuant to ISO 8601.
+Week 1 is the one that includes the first Thursday of the year, or
+equivalently, the week which includes 4th of January.  It is possible that
+a January week is 52 or 53, or a December week is 1.  This means that,
+according to ISO 8601, it belongs to the previous or the following calendar
+year, respectively.  The date may be in either the local date format, or in
+ISO format with a four-digit year; see 344date formats for more
+information.
+;---------------------------------------------------------------------------
+!TOPIC 721 @ISOWYEAR
+!NOINDEX
+!TTY
+
+@ISOWYEAR[date] is the year of the ISO 8601 week date.  It may not be
+the calendar year of the entered date but the previous or the following one.
+This means that, according to ISO 8601, the week of the entered date belongs
+to the previous or the following calendar year, respectively.  The date may
+be in either the local date format, or in ISO format with a four-digit year;
+see 344date formats for more information.
+;---------------------------------------------------------------------------
+!TOPIC 530 @ISPRINT
+!NOINDEX
+!TTY
+
+@ISPRINT[string]:  Returns "1" if string is entirely composed of printable
+characters; "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 558 @ISPUNCT
+!NOINDEX
+!TTY
+
+@ISPUNCT[string]:  Returns "1" if string is entirely composed of punctuation
+characters, i.e. printable characters which are not alphanumeric or space;
+"0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 559 @ISSPACE
+!NOINDEX
+!TTY
+
+@ISSPACE[string]:  Returns "1" if string is entirely composed of white space
+characters (9-0Dh or 20h); "0" otherwise.
+;---------------------------------------------------------------------------
+!TOPIC 829 @ISUPPER
+!NOINDEX
+!TTY
+
+@ISUPPER[string]:  Returns "1" if string is entirely composed of
+upper-case letters (A-Z); "0" otherwise.
 ;---------------------------------------------------------------------------
-!TOPIC 292 @INT
+!TOPIC 560 @ISXDIGIT
 !NOINDEX
 !TTY
 
-@INT[n]:  Returns the integer part of the number n.
+@ISXDIGIT[string]:  Returns "1" if string is entirely composed of hexadecimal
+digits (0-9, A-F, a-f); "0" otherwise.
 ;---------------------------------------------------------------------------
 !TOPIC 293 @LABEL
 !NOINDEX
@@ -7468,6 +8819,14 @@
 
 @LABEL[d:]:  Returns the volume label of the specified disk drive.
 ;---------------------------------------------------------------------------
+!TOPIC 730 @LCS
+!NOINDEX
+!TTY
+
+@LCS[string1,string2]:  Returns the Longest Common Subsequence in string1
+and string2.  For example, for the strings "XMJYAUZ" and "MZJAWXU", it is
+"MJAU".
+;---------------------------------------------------------------------------
 !TOPIC 294 @LEFT
 !NOINDEX
 !TTY
@@ -7553,6 +8912,16 @@
 the printer itself, depending on your BIOS and printer port hardware.  You
 may need to experiment to determine what values are returned on your system.
 ;---------------------------------------------------------------------------
+!TOPIC 406 @LTRIM
+!NOINDEX
+!TTY
+
+@LTRIM[chars,string]:  Returns string with all the leading characters in
+chars removed.  For example, %@LTRIM[IJMPX,JP Software] returns " Software".
+The test is case sensitive.  To include a comma in the chars string,
+enclose the entire first argument in double quotes.  @LTRIM will remove the
+quotes before processing the string.
+;---------------------------------------------------------------------------
 !TOPIC 301 @MAKEAGE
 !NOINDEX
 !TTY
@@ -7580,15 +8949,17 @@
 !TTY
 
 @MAKEDATE[n[,format]]:  Returns a date (formatted according to the current
-country settings).  n is the number of days since 1980-01-01.  This is the
-inverse of 250@DATE.  @MAKEDATE takes an optional second argument for the
-date format:
+country settings).  n is the integer number of days since 1980-01-01.  This
+is the inverse of 250@DATE.  @MAKEDATE takes an optional second argument
+for the date format:
 
     0 - system default format
     1 - U.S. format (mm-dd-yy)
     2 - European format (dd-mm-yy)
     3 - Japanese format (yy-mm-dd)
     4 - ISO 8601 international format (yyyy-mm-dd)
+    5 - ISO 8601 international format (yyyy-Www-d) week date
+    6 - ISO 8601 international format (yyyy-ddd) ordinal date
 
 The separator used in the return string depends on the current country
 settings of the system, except for in the ISO 8601 international format,
@@ -7615,6 +8986,15 @@
 
 @MAX[a,b,c,...]:  Returns the largest integer in the list.
 ;---------------------------------------------------------------------------
+!TOPIC 402 @MD5
+!NOINDEX
+!TTY
+
+@MD5[filename]:  Returns the 32 hexadecimal digit MD5 hash of the contents
+of the specified file, or "-1" if the file doesn't exist. The RSA Data
+Security Inc. MD5 message-digest algorithm described in RFC 1321 is used to
+compute the hash value.
+;---------------------------------------------------------------------------
 !TOPIC 343 @MIN
 !NOINDEX
 !TTY
@@ -7629,6 +9009,15 @@
 date may be in either the local date format, or in ISO format with a
 four-digit year; see 344date formats for more information.
 ;---------------------------------------------------------------------------
+!TOPIC 369 @MONTHF
+!NOINDEX
+!TTY
+
+@MONTHF[date]:  Returns the full month name for the specified date
+("January, "February", etc.).  The date may be in either the local date
+format, or in ISO format with a four-digit year; see 344date formats for
+more information.
+;---------------------------------------------------------------------------
 !TOPIC 306 @NAME
 !NOINDEX
 !TTY
@@ -7663,6 +9052,13 @@
 See the notes under 241Variable Functions about quoting returned
 long filenames.
 ;---------------------------------------------------------------------------
+!TOPIC 503 @QUOTE
+!NOINDEX
+!TTY
+
+@QUOTE[filename]:  Returns a double quoted argument, if it contains any
+whitespace characters.
+;---------------------------------------------------------------------------
 !TOPIC 309 @RANDOM
 !NOINDEX
 !TTY
@@ -7670,9 +9066,14 @@
 @RANDOM[min, max]:  Returns a "pseudo-random" value between min and max,
 inclusive.  Min, max, and the returned value are all integers.
 
-The random number generator is initialized from the system clock the first
-time it is used after 4DOS starts, so it will produce a
-different sequence of random numbers each time you use it.
+The pseudo-random number generator is initialized from the system clock the
+first time it is used after 4DOS starts, so it will produce a different
+sequence of random numbers each time you use it.  It can be called up to
+115,792,089,237,316,195,423,570,985,008,687,907,853,269,984,665,640,564,039,
+457,584,007,913,129,639,935 (2^256-1) times before repeating the sequence of
+pseudo-random numbers it produces.  The Xorshift7 generator proposed in the
+paper "On the Xorshift Random Number Generators" by Francois Panneton and
+Pierre L'Ecuyer is used to generate the pseudo-random numbers.
 ;---------------------------------------------------------------------------
 !TOPIC 310 @READSCR
 !NOINDEX
@@ -7703,12 +9104,7 @@
 @READY[d:]:  Returns "1" if the specified drive is ready; otherwise
 returns "0".
 
-Warning:  Some CD-ROM drives may report an incorrect or out-of-date
-status to 4DOS; @READY will not be reliable on these drives.  You may
-need to test for a CD-ROM drive using the 245@CDROM function before
-using @READY:
-
-     if %@cdrom[%drv] ne 1 if %@ready[%drv] == 0 ( echo Error! %+ cancel )
+Warning:  Some CD-ROM drivers may report an incorrect status to 4DOS.
 ;---------------------------------------------------------------------------
 !TOPIC 312 @REMOTE
 !NOINDEX
@@ -7738,6 +9134,12 @@
 the text string with string2.  For example, %@replace[w,ch,warming]
 returns the string "charming".  The search is case-sensitive.
 ;---------------------------------------------------------------------------
+!TOPIC 729 @REVERSE
+!NOINDEX
+!TTY
+
+@REVERSE[string]:  Reverses the order of the characters in string.
+;---------------------------------------------------------------------------
 !TOPIC 316 @RIGHT
 !NOINDEX
 !TTY
@@ -7747,6 +9149,16 @@
 entire string.  For example, %@right[4,jpsoft] returns the string "soft".
 If n is negative, returns all but the leftmost n characters.
 ;---------------------------------------------------------------------------
+!TOPIC 407 @RTRIM
+!NOINDEX
+!TTY
+
+@RTRIM[chars,string]:  Returns string with all the trailing characters in
+chars removed.  For example, %@RTRIM[958NPTX,Windows XP] returns "Windows ".
+The test is case sensitive.  To include a comma in the chars string,
+enclose the entire first argument in double quotes.  @LTRIM will remove the
+quotes before processing the string.
+;---------------------------------------------------------------------------
 !TOPIC 317 @SEARCH
 !NOINDEX
 !TTY
@@ -7780,6 +9192,13 @@
 optional 1 argument after the window title, the list will be sorted
 alphabetically.
 ;---------------------------------------------------------------------------
+!TOPIC 358 @SERIAL
+!NOINDEX
+!TTY
+
+@SERIAL[d:]:  Returns the serial number of the specified disk drive
+(in hex, i.e.: ABCD:1234).
+;---------------------------------------------------------------------------
 !TOPIC 319 @SFN
 !NOINDEX
 !TTY
@@ -7791,6 +9210,57 @@
 including all intermediate paths will be returned in short name format.
 The filename should not be quoted.
 ;---------------------------------------------------------------------------
+!TOPIC 403 @SHA1
+!NOINDEX
+!TTY
+
+@SHA1[filename]:  Returns the 40 hexadecimal digit SHA1 hash of the contents
+of the specified file, or "-1" if the file doesn't exist.  The Secure Hash
+Algorithm 1 (SHA1) described in RFC 4634 is used to compute the hash value.
+;---------------------------------------------------------------------------
+!TOPIC 733 @SIMILAR
+!NOINDEX
+!TTY
+
+@SIMILAR[string1,string2]:  Returns a percentage value (0 - 100) reflecting
+the similarity between string1 and string2.  0 means the two strings have
+nothing in common; 100 means the strings are identical.  Using the longer
+string as the first parameter usually results in lower similarity values and
+using the shorter results in higher values.  The algorithm is the same as in
+the PHP similar_text() function and was derived from the paper "Decision
+Graphs - An Extension of Decision Trees" by Jonathan Oliver.
+;---------------------------------------------------------------------------
+!TOPIC 409 @SMBSTR
+!NOINDEX
+!TTY
+
+@SMBSTR[type,n]:  Returns the nth string of a given type from the System
+Management (SM) BIOS Desktop Management Interface (DMI) data.  If a SMBIOS
+or the requested string is not present, an empty string is returned.  Type
+must be from 0 to 127, inclusively.  The string number n must be positive.
+
+The number of the standardized strings is large (about 60) so a full list is
+not included here - see the System Management BIOS Reference Specification.
+Your BIOS may not include some of the strings and even the included ones may
+be incorrect or not meaningful in some cases.  Here is only a part of them:
+
+     Type  n    Meaning of the string
+     컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴컴
+      0    1    BIOS manufacturer name
+      0    2    BIOS version
+      0    3    BIOS release date
+      1    1    system manufacturer name
+      1    2    system (product) name
+      1    3    system (product) version
+      1    4    system serial number
+      2    1    main board manufacturer name
+      2    2    main board (product) name
+      2    3    main board (product) version
+      2    4    main board serial number
+      4    1    CPU socket designation
+      4    2    CPU manufacturer name
+      4    3    CPU version
+;---------------------------------------------------------------------------
 !TOPIC 320 @STRIP
 !NOINDEX
 !TTY
@@ -7813,6 +9283,12 @@
 position of the substring.  @INSTR, which has the string argument last,
 does not have this limitation.
 ;---------------------------------------------------------------------------
+!TOPIC 722 @SUBST
+!NOINDEX
+!TTY
+
+@SUBST[n,str1, str2]:  Substitutes str1 starting at position n in str2.
+;---------------------------------------------------------------------------
 !TOPIC 322 @TIME
 !NOINDEX
 !TTY
@@ -7849,6 +9325,15 @@
 correctly determine the true name if you use "nested" JOIN or SUBST
 commands, or a network which does not report true names properly.
 ;---------------------------------------------------------------------------
+!TOPIC 408 @TRUNCATE
+!NOINDEX
+!TTY
+
+@TRUNCATE[n]:  Truncate the file opened for write access by 273@FILEOPEN
+at the current position of the file pointer, where n is the value returned
+by 273@FILEOPEN.  Be sure to read the cautionary note about file functions
+under 241Variable Functions.
+;---------------------------------------------------------------------------
 !TOPIC 326 @UNIQUE
 !NOINDEX
 !TTY
@@ -7862,6 +9347,19 @@
 This function allows you to create a temporary file without overwriting an
 existing file.
 ;---------------------------------------------------------------------------
+!TOPIC 504 @UNQUOTE
+!NOINDEX
+!TTY
+
+@UNQUOTE[filename]:  Returns the argument with all double quotes removed.
+;---------------------------------------------------------------------------
+!TOPIC 723 @UNQUOTES
+!NOINDEX
+!TTY
+
+@UNQUOTES[filename]:  Returns the argument with leading and trailing double
+quotes removed.
+;---------------------------------------------------------------------------
 !TOPIC 327 @UPPER
 !NOINDEX
 !TTY
@@ -7909,7 +9407,7 @@
 @WORDS[["xxx",]string]:  Returns the number of words in the string.  The
 first argument is a list of word separators you want to use; if you don't
 specify it, only spaces, tabs, and commas are considered to be word
-separators.
+separators.  See also 449@FIELDS.
 
 If you want to use a double quote as a separator, prefix it with an
 086escape character.  If the string argument is enclosed in quotation
@@ -7987,8 +9485,7 @@
 
      SHELL=d:\path\4DOS.COM [d:\path] [@d:\path\inifile]
            [//iniline]... [/D] [/E:nnnn] [/F] [/L] [/LA] [/LD] [/LF] [/LH]
-;           [/Y] [/P[:filename]] [[/C | /K]command]
-           [/P[:filename]] [[/C | /K]command]
+           [/Y] [/P[:filename]] [[/C | /K]command]
 
 The command (at the prompt, or from within applications) to start 4DOS as
 a secondary shell follows the same format, without the preceeding "SHELL=".
@@ -8041,21 +9538,9 @@
 
      /D:  This option disables execution of 109AUTOEXEC.BAT (or
      the file named in the 375AutoExecPath directive in 4DOS.INI or
-     on the SHELL= line).  It is intended for internal use by MS-DOS 6.0
-     or above (including Windows 95/98), PC DOS 6.0 or above, some very
-     late issues of Novell DOS 7, and by DR-DOS 7.02 or above.
-
-     If you press the F8 key during the boot process, DOS prompts
-     whether to run AUTOEXEC.BAT.  If you answer "No," or had pressed
-     the F5 key to completely bypass the configuration files, the /D
-     switch is used to relay your choice to 4DOS.  (In MS-DOS / PC DOS 5.0
-     COMMAND.COM already supported the /D option, but not the F5 / F8
-     interface, whilst Novell DOS 7 (original issue and early updates)
-     and Caldera OpenDOS 7.01 already supported the F5 / F8 interface,
-     but first used another method to communicate the user choice to
-     COMMAND.COM, which is not currently supported by 4DOS.  Under
-     Windows 95/98 pressing F8 displays a boot menu, from which you
-     can choose how to proceed.)
+     on the SHELL= line).  It is used internally by recent versions of DOS
+     which perform a clean boot or an interactive boot by pressing F5 or
+     F8 at the "Starting DOS..." prompt.
 
      /E:nnnn:  This option sets the size of the 131environment,
      in bytes.  If you don't use this option, 4DOS will allocate 512 bytes
@@ -8094,6 +9579,12 @@
      local command history, and /L forces all four: local aliases, command
      history, functions, and directory history.
 
+     /Y:  This option causes 4DOS to enable the batch file debugger for
+     1094START and AUTOEXEC.BAT (or the file named in the
+     375AutoExecPath directive).  It is used internally by recent
+     versions of DOS which perform an interactive boot if you press F8
+     at the "Starting DOS..." prompt.
+
      /P[:filename]:  This option tells 4DOS to load permanently and to
      run 109AUTOEXEC.BAT.  If you specify a filename after the
      /P, that file will be run instead of AUTOEXEC.BAT.
@@ -8117,21 +9608,6 @@
      option in secondary shells, or you will be unable to return to the
      primary shell.
 
-;     /Y:  This option forces 4DOS to enable the batch file debugger for
-;     1094START and AUTOEXEC.BAT (or the file named in the
-;     375AutoExecPath directive).  It is intended for internal use by
-;     MS-DOS 6.20 or above (including Windows 95/98), PC DOS 6.3 or above,
-;     some very late issues of Novell DOS 7, and by DR-DOS 7.02 or above.
-;
-;     When you press the F8 key to enable single-stepping during the boot
-;     process and then elect to single-step through AUTOEXEC.BAT, the /Y
-;     switch is used to relay your choice to 4DOS.  (The original release of
-;     Novell DOS 7 as well as Caldera OpenDOS 7.01 did support the F5 / F8
-;     interface, but used other means to communicate the user choice
-;     to COMMAND.COM, which are not currently supported by 4DOS.  Under
-;     Windows 95/98 pressing F8 displays a boot menu, from which you can
-;     choose how to proceed.)
-;
      [/C | /K] command:  This option tells 4DOS to run a specific command
      after starting.  The command will be run after 4START and AUTOEXEC.BAT,
      but before displaying the prompt.  The command can be any valid alias,
@@ -8913,7 +10389,7 @@
 
      XMS:  4DOS will swap to XMS extended memory if it is available.  You
      must have an an XMS memory manager and a 80286, 386, 486, Pentium,
-     Pentium Pro, II, III (or compatible) class computer for this option.
+     Pentium Pro, II, III, 4 (or compatible) class computer for this option.
 
      d:\path:  4DOS will create a swap file in the drive and directory
      specified.  The file will be called 4DOSSWAP.nnn where "nnn" is the
@@ -9682,9 +11158,9 @@
 
      c:\> /bin/programs/foo.exe
 
-without having the forward slashes interpreted as switch characters.
-Note that setting UnixPaths to Yes does not change the 4DOS or
-operating system switch character, it's still '/'.  It
+without having the forward slashes interpreted as switch characters.  Note
+that setting UnixPaths to Yes does not change the 4DOS or operating system
+switch character ('/' by default, unless changed by 664SETDOS /W).  It
 simply allows you to put forward slashes in the command name without
 problems.
 
@@ -10779,11 +12255,11 @@
 
 System configuration and status
 
-     598BREAK         603CHCP          604CLS           605COLOR         607CTTY
-     608DATE          613DIRHISTORY    627FREE          632HISTORY       637KEYBD
-     639LH / LOADHIGH 643LOG           648OPTION        645MEMORY        652PROMPT
-     656REBOOT        664SETDOS        668SWAPPING      672TIME          681VER
-     682VERIFY        683VOL
+     598BREAK         603CHCP          604CLS           605COLOR         776COUNTRY
+     607CTTY          608DATE          613DIRHISTORY    627FREE          632HISTORY
+     775IDLE          637KEYBD         639LH / LOADHIGH 643LOG           645MEMORY
+     648OPTION        652PROMPT        656REBOOT        664SETDOS        668SWAPPING
+     672TIME          768TITLE         681VER           682VERIFY        683VOL
 
 File and directory management
 
@@ -10806,11 +12282,12 @@
 work only in batch files; see the individual commands for details)
 
      595ALIAS         597BEEP          599CALL          600CANCEL        610DELAY
-     615DO            621ENDLOCAL      626FOR           696FUNCTION      628GLOBAL
-     629GOSUB         630GOTO          633IF            634IFF           687LFNFOR
-     641LOADBTM       647ON            650PAUSE         654QUIT          657REM
-     659RETURN        665SETLOCAL      666SHIFT         669SWITCH        671TEXT
-     678UNALIAS       699UNFUNCTION
+     714CLOSETRAY     615DO            715EJECTMEDIA    621ENDLOCAL      626FOR
+     696FUNCTION      628GLOBAL        629GOSUB         630GOTO          633IF
+     634IFF           687LFNFOR        641LOADBTM       647ON            650PAUSE
+     654QUIT          657REM           659RETURN        827SETERROR      665SETLOCAL
+     666SHIFT         669SWITCH        671TEXT          774TRANSIENT     678UNALIAS
+     699UNFUNCTION
 
 Environment and path commands
 
@@ -10835,9 +12312,11 @@
      602CDD           Change the current disk drive and directory.
      603CHCP          Display or change the current system code page.
      601CHDIR / CD    Display or change the current directory.
+     714CLOSETRAY     Close the tray of the specified drive(s).
      604CLS           Clear the video display and optionally change colors.
      605COLOR         Change the default display colors.
      606COPY          Copy data between directories, files, or devices.
+     776COUNTRY       Display or change the current country.
      607CTTY          Change the default console device.
      608DATE          Display and optionally change the system date.
      609DEL / ERASE   Delete one or more files.
@@ -10854,6 +12333,7 @@
      689ECHOERR       Display a message to standard error.
      620ECHOS         Display a message without a trailing CR/LF.
      690ECHOSERR      Display a message without a trailing CR/LF to std error.
+     715EJECTMEDIA    Eject removable media in the specified drive(s).
      621ENDLOCAL      Restore the information saved by SETLOCAL.
      609ERASE / DEL   Delete one or more files.
      622ESET          Edit environment variables and aliases.
@@ -10869,6 +12349,7 @@
      697HEAD          Display the first part of a file.
      631HELP          Display help for internal and external commands.
      632HISTORY       Display, add to, clear, or read the history list.
+     775IDLE          Turn dynamic idle detection on or off in DR DOS.
      633IF            Execute a command if specified conditions are true.
      634IFF           Perform IF / THEN / ELSE conditional execution.
      635INKEY         Get a single keystroke from the user.
@@ -10895,7 +12376,7 @@
      653PUSHD         Save the current directory and change to a new directory.
      654QUIT          Terminate the current batch file.
      655RD / RMDIR    Remove one or more subdirectories.
-     656REBOOT        Do a warm or cold system reboot.
+     656REBOOT        Do a warm or cold system reboot or change power state.
      657REM           Put a comment in a batch file.
      658REN / RENAME  Rename files or subdirectories.
      659RETURN        Return from a GOSUB (subroutine) in a batch file.
@@ -10905,6 +12386,7 @@
      662SELECT        Interactively select files for a command.
      663SET           Display, create, modify, or delete environment variables.
      664SETDOS        Modify some of the 4DOS configuration settings.
+     827SETERROR      Set the ERRORLEVEL value and the DOS error code.
      665SETLOCAL      Save the directory, environment, aliases and other data.
      666SHIFT         Shift batch file arguments.
      667START         Start a program in another OS/2 session.
@@ -10915,7 +12397,9 @@
      671TEXT          Display a block of text in a batch file.
      672TIME          Display or set the current system time.
      673TIMER         Start, stop, or display the value of a stopwatch.
+     768TITLE         Set window title.
      674TOUCH         Change file dates and times.
+     774TRANSIENT     Toggle shell transient mode.
      675TREE          Display the directory tree.
      676TRUENAME      Find the true path and file name for a file.
      677TYPE          Display the contents of the specified file(s).
@@ -11201,6 +12685,13 @@
 
      c:\> alias list
 
+And you can view the definitions for all aliases matching a specific pattern
+by specifying a single parameter containing 073wildcards.  For example:
+
+     c:\> alias *win*
+
+will display all aliases containing the string win.
+
 Saving and Reloading Your Aliases
 
 You can save your aliases to a file called ALIAS.LST this way:
@@ -11391,7 +12882,7 @@
 
 Purpose:  Change or view file and subdirectory attributes.
 
-Format:   ATTRIB [/A:[[+|-]rhsad] /D /E /I"text" /P /Q /S] [+|-[AHRS]]
+Format:   ATTRIB [/A:[[+|-]rhsad] /D /E /I"text" /N /P /Q /S] [+|-[AHRS]]
           [@file] files ...
 
           files:  A file, directory, or list of files or directories on
@@ -11400,10 +12891,10 @@
                   to operate, one per line (see 057@file lists for
                   details).
 
-          /A: (Attribute select)      /P(ause)
-          /D(irectories)              /Q(uiet)
-          /E (no error messages)      /S(ubdirectories)
-          /I (match descriptions)
+          /A: (Attribute select)      /N(othing)
+          /D(irectories)              /P(ause)
+          /E (no error messages)      /Q(uiet)
+          /I (match descriptions)     /S(ubdirectories)
 
           Attribute flags:
 
@@ -11533,6 +13024,10 @@
      description with /I"[?]*", or all filenames that do not have
      a description with /I"[]".
 
+     /N:  (Nothing) Do everything except actually change attributes.  This
+     option is useful for testing what the result of a complex ATTRIB
+     command will be.
+
      /P:  (Pause) Wait for a key to be pressed after each screen page
      before continuing the display.  Your options at the prompt are
      explained in detail under 045Page and File Prompts.
@@ -11963,6 +13458,32 @@
 See your 65535DOS or OS/2 documentation for more information on CHCP,
 NLSFUNC, and MODE.
 ;---------------------------------------------------------------------------
+!TOPIC 714 CLOSETRAY
+!TTY
+
+Purpose:  Close the tray of the specified drive(s).
+
+Format:   CLOSETRAY [drive: ...]
+
+          drive:  The drive or list of drives whose tray to close.
+!TTY
+
+See also: 715EJECTMEDIA.
+
+Usage
+
+CLOSETRAY will close the trays of CD-ROMs, DVDs, etc.
+
+If no drives are specified, 4DOS will attempt to close the tray of the first
+CD-ROM (DVD) drive.
+
+Note:  DOS kernels don't support CD-ROMs or DVDs directly; a CD-ROM driver
+and CD extensions must be installed or the CLOSETRAY command will not work.
+Windows 95/98/ME and OS/2 version 3.x and above don't need them; they have
+its own CD-ROM driver and support.
+
+Note 2: This command is called LOADMEDIA in 0204NT.
+;---------------------------------------------------------------------------
 !TOPIC 604 CLS
 !TTY
 
@@ -12448,6 +13969,68 @@
      destination file has its read-only attribute set.
 !INDENT 0
 ;---------------------------------------------------------------------------
+!TOPIC 776 COUNTRY
+!TTY
+
+Purpose:  Display or change the current country.
+
+Format:   COUNTRY [n]
+
+          n:  A country code.
+!TTY
+
+Usage
+
+COUNTRY can change "on the fly" the current country-specific DOS conventions
+for displaying times, dates and currency, for determining the order by which
+characters are sorted, and for determing which characters can be used in
+filenames.  It affects all DOS programs and not just 4DOS.  It can configure
+them to recognize the punctuation conventions observed when using a language
+supported by the currently running version of DOS.
+
+Country settings are usually set by a COUNTRY= directive in your CONFIG.SYS
+file.  To change the current country settings using the COUNTRY command of
+4DOS without a reboot, you must be running MS-DOS or PC DOS 3.0 or later.
+
+If you enter COUNTRY without a country code, the current country code is
+displayed.
+
+If you enter COUNTRY plus a country code, the country settings are
+changed.  For example, to set the country settings to those for Germany:
+
+     c:\> country 49
+
+The country codes supported by MS-DOS 6.22 are shown bellow in the table
+below.  Note that the older DOS versions support only a subset of these
+codes.  PC DOS 2000 supports only a subset of these codes too, but supports
+also a few additional ones.  For the actual country codes supported by your
+version of DOS, see 65535its documentation.  The leading zero(s) may be
+omitted.
+
+Albania. . . . . . 355     Germany. . . . . . 049     PR of China. . . . 086
+Arabic Countries . 785     Greece . . . . . . 030     Poland . . . . . . 048
+Argentina. . . . . 054     Hong Kong. . . . . 852     Portugal . . . . . 351
+Australia. . . . . 061     Hungary. . . . . . 036     Romania. . . . . . 040
+Austria. . . . . . 043     Iceland. . . . . . 354     Russia . . . . . . 007
+Belgium. . . . . . 032     India. . . . . . . 091     Serbia/Montenegro. 381
+Bosnia/Herzegovina 387     Internat. English. 061     Singapore. . . . . 065
+Brazil . . . . . . 055     Ireland. . . . . . 353     Slovakia . . . . . 421
+Bulgaria . . . . . 035|359 Israel . . . . . . 972     Slovenia . . . . . 386
+Canada French. . . 002     Italy. . . . . . . 039     South Africa . . . 027
+Canada English . . 004     Japan. . . . . . . 081     Spain. . . . . . . 034
+Chile. . . . . . . 056     Korea. . . . . . . 082     Sweden . . . . . . 046
+Colombia . . . . . 057     Latin America. . . 003     Switzerland. . . . 041
+Croatia. . . . . . 384     Macedonia [FYR of] 389     Taiwan [Ch.Taipei] 886
+Czech Republic . . 042     Malaysia . . . . . 060     Turkey . . . . . . 090
+Denmark. . . . . . 045     Mexico . . . . . . 052     United Kingdom . . 044
+Ecuador. . . . . . 593     Netherlands. . . . 031     United States. . . 001
+Finland. . . . . . 358     New Zealand. . . . 064     Venezuela. . . . . 058
+France . . . . . . 033     Norway . . . . . . 047     Yugoslavia . . . . 038
+
+Before using COUNTRY, you must make sure the information file (COUNTRY.SYS)
+is available and load national language support (using the NLSFUNC command).
+See your 65535DOS documentation for more information on NLSFUNC.
+;---------------------------------------------------------------------------
 !TOPIC 607 CTTY
 !TTY
 
@@ -12525,7 +14108,10 @@
 When entering the date, use the correct format for the country setting
 currently in effect on your system.
 
-You can also use the ISO 8601 international date format "yyyy-mm-dd".
+You can also use the ISO 8601 international date format "yyyy-mm-dd",
+the ISO 8601 week date format "yyyy-Www-d", where yyyy = year, ww = week,
+d = week day, or the ISO 8601 ordinal date format "yyyy-ddd", where
+yyyy = year, ddd = day of the year.
 
 Options
 
@@ -12768,8 +14354,8 @@
         delay 15
      enddo
 
-The time value can be as large as 3600 seconds (one hour).  The
-minimum millisecond resolution in DOS is about 55ms.
+The time value can be as large as 1,073,741,823 seconds (over 34 years!).
+If you don't enter a time, the default is 1 second.
 
 4DOS uses the minimum possible processor time during a DELAY,
 in order to allow other applications full use of system resources.
@@ -12859,10 +14445,10 @@
 
 Each description can be up to 511 characters long.  You can change this
 limit with the 422DescriptionMax directive in 4DOS.INI.  In order to fit
-your descriptions on a single line in a standard DIR display, keep them to 40
-characters or less (longer descriptions are wrapped in the DIR
-output).  DESCRIBE can edit descriptions longer than DescriptionMax (up to
-511 characters), but will not allow you to lengthen the existing text.
+your descriptions on a single line in a standard DIR display, keep them to
+39 characters or less (longer descriptions are wrapped in the DIR output).
+DESCRIBE can edit descriptions longer than DescriptionMax (up to 511
+characters), but will not allow you to lengthen the existing text.
 
 The descriptions are stored in each directory in a hidden file called
 DESCRIPT.ION.  Use the 596ATTRIB command to remove the hidden attribute
@@ -12949,7 +14535,7 @@
           /A (Attribute select)       /O(rder)
           /B(are)                     /P(ause)
           /C[HP] (Compression)        /R (disable wRap)
-          /D(isable colour)           /S(ubdirectories)
+          /D(isable color)            /S(ubdirectories)
           /E (use upper case)         /T (aTtribute)
           /F(ull path)                /U (sUmmary information)
           /G (allocated size)         /V(ertical sort)
@@ -13142,7 +14728,7 @@
      c:\> dir /o:-d
 
 When displaying file descriptions, DIR wraps long lines to fit on the
-screen.  DIR displays a maximum of 40 characters of text in each line of a
+screen.  DIR displays a maximum of 39 characters of text in each line of a
 description, unless your screen width allows a wider display.  If you
 disable description wrapping with the /R option, the description is
 truncated at the right edge of the screen, and a right arrow [] is added at
@@ -13231,8 +14817,8 @@
 The /4 option is similar to /2, but displays directory information in 4
 columns.  On drives which do not support long filenames, or when the /Z
 or /X is used (see below), the display shows the file name and the file
-size in kilobytes (KB) or megabytes (MB), with "<D>" in the size column for
-directories.
+size in kilobytes (KB), megabytes (MB) or gigabytes (GB), with "<D>" in the
+size column for directories.
 
 The /W option displays directory information in 5 or more columns,
 depending on your screen width.  Each entry in a DIR /W display contains
@@ -13416,9 +15002,10 @@
      Column Displays above for more details.
 
      /4:  (Four columns) Display just the name (on LFN drives), or display
-     the filename and size, in K (kilobytes) or M (megabytes) on other drives,
-     with files between 1 and 9.9 megabytes in size displayed in tenths (i.e.
-     "2.4M").  See Multiple Column Displays above for more details.
+     the filename and size, in K (kilobytes), M (megabytes) or G (gigabytes)
+     on other drives, with files between 1 and 9.9 megabytes and files over
+     1 gigabyte in size displayed in tenths (i.e. "2.4M").  See Multiple
+     Column Displays above for more details.
 
      /A:  (Attribute select) Display only those files that have the
      specified attribute(s) set.  The colon [:] after /A is optional.
@@ -13753,8 +15340,8 @@
 directory stack, a list that 4DOS maintains in memory.  The POPD command
 removes the top entry of the directory stack and makes that drive and
 directory the new default.  The DIRS command displays the contents of the
-directory stack, with the most recent entries on top (i.e., the next POPD
-will retrieve the first entry that DIRS displays).
+directory stack, with the most recent entries last (i.e., the next POPD
+will retrieve the last entry that DIRS displays).
 
 The directory stack holds 511 characters, enough for 20 to 40 typical drive
 and directory entries.
@@ -14368,6 +15955,30 @@
 state.  Use 619ECHO to control echoing of commands in a batch file or
 at the prompt.
 ;---------------------------------------------------------------------------
+!TOPIC 715 EJECTMEDIA
+!TTY
+
+Purpose:  Eject removable media in the specified drive(s).
+
+Format:   EJECTMEDIA [drive: ...]
+
+          drive:  The drive or list of drives whose media to eject.
+!TTY
+
+See also: 714CLOSETRAY.
+
+Usage
+
+EJECTMEDIA will eject removable media, such as CD-ROMs, DVDs, etc.
+
+If no drives are specified, 4DOS will attempt to eject the media of the first
+CD-ROM (DVD) drive.
+
+Note:  DOS kernels don't support CD-ROMs or DVDs directly; a CD-ROM driver
+and CD extensions must be installed or the EJECTMEDIA command will not work.
+Windows 95/98/ME and OS/2 version 3.x and above don't need them; they have
+its own CD-ROM driver and support.
+;---------------------------------------------------------------------------
 !TOPIC 621 ENDLOCAL
 !TTY
 
@@ -14951,8 +16562,8 @@
 FOR includes a large number of options, some of which duplicate functions
 available in other 4DOS commands, and/or do not follow conventions you may
 find in our other commands.  Most of these extra options are included for
-compatibility with CMD.EXE in Windows NT, 2000, and XP.  However, we make
-them available in 4DOS, 0204NT, and 021Take Command so that aliases
+compatibility with CMD.EXE in the 25Windows NT line.  However, we make
+them available in 4DOS, 0204NT, and Take Command so that aliases
 and batch files which use them can work under all three products.
 
 The first three sections below ("Working with Files", "Working with Text", and
@@ -15380,7 +16991,13 @@
 
 If you invoke FUNCTION with no parameters, it will display the current
 function list.  If you include a name, with no equals sign or value,
-FUNCTION will display the current definition of that function.
+FUNCTION will display the current definition of that function.  The name
+may include 073wildcards, in which case FUNCTION will display the
+current values, if any, of all functions matching that name.  For example
+
+     function *dx*
+
+will display all functions which contain dx in their name.
 
 If you include the equals sign and value, FUNCTION will create or update the
 function referred to by name.
@@ -15643,7 +17260,10 @@
 the one immediately after the label.  The label must begin with a colon
 [:] and appear on a line by itself.  The colon is required on the line
 where the label is defined, but is not required in the GOTO command
-itself.  Case differences are ignored when matching labels.
+itself.  Case differences are ignored when matching labels.  Note: The
+COMMAND.COM limitation that only the first 8 characters in labels are used
+does not exist in 4DOS.  Batch files relying on this limitation may not run
+correctly under 4DOS.
 
 This batch file fragment checks for the existence of the file CONFIG.SYS.  If
 the file exists, the batch file jumps to C_EXISTS and copies all the
@@ -15666,7 +17286,7 @@
 /I) may not branch to any label that is between an IFF and the
 corresponding ENDIFF or between a DO and the corresponding ENDDO.
 
-For compatibility with CMD.EXE in Windows NT/2000/XP, the command
+For compatibility with CMD.EXE in the 25Windows NT line, the command
 
      GOTO :EOF
 
@@ -15903,6 +17523,28 @@
      this method to exceed the command line length limit.
 !INDENT 0
 ;---------------------------------------------------------------------------
+!TOPIC 775 IDLE
+!TTY
+
+Purpose:  Display, enable, or disable dynamic idle detection in DR DOS.
+
+Format:   IDLE [ON | OFF]
+!TTY
+
+Usage
+
+The IDLE command enables and disables the BatteryMAX ($IDLE$) device
+driver.  IDLE OFF disables the device driver, while IDLE ON enables the
+device driver.  The default state is enabled.  If the driver is not
+installed, an error is returned.  The BatteryMAX ($IDLE$) driver is part
+of both the DR DOS Power Management SDK and the DR DOS System Builder Kit.
+
+You may wish to disable idle detection if it affects one of your
+applications adversely, or if you want to demonstrate the benefits of idle
+detection to yourself or others.
+
+The IDLE command is valid only under DR DOS version 5.0 or later.
+;---------------------------------------------------------------------------
 !TOPIC 633 IF
 !TTY
 
@@ -15984,6 +17626,7 @@
      LE           string1 less than or equal to string2
      GE           string1 greater than or equal to string2
      GT           string1 greater than string2
+     EQC          string1 equal to string2, including character case
 
 When IF compares two character strings, it will use either a numeric
 comparison or a string comparison.  A numeric comparison treats the
@@ -16010,10 +17653,10 @@
 double quotes around the values you are testing, as shown above.  Because
 the double quote is not a numeric character, IF performs a string comparison.
 
-Case differences are ignored in string comparisons.  If two strings begin
-with the same text but one is shorter, the shorter string is considered to
-be "less than" the longer one.  For example, "a" is less than "abc", and
-"hello_there" is greater than "hello".
+Case differences are ignored in string comparisons (except by EQC).  If two
+strings begin with the same text but one is shorter, the shorter string is
+considered to be "less than" the longer one.  For example, "a" is less than
+"abc", and "hello_there" is greater than "hello".
 
 When you compare text strings, you may need to enclose the arguments
 in double quotes in order to avoid syntax errors which can occur if
@@ -16413,10 +18056,9 @@
 
 In 4DOS you can 052pipe text to INPUT from another command, which will
 stash the first line of the command's output in the specified
-variable.  However, this trick will not work in 0204NT or
-021Take Command, which implement pipes differently.  The 265@EXECSTR
-function provides a more portable way to get the first line of a command's
-output.
+variable.  However, this trick will not work in 0204NT or Take Command,
+which implement pipes differently.  The 265@EXECSTR function provides a
+more portable way to get the first line of a command's output.
 
 Options
 
@@ -16820,18 +18462,19 @@
 
 Purpose:  Display a file, with forward and backward paging and scrolling.
 
-Format:   LIST [/A:[[+|-]rhsad] /H /I /I"text" /R /S /T"text" /W /X]
+Format:   LIST [/A:[[+|-]rhsad] /H /I /I"text" /Ln /N /R /S /T"text" /W /X]
           [@file] file...
 
           file:   A file or list of files to display.
           @file:  A text file containing the names of files to view,
                   one per line (see 057@file lists for details).
 
-          /A: (Attribute select)       /S(tandard input)
-          /H(igh bit off)              /T (search for text)
-          /I(gnore wildcards)          /W(rap)
-          /I"text" (match description) /X (heX display mode)
-          /R(everse)
+          /A: (Attribute select)       /R(everse)
+          /H(igh bit off)              /S(tandard input)
+          /I(gnore wildcards)          /T (search for text)
+          /I"text" (match description) /W(rap)
+          /L(ine offset)               /X (heX display mode)
+          /N (line Numbers)
 !TTY
 
 See also: 697HEAD, 698TAIL, and 677TYPE.
@@ -16888,6 +18531,7 @@
      H            Toggle the "strip high bit" (/H) option.
      I            Display information on the current file (the full
                   name, size, date, and time).
+     L            Toggle the "line numbering" (/L) option.
      N            Find next matching string.
      Ctrl-N       Find previous match in the file.
      P            Print the current page or the entire file.
@@ -16895,13 +18539,16 @@
      X            Toggle the hex-mode display (/X) option.
 
 Text searches performed with F, N, Ctrl-F, and Ctrl-N are not
-case-sensitive.  However, if the display is currently in hexadecimal mode
-and you press F or Ctrl-F, you will be prompted for whether you want to
-search in hexadecimal mode.  If you answer Y, you should then enter the
-search string as a sequence of 2-digit hexadecimal numbers separated by
-spaces, for example 41 63 65 (these are the ASCII values for the string
-"Ace"; see 912ASCII for a complete list of ASCII codes).  Hexadecimal
-searches are case-sensitive, and search for exactly the string you enter.
+case-sensitive unless you hold a Shift key while pressing F or Ctrl-F,
+in which case the searches become case-sensitive.
+
+If the display is currently in hexadecimal mode and you press F or Ctrl-F,
+you will be prompted for whether you want to search in hexadecimal mode.  If
+you answer Y, you should then enter the search string as a sequence of
+2-digit hexadecimal numbers separated by spaces, for example 41 63 65 (these
+are the 912ASCII values for the string "Ace").  Hexadecimal searches are
+case-sensitive, and search for exactly the string whose ASCII values you
+enter.  The string can be any sequence of bytes in this mode, not just text.
 
 When the search string is found LIST displays the line containing the string
 at the top of the screen, and highlights the string it found.  Any
@@ -17032,6 +18679,17 @@
      description with /I"[?]*", or all filenames that do not have
      a description with /I"[]".
 
+     /Ln: (Line offset) Start at line n (no space is allowed between L and
+     n).  This option only affects the initial page display; it does not
+     prevent you from subsequently scrolling back to the start of the file.
+     If /X is also specified, n designates a hexadecimal offset from the
+     start of file.  Thus, the /L option is equivalent to the G (goto) key.
+
+     /N:  (line numbers) Display line numbers.  This option is useful with
+     source code listings and other text files where the exact line numbers
+     are important.  You can toggle this option on and off from within LIST
+     with the L key.
+
      /R:  (Reverse) Only meaningful when used in conjuction with the
      /T "text" option.  Directs LIST to search for text from the end of
      the file instead of from the beginning of the file.  Using this switch
@@ -17071,6 +18729,10 @@
      initiates a search in the first file.  It is ignored for the second and
      subsequent files.  Also see /I and /R.
 
+     If /X is also given, the argument of /T must be an enclosed in double
+     quotes sequence of 2-digit hexadecimal numbers separated by spaces, for
+     example "E8 0C 66 01 00".
+
 !INDENT 5 5 0 5
      /W:  (Wrap) Wrap the text at the right edge of the screen.  This
      option is useful when displaying files that don't have a carriage
@@ -17340,7 +19002,7 @@
 MEMORY lists the amount of total RAM in your system and the amount
 available for applications after DOS, 4DOS, and memory-resident programs
 have been loaded; the amount of EMS expanded memory, XMS extended memory,
-and non-XMS extended memory; the HMA status; and the amount of memory 4DOS
+and total extended memory; the HMA status; and the amount of memory 4DOS
 is using for environment variable space, alias space, function space, and
 history space.
 
@@ -17998,6 +19660,7 @@
 The prompt text can contain special character sequences in the form $?,
 where ? is one of the characters listed below:
 
+     a    The ampersand character [&].
      b    The vertical bar character [|].
      c    The open parenthesis [(].
      d    Current date, in the format:  Mon  6-19-00 (the month, day,
@@ -18011,6 +19674,7 @@
      i    Display the OS/2 prompt header line, which reminds you of how
           to return to the OS/2 desktop, or get help.
      J    Date in ISO 8601 international format (yyyy-mm-dd).
+     K    Date in ISO 8601 week date format (yyyy-Www-d).
      l    The < character.
      m    Time in hours and minutes using 24-hour format.
      M    Time in hours and minutes using the default country format and
@@ -18067,10 +19731,10 @@
 default value.  The current setting of the PROMPT will be stored in an
 environment variable named 139PROMPT.
 
-If 4DOS is running in Windows 95/98/ME, PROMPT will look for the environment
-variable 146TITLEPROMPT and use its contents to build a prompt in the
-title bar.  Note that 4DOS is limited to a maximum of 79 characters in the
-title bar.
+If 4DOS is running in Windows 95/98/ME or under OS/2, PROMPT will look for
+the environment variable 146TITLEPROMPT and use its contents to build a
+prompt in the title bar.  Note that 4DOS is limited to a maximum of 79
+characters in the title bar.
 
 Along with literal text, special characters, and 915ANSI sequences, you
 can include any 131environment variable, 161internal variable, or
@@ -18247,12 +19911,6 @@
 directory above the current directory in the directory tree, or any
 directory in use by another process in a multitasking system.
 
-You also cannot remove subdirectories which have the hidden or system
-attributes set.  (The read-only attribute has no effect on subdirectories
-in DOS, but may prevent removal in other operating systems.)  To remove
-subdirectories which have these attributes set, first remove the attributes
-using 596ATTRIB /D.
-
 Option
 
 !INDENT 5 5 0 5
@@ -18268,27 +19926,34 @@
 !TOPIC 656 REBOOT
 !TTY
 
-Purpose:  Do a warm or cold system reboot.
+Purpose:  Do a warm or cold system reboot or change the power state.
 
-Format:   REBOOT [/C /V]
+Format:   REBOOT [/C /M /P /S /V]
 
-          /C(old reboot)              /V(erify)
+          /C(old reboot)              /S(uspend)
+          /M(onitor off)              /V(erify)
+          /P(ower off)
 !TTY
 
 Usage
 
-REBOOT will completely restart your computer.  It normally performs a warm
-reboot, which is comparable to pressing Ctrl-Alt-Delete.  REBOOT can also
-perform a cold reboot, which is comparable to turning the power off and
-back on or pressing the reset button.  A reboot is necessary to activate
-any changes to your CONFIG.SYS file, and may also be used if you wish to
-restart DOS with an altered 4START or AUTOEXEC.BAT file.
+REBOOT will completely restart your computer or change its power state.  It
+normally performs a "warm" reboot, which is comparable to pressing
+Ctrl-Alt-Del.  REBOOT can also perform a "cold" reboot, which is comparable
+to turning the power off and back on or pressing the reset button.  Finally,
+REBOOT can change the power state of systems equipped with APM.  A reboot is
+necessary to activate any changes to your CONFIG.SYS file, and may also be
+used if you wish to restart DOS with an altered 4START or AUTOEXEC.BAT file.
+Turning the monitor off and / or entering system suspend state saves energy
+and reduces the dissipated heat into the air.
 
-REBOOT defaults to performing a warm boot, with no prompting.
+REBOOT defaults to performing a "warm" boot, with no prompting.
 
-4DOS executes the contents of your 1094EXIT file, if any.  Then 4DOS
-flushes the disk buffers, resets the drives, and waits one second before
-rebooting, to allow disk caching programs to finish writing any cached data.
+Unless the /M or /S option is given, 4DOS executes the contents of your
+1094EXIT file, if any, then flushes any SMARTDRV or compatible disk
+caching program and the disk buffers, resets the drives, and waits two
+seconds before rebooting or turning power off, to allow disk caching
+programs to finish writing any cached data.
 
 Some system BIOSes, memory managers, multitaskers, or memory-resident
 programs (TSRs) may intercept attempts to reboot your system and defeat
@@ -18298,8 +19963,10 @@
 hardware and software configuration, and under rare circumstances REBOOT
 may not be usable on your system.
 
-REBOOT will not work properly from 4DOS while running under Windows 95/98/ME
-(at most, it will shut down the 4DOS session, but not Windows itself).
+WARNING: Under Windows, REBOOT does not attempt to terminate any processes
+so if a program does a disk write at the time of reboot or its work file has
+not been saved, data loss may be possible!  Make sure that no other programs
+are running before issuing this command under any multitasking environments.
 
 Options
 
@@ -18311,11 +19978,33 @@
      REBOOT /C may not physically reset all hardware devices as
      thoroughly as actually turning off the power; its effect
      depends on the internal design of each hardware device and
-     on your system configuration.  This option will not work
-     under Windows 95/98/ME.
+     on your system configuration.
+
+!INDENT 5 5 0 5
+     /M:  (Monitor off) Shut off the display, if the system has a VESA
+     BIOS and VESA Display Power Management Signalling is supported.  The
+     monitor is turned back on when a typematic key is pressed.  Like /S,
+     this option does not actually reboot.
+
+!INDENT 5 5 5 5
+     If the current video mode is not supported by the VESA BIOS, it may
+     switch the display to a supported mode (usually a text mode) before
+     it turns the monitor off.
+
+!INDENT 5 5 0 5
+     /P:  (Power off) Turn power off, if the system has APM version 1.1
+     or newer, else reboot only if /C is also given, otherwise return an
+     error code.  REBOOT /P will not work properly under OS/2.
 
 !INDENT 5 5 0 5
-     /V:  (Verify) Prompt for confirmation (Y or N) before rebooting.
+     /S:  (Suspend) Enter suspend state, if the system has APM version
+     1.1 or newer.  Suspend state ends when a key (even non-typematic) is
+     pressed, or when the mouse or its wheel is moved, or a mouse button
+     clicked on.  Like /M, this option does not actually reboot.
+
+!INDENT 5 5 0 5
+     /V:  (Verify) Prompt for confirmation (Y or N) before rebooting or
+     changing the power state.
 !INDENT 0
 ;---------------------------------------------------------------------------
 !TOPIC 657 REM
@@ -19015,14 +20704,15 @@
 
 Purpose:  Display, create, modify, or delete environment variables.
 
-Format:   SET [/A /M /P /R file...] [name[=][value]]
+Format:   SET [/A /E /M /P /R file...] [name[=][value]]
 
           file:   One or more files containing variable definitions.
           name:   The name of the environment variable to define or modify.
           value:  The new value for the variable.
 
           /A(rithmetic)               /P(ause)
-          /M(aster)                   /R(ead from file)
+          /E(nvironment)              /R(ead from file)
+          /M(aster)
 !TTY
 
 See also: 622ESET and 680UNSET.
@@ -19067,6 +20757,9 @@
 
      c:\> set mine
 
+If the name contains one or more 073wildcards, SET will display all
+matching environment variables.
+
 You can edit environment variables with the 622ESET command.  To remove
 variables from the environment, use 680UNSET, or type SET plus a
 variable name and an equal sign:
@@ -19108,10 +20801,15 @@
      function should be used instead of SET /A.
 
 !INDENT 5 5 0 5
+     /E:  (Environment) When used together with /M, set both the master and
+     local environments.  Note: SET /E /M does not propagate to any other
+     environment instances.  For example, if you do it in a 4th level 4DOS,
+     the top level (master) and the current (local) environments are modified,
+     but the level 2 and level 3 environments are not.
+
      /M:  (Master) Display or modify the master environment rather than
      the local environment.  This option is only useful in secondary
-     shells.  Bug:  SET /M fails to capitalize the variable name; you
-     should specify the variable name in uppercase if you use this option.
+     shells.
 
      /P:  (Pause) Wait for a key to be pressed after each screen page before
      continuing the display.  Your options at the prompt are
@@ -19223,11 +20921,13 @@
 !INDENT 5 5 5 5
           c:\> setdos /c~
 
-     If you want to share batch files or aliases between 4DOS and 0204NT
-     or 021Take Command, see the 166%+ variable, which retrieves the
-     current command separator, and 054Special Character Compatibility
-     for details on using compatible command separators for all the products
-     you use.  Also see the 418CommandSep directive.
+     (You can specify either the character itself, or its ASCII code as a
+     decimal number, or a hexadecimal number preceded by 0x.)  If you want
+     to share batch files or aliases between 4DOS and 0204NT or 021Take
+     Command, see the 166%+ variable, which retrieves the current command
+     separator, and 054Special Character Compatibility for details on using
+     compatible command separators for all the products you use.  Also see the
+     418CommandSep directive.
 
 !INDENT 5 5 0 5
      /D:  (Descriptions) This option controls whether file
@@ -19258,17 +20958,18 @@
      character following the 086escape character will be
      passed unmodified to the command.  The default escape
      character is Ctrl-X (ASCII 24, which appears on screen as an
-     up-arrow []).  You cannot use any of the
-     redirection characters [<>|] or the blank, tab, comma, or
-     equal sign as the escape character.  The escape character is saved by
-     665SETLOCAL and restored by 621ENDLOCAL.  Certain characters
-     (b, c, e, f, k, n, q, r, s, and t)
+     up-arrow []).  (You can specify either the character itself, or
+     its ASCII code as a decimal number, or a hexadecimal number preceded by
+     0x.)  You cannot use any of the redirection characters [<>|] or the
+     blank, tab, comma, or equal sign as the escape character.  The escape
+     character is saved by 665SETLOCAL and restored by 621ENDLOCAL.
+     Certain characters (b, c, e, f, k, n, q, r, s, and t)
      have special meanings when immediately preceded by the
      escape character.
 
 !INDENT 5 5 5 5
      If you want to share batch files or aliases between 4DOS and
-     4OS2, 0204NT, or 021Take Command, see the 165%= variable,
+     4OS2, 0204NT, or Take Command, see the 165%= variable,
      which retrieves the current escape character, and 054Special
      Character Compatibility for details on using compatible escape
      characters for all the products you use.  Also see the 426EscapeChar
@@ -19368,15 +21069,16 @@
      after a percent sign to specify all or all remaining
      command-line arguments in a 102batch file, 101alias, or
      696user-defined function (e.g., %& or %n&).  The default is the
-     ampersand [&].  The parameter character is saved by 665SETLOCAL
-     and restored by 621ENDLOCAL.
+     ampersand [&].  (You can specify either the character itself, or its
+     ASCII code as a decimal number, or a hexadecimal number preceded by
+     0x.)  The parameter character is saved by 665SETLOCAL and restored
+     by 621ENDLOCAL.
 
 !INDENT 5 5 5 5
      If you want to share batch files or aliases between 4DOS and
-     0204NT or 021Take Command, see 054Special Character
-     Compatibility for details on selecting compatible parameter characters
-     for all the products you use.  Also see the 439ParameterChar
-     directive.
+     0204NT or Take Command, see 054Special Character Compatibility
+     for details on selecting compatible parameter characters for all the
+     products you use.  Also see the 439ParameterChar directive.
 
 !INDENT 5 5 0 5
      /R:  (Rows) This option sets the number of screen rows used by
@@ -19438,14 +21140,11 @@
      112Debugging Batch Files.
 
 !INDENT 5 5 0 5
-     /W:  (Switch character) This option sets the DOS switch
-     character (normally a slash [/]).  It will not work in most
-     current versions of MS-DOS or PC DOS, or under Windows 95/98/ME,
-     as all of these operating systems ignore switch character changes.
-     It is included only for compatibility with older versions of DOS,
-     any issue of DR-DOS, and some special-purpose DOS-compatible systems
-     which allow switch character changes, and even in those environments
-     the DOS switch character setting may be ignored by application programs.
+     /W:  (Switch character) This option sets the DOS switch character
+     (normally a slash [/]).  It will not work in Datalight ROM-DOS.
+     The DOS switch character setting may be ignored by application programs.
+     Note that setting the switch character to anything but a slash [/]
+     will probably break all of your existing batch files and aliases!
 
      /X[+|-]n:  (Expansion and special characters) This option enables
      and disables alias and environment variable expansion, and
@@ -19480,6 +21179,7 @@
           7     Quoting (affects back-quotes [`], double
                 quotes ["], and square brackets []).
           8     Escape character.
+          9     User-defined functions.
 
      If nested alias expansion is disabled, the first alias of a
      command is expanded but any aliases it invokes are not
@@ -19520,6 +21220,22 @@
         c:\> setdos /y1 ^ mybatch.btm
 !INDENT 0
 ;---------------------------------------------------------------------------
+!TOPIC 827 SETERROR
+!TTY
+
+Purpose:  Set the ERRORLEVEL value and the DOS error code.
+
+Format:   SETERROR errorlevel
+
+          errorlevel:  New value for ERRORLEVEL.
+!TTY
+
+Usage
+
+SETERROR set the value of the ERRORLEVEL (162?) internal variable (i.e.
+the exit code of the last external program) and the last-error code in DOS
+to the specified value.
+;---------------------------------------------------------------------------
 !TOPIC 665 SETLOCAL
 !TTY
 
@@ -19603,8 +21319,8 @@
 Usage
 
 SHIFT is provided for compatibility with older batch files, where it was
-used to access more than 10 parameters.  4DOS supports 128 parameters (%0
-to %255), so you may not need to use SHIFT for batch files running
+used to access more than 10 parameters.  4DOS supports 256 parameters (%0
+to %255), so you don't need to use SHIFT for batch files running
 exclusively under JP Software command processors.
 
 SHIFT moves each of the batch file parameters n positions to the left.  The
@@ -19614,7 +21330,8 @@
 becomes %1, %1 becomes %2, etc.).
 
 SHIFT also affects the special parameters %n& (command-line tail) and %#
-(number of command arguments).
+(number of command arguments).  For compatibility with CMD.EXE, SHIFT does
+not affect the %* parameter.
 
 For example, create a batch file called TEST.BAT:
 
@@ -20288,12 +22005,14 @@
 
 Purpose:  TIMER is a system stopwatch.
 
-Format:   TIMER [ON] [/1 /2 /3 /S]
+Format:   TIMER [ON|OFF] [/1 /2 /3 /Q /S]
 
           ON:  Force the stopwatch to restart.
+          OFF: Force the stopwatch to stop.
 
-          /1 (stopwatch #1)           /3 (stopwatch #3)
+          /1 (stopwatch #1, default)  /Q(uiet)
           /2 (stopwatch #2)           /S(plit)
+          /3 (stopwatch #3)
 !TTY
 
 Usage
@@ -20330,9 +22049,10 @@
      rem  Now display the total time
      timer
 
-The smallest interval TIMER can measure depends on the operating system you
-are using, your hardware, and the interaction between the two.  However, it
-should never be greater than .06 second.
+The smallest interval TIMER can measure (same as the elapsed time resolution
+or granularity) is 0.03 seconds under OS/2, and 0.01 seconds under all other
+operating systems.  The largest possible interval that TIMER can measure is
+23 hours, 59 minutes, 59.99 seconds.
 
 Options
 
@@ -20343,6 +22063,8 @@
 
      /3:  Use timer #3.
 
+     /Q:  (Quiet) Don't display any messages.
+
      /S:  (Split) Display a split time without stopping the timer.  To
      display the current elapsed time but leave the timer running:
 
@@ -20354,8 +22076,46 @@
      ON:  Start the timer regardless of its previous state (on or
      off).  Otherwise the TIMER command toggles the timer state
      (unless /S is used).
+
+     OFF: Stops the timer.
 !INDENT 0
 ;---------------------------------------------------------------------------
+!TOPIC 768 TITLE
+!TTY
+
+Purpose:  Change the window title.
+
+Format:   TITLE title
+
+          title:  The new window title.
+!TTY
+
+Usage
+
+TITLE changes the text that appears in the caption bar at the top of the
+command processor window, if 4DOS is running in Windows 95/98/ME or under
+OS/2.
+
+The title text should not be enclosed in quotes unless you want the quotes
+to appear as part of the actual title.
+
+For example, to change the title of the current window to "Title Test", you
+could use this command:
+
+     c:\> title Title Test
+
+The current setting of the TITLE will be stored in an environment variable
+named 146TITLEPROMPT.  The current window title can be obtained through
+the 223_WINTITLE internal variable.
+
+Note that 4DOS is limited to a maximum of 79 characters in the title bar.
+
+Most of the features available in PROMPT may also be used in TITLE,
+including the $ sequences, 131environment variables, 161internal
+variables, and 241variable functions; see 652PROMPT for details.  (ANSI
+sequences and other console-control functions will not do anything useful in
+the title bar, however.)
+;---------------------------------------------------------------------------
 !TOPIC 674 TOUCH
 !TTY
 
@@ -20478,7 +22238,9 @@
      access, creation, or last write date stamp.  The date must be
      entered using the proper format for your current country
      settings.  You can also use the ISO 8601 international date format
-     "yyyy-mm-dd".
+     "yyyy-mm-dd", the ISO 8601 week date format "yyyy-Www-d", where
+     yyyy = year, ww = week, d = week day, or the ISO 8601 ordinal date
+     format "yyyy-ddd", where yyyy = year, ddd = day of the year.
 
      /E:  (No error messages) Suppress all non-fatal error
      messages, such as "File not found."  Fatal error messages, such as
@@ -20534,6 +22296,20 @@
      files.
 !INDENT 0
 ;---------------------------------------------------------------------------
+!TOPIC 774 TRANSIENT
+!TTY
+
+Purpose:  Toggle the shell's transient mode.
+
+Format:   TRANSIENT [ON | OFF]
+!TTY
+
+Usage
+
+TRANSIENT can only be used in batch files.  It allows you to change the
+shell's transient mode (i.e., whether it was started with a /C), so that you
+can make a transient session permanent (or vice versa).
+;---------------------------------------------------------------------------
 !TOPIC 675 TREE
 !TTY
 
@@ -20649,7 +22425,7 @@
 
 Purpose:  Display the contents of the specified file(s).
 
-Format:   TYPE [/A:[[+|-]rhsad] /I"text" /L /P] [@file] file...
+Format:   TYPE [/A:[[+|-]rhsad] /I"text" /L /P /V] [@file] file...
 
           file:   The file or list of files that you want to display.
           @file:  A text file containing the names of the files to
@@ -20658,6 +22434,7 @@
 
           /A: (Attribute select)      /L(ine numbers)
           /I  (match description)     /P(ause)
+                                      /V(erbose)
 !TTY
 
 See also: 697HEAD, 640LIST, and 698TAIL.
@@ -20726,6 +22503,8 @@
 
      /P:  (Pause) Prompt after displaying each page.  Your options at the
      prompt are explained in detail under 045Page and File Prompts.
+
+     /V:  (Verbose) Display a file name header for each file.
 !INDENT 0
 ;---------------------------------------------------------------------------
 !TOPIC 678 UNALIAS
@@ -20999,9 +22778,9 @@
 Usage
 
 Each disk may have a volume label, created when the disk is formatted or
-with the external LABEL command.  Also, every floppy disk
-formatted with DOS version 4.0 or above, OS/2, or 025Windows NT/2000/XP
-has a volume serial number.
+with the external LABEL command.  Also, every floppy disk formatted with DOS
+version 4.0 or above, OS/2, or the 25Windows NT line has a volume serial
+number.
 
 The VOL command will display the volume label and, if available, the volume
 serial number of a disk volume.  If the disk doesn't have a volume label,
@@ -21266,8 +23045,6 @@
 374AutoExecParms directive in 4DOS.INI.  Reduce the amount of
 data and reboot.
 
-Bad disk unit:  Generally caused by a disk drive hardware failure.
-
 Bad environment:  The DOS environment has a bad structure, probably
 because a program destroyed 4DOS's master environment space.  Reboot the
 system or restart the session.
@@ -21282,6 +23059,10 @@
 384InstallPath setting (if any) in 4DOS.INI -- it may point to an old
 directory which no longer contains a complete set of 4DOS files.
 
+Can't close tray:  4DOS can't close the tray of the specified drive,
+because it was not recognized as a valid CD-ROM or DVD drive letter.
+Specify a valid CD-ROM or DVD drive letter, followed by a semicolon.
+
 Can't copy file to itself:  You cannot COPY or MOVE a file to itself.
 4DOS attempts to perform full path and filename expansion before copying to
 help ensure that files aren't inadvertently destroyed.
@@ -21293,6 +23074,10 @@
 Can't delete:  4DOS can't delete the specified file or directory.  The
 disk is probably write protected.
 
+Can't eject media:  4DOS can't eject the disc in the specified drive,
+because it was not recognized as a valid CD-ROM or DVD drive letter.
+Specify a valid CD-ROM or DVD drive letter, followed by a semicolon.
+
 Can't get directory:  4DOS can't read the directory.  The disk drive is
 probably not ready.
 
@@ -21313,13 +23098,13 @@
 648OPTION command or check 4DOS.INI to be sure your 391Swapping
 directive is correct.
 
-CD-ROM door open or CD-ROM not ready:  The CD-ROM drive
+CD-ROM door open or CD-ROM not ready:  The CD-ROM (DVD) drive
 door is open, the power is off, or the drive is disconnected.  Correct the
 problem and try again.
 
-CD-ROM not High Sierra or ISO 9660:  The CD-ROM is not recognized
-as a data CD (it may be a music CD).  Put the correct CD in the drive and try
-again.
+CD-ROM not High Sierra or ISO 9660:  The CD or DVD is not recognized as a
+data CD (it may be a music CD).  Put the correct CD or DVD in the drive and
+try again.
 
 Clipboard is empty or not text format:  You tried to retrieve some text
 from the Windows clipboard, but there is no text available.  Correct the
@@ -21366,13 +23151,11 @@
 the values of the corresponding directives in 4DOS.INI and then
 reboot the system or restart the session.
 
+Device not ready:  The specified device can't be accessed.
+
 Directory stack empty:  POPD or DIRS can't find any entries in the
 directory stack.
 
-Disk is write protected:  The disk cannot be written to.  Check the
-disk and remove the write-protect tab or close the write-protect window if
-necessary.
-
 Disk swap file corrupted:  The 4DOS disk swapping file (4DOSSWAP.nnn or
 xxxxxxxx.4SW) has been moved, deleted, or damaged by another program.
 Reboot the system or restart the session.
@@ -21381,9 +23164,6 @@
 division by zero.  Rearrange the expression, or pre-validate the input
 numbers, to prevent the zero in the divisor.
 
-Drive not ready -- close door:  The removable disk drive door is
-open.  Close the door and try again.
-
 Duplicate redirection:  You tried to redirect standard input, standard
 output, or stand error more than once in the same command.
 
@@ -21428,8 +23208,9 @@
 Exceeded batch nesting limit:  You have attempted to nest batch files
 more than 10 levels deep.
 
-Fatal error -- please reboot:  4DOS cannot continue due to the previous
-error.  Reboot the system or restart the session.
+Fatal error -- reboot the system or restart the session:  4DOS cannot
+continue due to the previous error.  Reboot the system or restart the
+session.
 
 Fatal error, some directives may not have been processed:  An I/O error
 occurred while reading your 4DOS.INI file.  There may be a physical problem
@@ -21459,6 +23240,9 @@
 physical problem with data on the disk or a sharing error on a multitasking
 system.  Check your 4DOS.INI file and try again.
 
+IDLE is disabled:  The BatteryMAX ($IDLE$) device driver has not been
+installed.
+
 Include file not found:  You used the Include directive in the 4DOS.INI
 file, but the file you specified was not found or could not be opened.
 
@@ -21521,6 +23305,11 @@
 substitution in 4DOS.INI, or you used an invalid key name in a keystroke
 595alias or command.  Correct the error and retry the operation.
 
+Invalid media type:  DOS can't read the disk.  Either the disk is bad, or
+it has been formatted by a different operating system.  Reformat it as a DOS
+disk.  Also see Data error above; the problems described there can
+sometimes cause a non-DOS disk error rather than a data error.
+
 Invalid numeric value:  You gave an invalid value for a
 numeric directive in 3514DOS.INI.
 
@@ -21548,6 +23337,8 @@
 Invalid time:  An invalid time was entered.  Check the syntax and
 reenter.
 
+Invalid unit:  Generally caused by a disk drive hardware failure.
+
 Keystroke substitution table full:  4DOS ran out of room to store
 481keystroke substitutions entered in 4DOS.INI.  Reduce the number of
 key substitutions.
@@ -21610,11 +23401,6 @@
 UMB was available.  Check that your XMS driver is properly installed and/or
 free up some UMB space in use by another program.
 
-Non-DOS disk:  DOS can't read the disk.  Either the disk is bad, or it
-has been formatted by a different operating system.  Reformat it as a DOS
-disk.  Also see Data error above; the problems described there can
-sometimes cause a non-DOS disk error rather than a data error.
-
 Not a directory:  The name passed to 655RD is not a directory.
 
 Not an alias:  The specified alias is not in the alias list.
@@ -21624,7 +23410,8 @@
 Not in swapping mode:  You attempted to turn swapping on or off with
 the 668SWAPPING command, but 4DOS is loaded in non-swapping mode.
 
-Not ready:  The specified device can't be accessed.
+Not ready:  The removable disk drive door is open or the disk is not
+fully inserted.  Close the door or fully insert the disk and try again.
 
 Not same device:  This error usually appears in RENAME.  You cannot
 rename a file to a different disk drive.
@@ -21651,9 +23438,6 @@
 experiment with your TSRs and applications to determine and remove its
 cause.
 
-Out of paper:  DOS detected an out-of-paper condition on one of the
-printers.  Check your printer and add paper if necessary.
-
 Overflow:  An arithmetic overflow occurred in the 263@EVAL variable
 function.  Check the values being passed to @EVAL.  @EVAL can handle 20
 digits to the left of the decimal point and 10 to the right.
@@ -21665,8 +23449,11 @@
 to secondary shells.  See the 391Swapping directive in 4DOS.INI for
 additional information.
 
-Read error:  DOS encountered a disk read error; usually caused by a bad
-or unformatted disk.  Also see Data error above.
+Printer out of paper error:  DOS detected an out-of-paper condition on one
+of the printers.  Check your printer and add paper if necessary.
+
+Read fault error:  DOS encountered a disk read error; usually caused by a
+bad or unformatted disk.  Also see Data error above.
 
 Region unavailable, using first available region for [resident portion |
 master environment | global aliases | global history | global directory
@@ -21729,8 +23516,12 @@
 variables are nested more than 16 deep.  Correct the error and retry the
 command.
 
-Write error:  DOS encountered a disk write error; usually caused by a
-bad or unformatted disk.  Also see Data error above.
+Write fault error:  DOS encountered a disk write error; usually caused by
+a bad or unformatted disk.  Also see Data error above.
+
+Write protect error:  The disk cannot be written to.  Check the disk
+and remove the write-protect tab or close the write-protect window if
+necessary.
 
 XMS deallocation failed:  4DOS could not deallocate XMS memory when
 exiting a secondary shell.  XMS memory has been destroyed; reboot the
@@ -21750,61 +23541,44 @@
      752Troubleshooting Compatibility Problems
      112Debugging Batch Files
 
-Please note that support is not offered for this 731free release of 4DOS.
+Note that support is not offered for this 731free release of 4DOS.
 ;---------------------------------------------------------------------------
 !TOPIC 731 Unsupported Free Version
 !NOINDEX
 
-JP Software does not offer technical support for this free version of
-4DOS.
-
-The best place to look for technical support is the JP Software online
-support forum, where other 4DOS users can respond.  The forum is
-accessible via several methods; for complete details and access
-links see the support area of our web site at http://jpsoft.com/.
-
-A number of other support resources are available from our web site,
-including error message listings, documentation files, product
-histories, technical tips and discussions, other technical
-information, and links to other companies' sites.  The section on
-720troubleshooting may help you resolve compatibility and batch file
-issues on your own.
-
-JP Software's advanced command processors for Windows, 204NT and
-21Take Command, remain fully supported software.
+JP Software does not offer technical support for this free version of 4DOS.
+The best place to look for help is the comp.os.msdos.4dos Usenet newsgroup,
+where other 4DOS users can respond.  The section on 720troubleshooting may
+help you resolve compatibility and batch file issues on your own.
 
+JP Software's advanced command processors for the 025Windows NT line,
+204NT and Take Command, remain fully supported software.
 ;---------------------------------------------------------------------------
 !TOPIC 732 Contacting JP Software
 !NOINDEX
 
-You can contact JP Software at the following addresses and numbers.  Our
-normal business hours are 9:00 AM to 5:00 PM weekdays, eastern U.S. time
-(except holidays).
+You can contact JP Software at the following addresses and numbers:
 
 !NOWRAP
 !INDENT 25 5 5 5
      Address             JP Software Inc.
 !INDENT 25 25 25 5
-                         P.O. Box 328
-                         Chestertown, MD 21620
+                         12501 Coopers Ln
+                         Worton, MD 21678
                          USA
 
 !INDENT 25 5 5 5
-     Main number         (410) 810-8818
-     Fax                 (410) 810-0026
-     Order Line          (410) 810-8819
-     Online              Web site:  http://jpsoft.com/
-
+     Phone               +1-410-810-8818
+     Fax                 +1-800-595-8197
+     Internet            Web site: http://jpsoft.com
 !INDENT 25 25 25 5
                          FTP site:  ftp://jpsoft.com
-
-                         Sales:  <sales@jpsoft.com>
-                         Customer Service:  <support@jpsoft.com>
+                           E-mail:  sales@jpsoft.com
 !WRAP
 !INDENT 0
 
-Please note that technical support is not provided for this 731free
-release of 4DOS.
+Note that technical support is not provided for this 731free release of
+4DOS.
 ;---------------------------------------------------------------------------
 !TOPIC 751 Compatibility
 !NOINDEX
@@ -22316,14 +24090,7 @@
 secondary shell, because 4DOS.COM (despite its name) is
 formatted as an EXE file, and the libraries shipped with
 these compilers do not use the proper method to determine
-what type of file they are running.
-
-If you suspect such a problem, make a copy of 4DOS.COM named
-4DOS.EXE, and SET your COMSPEC variable to this file, for
-example:
-
-     d:\4dos> copy 4dos.com 4dos.exe
-     d:\4dos> set comspec=d:\4dos\4dos.exe
+what type of file they are=d:\4dos\4dos.exe
 
 Then run the application in question and see if it works.  If
 so, you can use the above workaround to run the application.
@@ -22920,8 +24687,11 @@
 and you can automatically display a standard startup options menu by
 setting BootMenu=1 in the [Options] section (you can also display this
 menu by pressing F8 when you see the "Starting Windows 95 ..." or
-"Starting Windows 98 ..." prompt).  MSDOS.SYS is a hidden, system,
-read-only file; to edit it from 4DOS use a sequence like this:
+"Starting Windows 98 ..." prompt).  You may also want to set Logo=0 to
+avoid hooking a variety of interrupts that can create incompatibilities
+with BEEP, DELAY and the /W option of INKEY in AUTOEXEC.BAT.  MSDOS.SYS
+is a hidden, system, read-only file; to edit it from DOS use a sequence
+like this:
 
      c:\> attrib -rhs msdos.sys
      c:\> edit msdos.sys
@@ -23767,9 +25537,10 @@
      847NDIS Network Drivers
 
      848Products Requiring Short PATH
-     [includes old versions of Checkit (Touchstone), Computer Select CD-ROM
-     (Ziff-Davis), RenderMan (AutoDesk), VINES Network (Banyan), and Word
-     for Windows 6.0 (Microsoft)]
+     [includes old versions of CADStar PCB (Racal-Redac), Checkit
+     (Touchstone), Computer Select CD-ROM (Ziff-Davis), RenderMan
+     (AutoDesk), VINES Network (Banyan), and Word for Windows 6.0
+     (Microsoft)]
 
 
 Specific Products:
@@ -23956,6 +25727,9 @@
 
 
 !INDENT 5 5 5 5
+     CADStar PCB (Racal-Redac):  [**]  CADStar PCB will hang your
+     system if it is started with a path longer than 128 characters.
+
      Checkit (Touchstone):  [**]  Checkit version 3 requires a
      path length under 128 characters.
 
@@ -25019,33 +26793,6 @@
 
 Region number support is not available under DR-DOS.
 ;---------------------------------------------------------------------------
-!TOPIC 899 Changes to This Help File
-!NOINDEX
-!TTY
-
-2006-04-04 CED   Changed several variable functions to better reflect the
-                 arguments they can take:  250@DATE, 251@DAY, 252@DEC, 336@DECIMAL,
-                 259@DOW, 338@DOWF, 260@DOWI, 261@DOY, 274@FILEREAD, 275@FILES, 288@INC,
-                 301@MAKEAGE, 305@MONTH, 322@TIME, 332@YEAR.  Fixed a minor formatting
-                 issue in 592Commands by Category.
-
-2005-10-09 CED   Documented the unofficial 663SET /A option.  Added a
-                 reference to 118Argument Quoting under 031Using the
-                 Command Line.  Added a note to 655RMDIR re. attributes.
-
-2005-07-18 CED   Added links between 248@COMMA and 285@FORMAT.  Moved the
-                 350examples of variable functions into a separate topic
-                 (241Functions had too many links, triggering a limitation
-                 of 4HELP.EXE.)  Highlighted comments in sample batch files.
-                 Added this topic to list recent updates (HELP CHANGES).
-
-2005-06-18 CED   Added topic equates for more keywords:  707ITERATE, 708LEAVE,
-                 709ENDDO, 710ELSE, 711ELSEIFF, 712ENDIFF, 713ENDTEXT.
-
-
-;;version
-                                                    [2006-04-04 CED -- 7.50]
-;---------------------------------------------------------------------------
 !TOPIC 911 ASCII and Key Codes
 !NOINDEX
 
@@ -25698,7 +27445,7 @@
 (LANs) give additional drive letters to sections of the network file server
 drives.
 
-Most recent systems also include a CD-ROM drive.  The CD-ROM is also
+Most recent systems also include a CD-ROM (or DVD) drive.  The CD-ROM is also
 assigned a drive letter (or several letters, for CD-ROM changers), typically
 using letters beyond that used by the last hard disk in the system, but
 before any network drives.  Some systems may have "RAM disks" (sometimes
@@ -25738,13 +27485,13 @@
      * The FAT File System is the traditional file system used by
      all versions of DOS, originally introduced as FAT12 (still used
      as such on floppies), then extended to FAT16, and since DOS 3.31
-     usually found in its FAT16B variant.  Its name comes from
-     the File Allocation Table DOS uses to keep track of
-     the space allocated to each file.  Windows 95/98/ME,
-     Windows NT/2000/XP, and OS/2 also support the FAT file system.
+     usually found in its FAT16B variant.  Its name comes from the
+     File Allocation Table DOS uses to keep track of the space
+     allocated to each file.  Windows 95/98/ME, the 25Windows NT
+     line and OS/2 also support the FAT file system.
 
      * The VFAT File System is an extension of the FAT file system
-     available in Windows NT/2000/XP and in Windows 95/98/ME,
+     available in the 25Windows NT line and in Windows 95/98/ME,
      including DOS and 4DOS sessions run from the Windows 95/98/ME
      desktop.  This system maintains additional information about files
      on FAT drives, including long filenames (LFNs).
@@ -25762,24 +27509,24 @@
      * The FAT32 File System is an additional extension to the
      FAT file system, supporting larger disk drives.  It is only
      available in Windows 95 OEM Service Release 2 ("OEMSR2") and
-     later versions, that is in Windows 98/ME, including in
-     DOS sessions run under their desktops.  It is also available
-     under Windows 2000 and XP.  All these platforms also support
+     later versions, that is in Windows 98/ME, including in DOS
+     sessions run under their desktops.  It is also available under
+     the 25Windows NT line.  All these platforms also support
      VFAT extensions on FAT32 volumes including long filenames,
      however, long filenames are not available in plain MS-DOS 7.0/7.10/8.0
-     mode under Windows 95/98/ME.  FAT32 is also natively
-     supported under DR-DOS 7.04 and above, as well as under
-     PC DOS 7.10, though, like MS-DOS, these platforms do not
+     mode under Windows 95/98/ME.  FAT32 is also natively supported
+     under DR-DOS 7.04 and above, as well as under PC DOS 7.1, ROM-DOS 7.1,
+     PTS-DOS 32 and FreeDOS, though, like MS-DOS, these platforms do not
      natively support long filenames.  An additional driver is
      required for long filename support.
 
 !INDENT 7 5 7 5
-     The FAT32 file system is incompatible with OS/2, Windows NT, and
-     earlier versions of DOS.
+     The FAT32 file system is incompatible with OS/2, Windows NT version
+     4.00 and below, and earlier versions of DOS.
 
      (If you are not sure whether your system is running Windows 95 OEM
      Service Release 2, use the 4DOS VER command to check.  VER reports
-     MS-DOS 7.0 for the original Windows 95 release, and MS-DOS 7.1 or
+     MS-DOS 7.00 for the original Windows 95 release, and MS-DOS 7.10 or
      higher for OEMSR2 and later versions.)
 !INDENT 7 5 5 5
 
@@ -25790,15 +27537,15 @@
      system.  It also supports "extended attributes" to retain additional
      information about your files.
 
-     * NTFS is a file system provided with Windows NT/2000/XP.  It
+     * NTFS is a file system provided with the 25Windows NT line.  It
      supports long file names, and offers higher performance and better
      support for large drives than the FAT or VFAT system.
 
 !INDENT 7 5 7 5
      DOS sessions running under OS/2 can access files on HPFS drives if the
      files have short, FAT-compatible names.  Other operating systems (DOS,
-     Windows 95/98/ME, and Windows NT/2000/XP) can not access files
-     on HPFS drives.
+     Windows 95/98/ME, Windows NT version 4.00 or newer and the rest of the
+     25Windows NT line) can not access files on HPFS drives.
 !INDENT 0
 
 Throughout this help system the term "LFN file system" is used to
@@ -25806,9 +27553,9 @@
 Long File Name).
 
 Additional file systems may be installed under some operating systems to
-support CD-ROM or network drives.  The file system type (FAT / VFAT, FAT32, or
-NTFS) is determined when a hard disk volume is formatted and applies to
-the entire volume.
+support CD-ROM (DVD) or network drives.  The file system type (FAT / VFAT,
+FAT32, or NTFS) is determined when a hard disk volume is formatted and
+applies to the entire volume.
 
 4DOS supports any standard file system installed under your operating
 system.  If your operating system can access files on a particular drive,
@@ -26026,7 +27773,7 @@
 !TOPIC 971 Glossary
 !NOINDEX
 
-The glossary contains over 225 terms, and is divided into sections by the
+The glossary contains over 235 terms, and is divided into sections by the
 first letter of each term.  Select the section you want to review:
 
 9724  973A  974B  975C  976D  977E  978F  979G  980H  981I  982K  983L  984M  985N  986O  987P  988R  989S  990T  991U  992V  993W  994X
@@ -26147,7 +27894,7 @@
 
 Block Device:  A physical device for input or output which can
 transmit or receive large blocks of data while the computer is engaged
-in other activities.  Examples include disk, tape, and CD-ROM
+in other activities.  Examples include disk, tape, and CD-ROM (DVD)
 drives.  See also Character Device.
 
 Boot Directory:  The current directory at the time the system is
@@ -26497,11 +28244,12 @@
 unallocated space on the disk.
 
 FAT32 File System:  An extension of the FAT file system, available
-in Windows 95 OEM Service Release 2 ("OEMSR2") and later versions,
-and in Windows 2000/XP.  FAT32 supports long filenames, and supports
-much larger hard disks than the FAT system.  FAT32 is also available
-in some versions of DR-DOS, though a driver is required for long
-filename support.  See also VFAT File System.
+in Windows 95 OEM Service Release 2 ("OEMSR2") and later versions, and
+in Windows 2000/XP/Vista.  FAT32 supports long filenames, and supports
+much larger hard disks than the FAT system.  FAT32 is also available in
+FreeDOS, PC DOS 7.1, ROM-DOS 7.1, PTS-DOS 32 and some versions of DR-DOS,
+though a driver is required for long filename support.  See also
+VFAT File System.
 
 FAT-Compatible File Name:  See SFN.
 
@@ -26578,13 +28326,13 @@
 
 9724  973A  974B  975C  976D  977E  978F  979G  980H  981I  982K  983L  984M  985N  986O  987P  988R  989S  990T  991U  992V  993W  994X
 
-IFS or Installable File System:  A file system which can be loaded
-when required to support devices such as CD-ROM or network drives, or
-non-default disk formats like HPFS (in OS/2) or NTFS (in Windows NT/2000/XP).
-Installable file systems are primarily supported in 32-bit operating
-systems like OS/2 and Windows NT/2000/XP.  Depending on operating system
-design they may be loaded at boot time, or loaded and unloaded dynamically
-while the system is running.
+IFS or Installable File System:  A file system which can be loaded when
+required to support devices such as CD-ROM (DVD) or network drives, or
+non-default disk formats like HPFS (in OS/2) or NTFS (in Windows
+NT/2000/XP/Vista).  Installable file systems are primarily supported in
+32-bit operating systems like OS/2 and the 25Windows NT line.  Depending
+on operating system design they may be loaded at boot time, or loaded and
+unloaded dynamically while the system is running.
 
 Include List:  A concise method of specifying several files or groups
 of files in the same directory, for use with all 4DOS commands which
@@ -26701,7 +28449,7 @@
 simultaneously on the same computer.  Multitasking software for PC
 compatible systems includes operating environments like Windows 3.xx,
 DESQview and DESQview/X, DR-DOS TASKMGR, PC/GEOS and Ensemble, and complete
-operating systems like OS/2, Windows 95/98/ME, and Windows NT/2000/XP.
+operating systems like OS/2, Windows 95/98/ME, and the 25Windows NT line.
 ;---------------------------------------------------------------------------
 !TOPIC 985 Glossary - N
 !NOINDEX
@@ -26722,8 +28470,8 @@
 Non-Swapping Mode:  See Memory Resident Mode.
 
 NTFS or New Technology File System:  A file system distributed with
-Windows NT/2000/XP which allows longer file names, supports larger drives,
-and provides better performance than the traditional FAT file system.
+the 25Windows NT line which allows longer file names, supports larger
+drives and provides better performance than the traditional FAT file system.
 
 Numeric Coprocessor:  A chip which works in conjunction with an Intel
 8086, 80286, 80386, 80486, or Pentium CPU to perform decimal arithmetic
@@ -26971,6 +28719,9 @@
 
 9724  973A  974B  975C  976D  977E  978F  979G  980H  981I  982K  983L  984M  985N  986O  987P  988R  989S  990T  991U  992V  993W  994X
 
+V86:  A virtual 8086 mode in the 386 and later CPUs that allows execution
+of real mode (16-bit) programs in protected (32-bit) mode.
+
 Variable Expansion:  The process of scanning a command line and
 replacing each environment variable name, alias parameter, or batch file
 parameter with its value.
@@ -26984,8 +28735,23 @@
 Variable:  See Alias Parameter, Batch File Parameter, and
 Environment Variable.
 
+VCPI or Virtual Control Program Interface:  A specification for managing
+memory beyond the first megabyte on PCs with 386 or later processors.  VCPI
+support for DOS programs is provided by some DOS memory managers.  See also
+DPMI.
+
+VDS or Virtual DMA (Direct Memory Access) Services:  A programming
+interface that lets bus mastering devices cooperatively manage DMA when the
+CPU runs in protected mode.  VDS are provided by some memory managers and
+Windows versions.  See also V86.
+
+VESA or Video Electronics Standards Association:  An international body
+that has issued some standards relating to the video peripherals in personal
+computers, such as the VESA BIOS Extensions, VESA Display Power Management
+Signalling, etc.
+
 VFAT File System:  An extension of the FAT file system, available
-in Windows 95/98/ME and Windows NT/2000/XP, which supports long
+in Windows 95/98/ME and the 25Windows NT line, which supports long
 filenames.  Also see LFN and FAT32 File System.
 
 Virtual Disk:  See RAM Disk.
@@ -27042,9 +28808,9 @@
 
 Purpose:  The memory-resident utility which provides 053Keystack functionality.
 
-Format:   [LH] [d:\path\]KSTACK [/I]
+Format:   [LH] [d:\path\]KSTACK [/I] [/U]
 
-          /I (force Install)
+          /I (force Install)          /U(ninstall)
 !TTY
 
 Usage
@@ -27053,7 +28819,7 @@
 will probably want to do this in 109AUTOEXEC.BAT.  If KSTACK is not in a
 directory in your search 649path, you must specify the path to the
 KSTACK.COM file.  If you have upper memory available, you can save about one
-and a half kilobytes of conventional memory by loading KSTACK high with the
+and a third kilobytes of conventional memory by loading KSTACK high with the
 639LH command.
 
 Options
@@ -27065,6 +28831,12 @@
      install a second instance.  This is useful for installing KSTACK in a
      DOS session under 795Windows 95 or 98 if a copy was installed before
      Windows loaded, e.g. through 109AUTOEXEC.BAT.
+
+     /U:  (Uninstall) Removes a previously installed copy of KSTACK from
+     memory.  Note that KSTACK cannot be uninstalled, if it has been loaded
+     trough an INSTALL= directive from the CONFIG.SYS file, if another
+     utility that "hooks" interrupts 16h or 2Fh has been loaded after it,
+     or if its keystroke buffer is not empty.
 !INDENT 0
 ;---------------------------------------------------------------------------
 !TOPIC 704 BATCOMP
@@ -27074,19 +28846,20 @@
 Purpose:  Compress batch files.  See 115Batch File Compression for
           additional details.
 
-Format:   [d:\path\]BATCOMP [/K /O /Q] InputFile [OutputFile]
+Format:   [d:\path\]BATCOMP [/Ekkkk /K /O /Q] InputFile [OutputFile]
 
           InputFile:   A readable batch file to compress
           OutputFile:  The name to give the compressed batch file
 
-          /K (remove comments)        /O(verwrite)
-          /Q(uiet)
+          /E(ncryption key)           /O(verwrite)
+          /K (remove comments)        /Q(uiet)
 !TTY
 
 Usage
 
-BATCOMP is a batch file compressor.  It translates batch files into a
-smaller format which cannot be read or edited.
+BATCOMP is a batch file compressor and optionally allows for simple
+key-based encryption.  It translates batch files into a smaller format which
+cannot be read or edited.
 
 You must specify the full name of the input file, including its extension,
 on the BATCOMP command line.  If you do not specify OutputFile, it defaults
@@ -27097,9 +28870,9 @@
 into itself.
 
 The output file will not be legible, but it will run under the current
-versions of 4DOS, 0204NT and 021Take Command.  The behavior and
-performance of the file should be the same as if it were run in its
-original text form as a .BTM file.
+versions of 4DOS, 0204NT and Take Command.  The behavior and performance
+of the file should be the same as if it were run in its original text form
+as a .BTM file.
 
 Compression is not effective for very small files and may even result in
 a slightly larger file.
@@ -27121,6 +28894,9 @@
 Options
 
 !INDENT 5 5 0 5
+     /E:  (Encryption) Specify a key (string) to be used for encryption.
+     The key must be no longer than 4 characters, or will be truncated.
+
      /K:  (Remove comments) By default, comments (lines starting with
      "REM" or "::" but not "REM >") are retained in the compressed
      file.  /K forces those lines to be stripped for additional size
@@ -27136,8 +28912,8 @@
 !NOINDEX
 !TTY
 
-If you want to use 4DOS on a bootable floppy or CD-ROM, you may choose to
-create a RAM disk and use it like a hard drive.  In this scenario it makes
+If you want to use 4DOS on a bootable floppy or CD-ROM (DVD), you may choose
+to create a RAM disk and use it like a hard drive.  In this scenario it makes
 sense to relocate 4DOS from the boot disk to the RAM disk during
 AUTOEXEC.BAT, both for performance (RAM disks are far faster than floppies
 or CD-ROMs) and to allow the boot disk to be removed from the drive.
@@ -27304,7 +29080,7 @@
 processes the command normally.
 
 The 4DOS "Installable Command" interface is compatible with an undocumented
-interface present in COMMAND.COM for MS-DOS and PC-DOS 3.3 and above.  This
+interface present in COMMAND.COM for MS-DOS and PC DOS 3.3 and above.  This
 interface is documented more thoroughly in the excellent reference text
 Undocumented DOS by Schulman et. al., published by Addison Wesley.
 
@@ -27503,28 +29279,29 @@
 
  Internal Commands:
 
- ?              do             history        popd           tee
- alias          drawbox        if             prompt         text
- attrib         drawhline      iff            pushd          time
- beep           drawvline      inkey          quit           timer
- break          echo           input          rd             touch
- call           echoerr        keybd          reboot         tree
- cancel         echos          keystack       rem            truename
- cd             echoserr       lfnfor         ren            type
- cdd            endlocal       lh             rename         unalias
- chcp           erase          list           return         unfunction
- chdir          eset           loadbtm        rmdir          unlock
- cls            except         loadhigh       screen         unset
- color          exit           lock           scrput         ver
- copy           ffind          log            select         verify
- ctty           for            md             set            vol
- date           free           memory         setdos         vscrput
- del            function       mkdir          setlocal       which
- delay          global         move           shift          y
- describe       gosub          on             start
+ ?              dirs           help           pause          tail
+ alias          do             history        popd           tee
+ attrib         drawbox        idle           prompt         text
+ beep           drawhline      if             pushd          time
+ break          drawvline      iff            quit           timer
+ call           echo           inkey          rd             title
+ cancel         echoerr        input          reboot         touch
+ cd             echos          keybd          rem            transient
+ cdd            echoserr       keystack       ren            tree
+ chcp           ejectmedia     lfnfor         rename         truename
+ chdir          endlocal       lh             return         type
+ closetray      erase          list           rmdir          unalias
+ cls            eset           loadbtm        screen         unfunction
+ color          except         loadhigh       scrput         unlock
+ copy           exit           lock           select         unset
+ country        ffind          log            set            ver
+ ctty           for            md             setdos         verify
+ date           free           memory         seterror       vol
+ del            function       mkdir          setlocal       vscrput
+ delay          global         move           shift          which
+ describe       gosub          on             start          y
  dir            goto           option         swapping
  dirhistory     head           path           switch
- dirs           help           pause          tail
 
 
  Other Keywords:
@@ -27537,46 +29314,71 @@
 
  Internal Variables:
 
- +              _bg            _cwp           _echo          _ndp
- =              _boot          _cwps          _env           _row
- ?              _build         _date          _fg            _rows
- ??             _ci            _day           _hlogfile      _second
- _4ver          _cmdline       _disk          _hour          _shell
- _?             _cmdproc       _dname         _isodate       _swapping
- _alias         _co            _dos           _kbhit         _syserr
- _ansi          _codepage      _dosver        _kstack        _time
- _apmac         _column        _dow           _lastdisk      _transient
- _apmbatt       _columns       _dowf          _logfile       _video
- _apmlife       _country       _dowi          _minute        _win
- _batch         _cpu           _doy           _monitor       _wintitle
- _batchline     _cwd           _dpmi          _month         _year
- _batchname     _cwds          _dv            _mouse
+ +              _columns       _execstr       _month         _swapping
+ =              _country       _expansion     _monthf        _syserr
+ ?              _cpu           _fg            _mouse         _sysreq
+ ??             _cpuspeed      _fontpage      _mscdex        _taskmax
+ _4ver          _ctrl          _graftabl      _ndp           _taskswitcher
+ _alias         _cwd           _graphics      _network       _tick
+ _alt           _cwds          _hdrives       _nlsfunc       _time
+ _ansi          _cwp           _hlogfile      _numlock       _transient
+ _apmac         _cwps          _hour          _pipe          _tsc
+ _apmbatt       _date          _idow          _power         _tzn
+ _apmlife       _datetime      _idowf         _print         _tzo
+ _append        _day           _ininame       _ralt          _unixtime
+ _assign        _disk          _isodate       _rctrl         _utcdate
+ _batch         _display       _isodowi       _ready         _utcdatetime
+ _batchline     _dname         _isordate      _row           _utchour
+ _batchname     _dos           _isowdate      _rows          _utcisodate
+ _batchtype     _dosver        _isoweek       _rshift        _utcminute
+ _bdebugger     _dow           _isowyear      _sbdsp         _utcsecond
+ _bg            _dowf          _kbhit         _scrolllock    _utctime
+ _boot          _dowi          _keystacked    _second        _v86
+ _build         _doy           _kstack        _share         _vcpi
+ _capslock      _dpmi          _lalt          _shell         _vds
+ _cdroms        _driver        _lastdisk      _shift         _video
+ _ci            _drives        _lctrl         _smartdrv      _win
+ _cmdline       _dst           _logfile       _startpath     _winticks
+ _cmdproc       _dv            _lshift        _stderr        _wintitle
+ _cmdspec       _echo          _machine       _stdin         _year
+ _co            _editmode      _minute        _stdout
+ _codepage      _ega           _mjd           _stzn
+ _column        _env           _monitor       _stzo
 
 
  Variable Functions:
 
- @abs           @diskused      @fileseek      @len           @replace
- @alias         @dosmem        @fileseekl     @lfn           @right
- @altname       @dow           @filesize      @line          @search
- @ascii         @dowf          @filetime      @lines         @select
- @attrib        @dowi          @filewrite     @lower         @sfn
- @cabs          @doy           @filewriteb    @lpt           @strip
- @cdrom         @ems           @findclose     @makeage       @substr
- @char          @errtext       @findfirst     @makedate      @time
- @clip          @eval          @findnext      @maketime      @timer
- @clipw         @exec          @format        @master        @trim
- @comma         @execstr       @full          @max           @truename
- @convert       @expand        @function      @min           @unique
- @crc32         @ext           @if            @month         @upper
- @date          @extended      @inc           @name          @wild
- @day           @field         @index         @numeric       @word
- @dec           @fileage       @iniread       @path          @words
- @decimal       @fileclose     @iniwrite      @random        @xms
- @descript      @filedate      @insert        @readscr       @year
- @device        @filename      @instr         @ready
- @digits        @fileopen      @int           @remote
- @diskfree      @fileread      @label         @removable
- @disktotal     @files         @left          @repeat
+ @abs           @digits        @filesize      @ispunct       @removable
+ @agedate       @dirstack      @filetime      @isspace       @repeat
+ @alias         @diskfree      @filewrite     @isxdigit      @replace
+ @altname       @disktotal     @filewriteb    @label         @reverse
+ @ascii         @diskused      @findclose     @lcs           @right
+ @attrib        @dosmem        @findfirst     @left          @rtrim
+ @average       @dow           @findnext      @len           @search
+ @caps          @dowf          @floor         @lfn           @select
+ @cdrom         @dowi          @format        @line          @serial
+ @ceiling       @doy           @fstype        @lines         @sfn
+ @char          @drivetype     @full          @lower         @sha1
+ @clip          @ems           @function      @lpt           @similar
+ @clipw         @errtext       @hddsize       @ltrim         @smbstr
+ @clustsize     @eval          @history       @makeage       @strip
+ @codepage      @exec          @if            @makedate      @subst
+ @com           @execstr       @inc           @maketime      @substr
+ @comma         @expand        @index         @master        @time
+ @compare       @ext           @iniread       @max           @timer
+ @convert       @extended      @iniwrite      @md5           @trim
+ @count         @field         @insert        @min           @truename
+ @crc32         @fields        @instr         @month         @truncate
+ @cwd           @fileage       @int           @monthf        @unique
+ @cwds          @fileclose     @isalnum       @mouse         @unquote
+ @date          @filedate      @isalpha       @name          @unquotes
+ @dateconv      @filename      @isascii       @numeric       @upper
+ @day           @fileopen      @iscntrl       @path          @wild
+ @ddcstr        @fileread      @isdigit       @quote         @word
+ @dec           @filereadb     @isodowi       @random        @words
+ @decimal       @files         @isoweek       @readscr       @xms
+ @descript      @fileseek      @isowyear      @ready         @year
+ @device        @fileseekl     @isprint       @remote
 
 
  IF and IFF Conditions:
@@ -27587,9 +29389,9 @@
 
  Logical and Relational Operators:
 
- !=             .xor.          ge             le             ne
- .and.          ==             gt             lt             not
- .or.           eq
+ !=             .xor.          eqc            le             not
+ .and.          ==             ge             lt
+ .or.           eq             gt             ne
 
 
  Redirection and Piping Operators:
@@ -27601,9 +29403,10 @@
 
  Environment Variables:
 
- _cdpath        colordir       filecompletion pathext        temp4dos
- cdpath         comspec        loginname      prompt         titleprompt
- cmdline        doshelp        path           temp           tmp
+ _cdpath        comspec        no_sep         temp           tz
+ cdpath         doshelp        path           temp4dos
+ cmdline        filecompletion pathext        titleprompt
+ colordir       loginname      prompt         tmp
 ;---------------------------------------------------------------------------
 !TOPIC 920 An Embarrassment of Riches
 !NOINDEX
@@ -27946,43 +29749,4 @@
         echo First Monday of the month:  Rent is due!
      endiff
 ;---------------------------------------------------------------------------
-!TOPIC 940 Wishlist
-!NOINDEX
-!NOWRAP
-
-     *  BUGS AND MISFEATURES
-
-%* should not be affected by the SHIFT command
-@FILESIZE should not roll over at 4GB
-@READY should work with CD-ROMs
-DIR /F and DIR /B /S should not disable colorization
-DESCRIBE should not lose third-party info
-RD should remove hidden/system subdirectories
-Reenable /Y startup option
-SET /M should uppercase variable name
-
-
-     *  ENHANCEMENTS
-
-/P should overwrite its own prompts
-Allow dynamically changing //CritFail from the command line
-CALL option to start batch at specified line?  Or label?
-Change default EscapeChar, ParameterChar, CommandSep to match 4NT
-DO list-of-drives or list-of-letters
-DO recursive (/R)
-Reenable _4INST.BTM support
-SETDOS:  allow decimal values for /C /E /P
-Support the batch debugger in DR DOS 7.0x AUTOEXEC.BAT
-@SERIAL function
-TEXT option for variable expansion?
-TEXT option to *not* display text; REM TEXT should act accordingly
-TYPE option to display filenames
-TEXT option to specify terminal word
-TEXT option to strip leading whitespace?
-VER should list the 4DOS build number in default output
-Y and N keys in batch debugger
-_FORK internal variable
-Option to exclude CWD from path search
-!WRAP
-;---------------------------------------------------------------------------
 ;End of file
